"use strict";!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(){j=!1,g.length?i=g.concat(i):k=-1,i.length&&d()}function d(){if(!j){var a=setTimeout(c);j=!0;for(var b=i.length;b;){for(g=i,i=[];++k<b;)g&&g[k].run();k=-1,b=i.length}g=null,j=!1,clearTimeout(a)}}function e(a,b){this.fun=a,this.array=b}function f(){}var g,h=b.exports={},i=[],j=!1,k=-1;h.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];i.push(new e(a,b)),1!==i.length||j||setTimeout(d,0)},e.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],2:[function(a,b,c){(function(a){!function(a){if("function"==typeof bootstrap)bootstrap("promise",a);else if("object"==typeof c&&"object"==typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define(a);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=a}else{if("undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");self.Q=a()}}(function(){function b(a){return function(){return X.apply(a,arguments)}}function c(a){return a===Object(a)}function d(a){return"[object StopIteration]"===db(a)||a instanceof T}function e(a,b){if(Q&&b.stack&&"object"==typeof a&&null!==a&&a.stack&&-1===a.stack.indexOf(eb)){for(var c=[],d=b;d;d=d.source)d.stack&&c.unshift(d.stack);c.unshift(a.stack);var e=c.join("\n"+eb+"\n");a.stack=f(e)}}function f(a){for(var b=a.split("\n"),c=[],d=0;d<b.length;++d){var e=b[d];i(e)||g(e)||!e||c.push(e)}return c.join("\n")}function g(a){return-1!==a.indexOf("(module.js:")||-1!==a.indexOf("(node.js:")}function h(a){var b=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(a);if(b)return[b[1],Number(b[2])];var c=/at ([^ ]+):(\d+):(?:\d+)$/.exec(a);if(c)return[c[1],Number(c[2])];var d=/.*@(.+):(\d+)$/.exec(a);return d?[d[1],Number(d[2])]:void 0}function i(a){var b=h(a);if(!b)return!1;var c=b[0],d=b[1];return c===S&&d>=U&&ib>=d}function j(){if(Q)try{throw new Error}catch(a){var b=a.stack.split("\n"),c=b[0].indexOf("@")>0?b[1]:b[2],d=h(c);if(!d)return;return S=d[0],d[1]}}function k(a,b,c){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(b+" is deprecated, use "+c+" instead.",new Error("").stack),a.apply(a,arguments)}}function l(a){return a instanceof p?a:t(a)?C(a):B(a)}function m(){function a(a){b=a,f.source=a,Z(c,function(b,c){l.nextTick(function(){a.promiseDispatch.apply(a,c)})},void 0),c=void 0,d=void 0}var b,c=[],d=[],e=ab(m.prototype),f=ab(p.prototype);if(f.promiseDispatch=function(a,e,f){var g=Y(arguments);c?(c.push(g),"when"===e&&f[1]&&d.push(f[1])):l.nextTick(function(){b.promiseDispatch.apply(b,g)})},f.valueOf=function(){if(c)return f;var a=r(b);return s(a)&&(b=a),a},f.inspect=function(){return b?b.inspect():{state:"pending"}},l.longStackSupport&&Q)try{throw new Error}catch(g){f.stack=g.stack.substring(g.stack.indexOf("\n")+1)}return e.promise=f,e.resolve=function(c){b||a(l(c))},e.fulfill=function(c){b||a(B(c))},e.reject=function(c){b||a(A(c))},e.notify=function(a){b||Z(d,function(b,c){l.nextTick(function(){c(a)})},void 0)},e}function n(a){if("function"!=typeof a)throw new TypeError("resolver must be a function.");var b=m();try{a(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}return b.promise}function o(a){return n(function(b,c){for(var d=0,e=a.length;e>d;d++)l(a[d]).then(b,c)})}function p(a,b,c){void 0===b&&(b=function(a){return A(new Error("Promise does not support operation: "+a))}),void 0===c&&(c=function(){return{state:"unknown"}});var d=ab(p.prototype);if(d.promiseDispatch=function(c,e,f){var g;try{g=a[e]?a[e].apply(d,f):b.call(d,e,f)}catch(h){g=A(h)}c&&c(g)},d.inspect=c,c){var e=c();"rejected"===e.state&&(d.exception=e.reason),d.valueOf=function(){var a=c();return"pending"===a.state||"rejected"===a.state?d:a.value}}return d}function q(a,b,c,d){return l(a).then(b,c,d)}function r(a){if(s(a)){var b=a.inspect();if("fulfilled"===b.state)return b.value}return a}function s(a){return a instanceof p}function t(a){return c(a)&&"function"==typeof a.then}function u(a){return s(a)&&"pending"===a.inspect().state}function v(a){return!s(a)||"fulfilled"===a.inspect().state}function w(a){return s(a)&&"rejected"===a.inspect().state}function x(){fb.length=0,gb.length=0,hb||(hb=!0)}function y(a,b){hb&&(gb.push(a),fb.push(b&&"undefined"!=typeof b.stack?b.stack:"(no stack) "+b))}function z(a){if(hb){var b=$(gb,a);-1!==b&&(gb.splice(b,1),fb.splice(b,1))}}function A(a){var b=p({when:function(b){return b&&z(this),b?b(a):this}},function(){return this},function(){return{state:"rejected",reason:a}});return y(b,a),b}function B(a){return p({when:function(){return a},get:function(b){return a[b]},set:function(b,c){a[b]=c},"delete":function(b){delete a[b]},post:function(b,c){return null===b||void 0===b?a.apply(void 0,c):a[b].apply(a,c)},apply:function(b,c){return a.apply(b,c)},keys:function(){return cb(a)}},void 0,function(){return{state:"fulfilled",value:a}})}function C(a){var b=m();return l.nextTick(function(){try{a.then(b.resolve,b.reject,b.notify)}catch(c){b.reject(c)}}),b.promise}function D(a){return p({isDef:function(){}},function(b,c){return J(a,b,c)},function(){return l(a).inspect()})}function E(a,b,c){return l(a).spread(b,c)}function F(a){return function(){function b(a,b){var g;if("undefined"==typeof StopIteration){try{g=c[a](b)}catch(h){return A(h)}return g.done?l(g.value):q(g.value,e,f)}try{g=c[a](b)}catch(h){return d(h)?l(h.value):A(h)}return q(g,e,f)}var c=a.apply(this,arguments),e=b.bind(b,"next"),f=b.bind(b,"throw");return e()}}function G(a){l.done(l.async(a)())}function H(a){throw new T(a)}function I(a){return function(){return E([this,K(arguments)],function(b,c){return a.apply(b,c)})}}function J(a,b,c){return l(a).dispatch(b,c)}function K(a){return q(a,function(a){var b=0,c=m();return Z(a,function(d,e,f){var g;s(e)&&"fulfilled"===(g=e.inspect()).state?a[f]=g.value:(++b,q(e,function(d){a[f]=d,0===--b&&c.resolve(a)},c.reject,function(a){c.notify({index:f,value:a})}))},void 0),0===b&&c.resolve(a),c.promise})}function L(a){if(0===a.length)return l.resolve();var b=l.defer(),c=0;return Z(a,function(d,e,f){function g(a){b.resolve(a)}function h(){c--,0===c&&b.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function i(a){b.notify({index:f,value:a})}var j=a[f];c++,q(j,g,h,i)},void 0),b.promise}function M(a){return q(a,function(a){return a=_(a,l),q(K(_(a,function(a){return q(a,V,V)})),function(){return a})})}function N(a){return l(a).allSettled()}function O(a,b){return l(a).then(void 0,void 0,b)}function P(a,b){return l(a).nodeify(b)}var Q=!1;try{throw new Error}catch(R){Q=!!R.stack}var S,T,U=j(),V=function(){},W=function(){function b(){for(;c.next;){c=c.next;var a=c.task;c.task=void 0;var d=c.domain;d&&(c.domain=void 0,d.enter());try{a()}catch(f){if(g)throw d&&d.exit(),setTimeout(b,0),d&&d.enter(),f;setTimeout(function(){throw f},0)}d&&d.exit()}e=!1}var c={task:void 0,next:null},d=c,e=!1,f=void 0,g=!1;if(W=function(b){d=d.next={task:b,domain:g&&a.domain,next:null},e||(e=!0,f())},"undefined"!=typeof a&&a.nextTick)g=!0,f=function(){a.nextTick(b)};else if("function"==typeof setImmediate)f="undefined"!=typeof window?setImmediate.bind(window,b):function(){setImmediate(b)};else if("undefined"!=typeof MessageChannel){var h=new MessageChannel;h.port1.onmessage=function(){f=i,h.port1.onmessage=b,b()};var i=function(){h.port2.postMessage(0)};f=function(){setTimeout(b,0),i()}}else f=function(){setTimeout(b,0)};return W}(),X=Function.call,Y=b(Array.prototype.slice),Z=b(Array.prototype.reduce||function(a,b){var c=0,d=this.length;if(1===arguments.length)for(;;){if(c in this){b=this[c++];break}if(++c>=d)throw new TypeError}for(;d>c;c++)c in this&&(b=a(b,this[c],c));return b}),$=b(Array.prototype.indexOf||function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return b;return-1}),_=b(Array.prototype.map||function(a,b){var c=this,d=[];return Z(c,function(e,f,g){d.push(a.call(b,f,g,c))},void 0),d}),ab=Object.create||function(a){function b(){}return b.prototype=a,new b},bb=b(Object.prototype.hasOwnProperty),cb=Object.keys||function(a){var b=[];for(var c in a)bb(a,c)&&b.push(c);return b},db=b(Object.prototype.toString);T="undefined"!=typeof ReturnValue?ReturnValue:function(a){this.value=a};var eb="From previous event:";l.resolve=l,l.nextTick=W,l.longStackSupport=!1,"object"==typeof a&&a&&a.env&&a.env.Q_DEBUG&&(l.longStackSupport=!0),l.defer=m,m.prototype.makeNodeResolver=function(){var a=this;return function(b,c){b?a.reject(b):a.resolve(arguments.length>2?Y(arguments,1):c)}},l.Promise=n,l.promise=n,n.race=o,n.all=K,n.reject=A,n.resolve=l,l.passByCopy=function(a){return a},p.prototype.passByCopy=function(){return this},l.join=function(a,b){return l(a).join(b)},p.prototype.join=function(a){return l([this,a]).spread(function(a,b){if(a===b)return a;throw new Error("Can't join: not the same: "+a+" "+b)})},l.race=o,p.prototype.race=function(){return this.then(l.race)},l.makePromise=p,p.prototype.toString=function(){return"[object Promise]"},p.prototype.then=function(a,b,c){function d(b){try{return"function"==typeof a?a(b):b}catch(c){return A(c)}}function f(a){if("function"==typeof b){e(a,h);try{return b(a)}catch(c){return A(c)}}return A(a)}function g(a){return"function"==typeof c?c(a):a}var h=this,i=m(),j=!1;return l.nextTick(function(){h.promiseDispatch(function(a){j||(j=!0,i.resolve(d(a)))},"when",[function(a){j||(j=!0,i.resolve(f(a)))}])}),h.promiseDispatch(void 0,"when",[void 0,function(a){var b,c=!1;try{b=g(a)}catch(d){if(c=!0,!l.onerror)throw d;l.onerror(d)}c||i.notify(b)}]),i.promise},l.tap=function(a,b){return l(a).tap(b)},p.prototype.tap=function(a){return a=l(a),this.then(function(b){return a.fcall(b).thenResolve(b)})},l.when=q,p.prototype.thenResolve=function(a){return this.then(function(){return a})},l.thenResolve=function(a,b){return l(a).thenResolve(b)},p.prototype.thenReject=function(a){return this.then(function(){throw a})},l.thenReject=function(a,b){return l(a).thenReject(b)},l.nearer=r,l.isPromise=s,l.isPromiseAlike=t,l.isPending=u,p.prototype.isPending=function(){return"pending"===this.inspect().state},l.isFulfilled=v,p.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},l.isRejected=w,p.prototype.isRejected=function(){return"rejected"===this.inspect().state};var fb=[],gb=[],hb=!0;l.resetUnhandledRejections=x,l.getUnhandledReasons=function(){return fb.slice()},l.stopUnhandledRejectionTracking=function(){x(),hb=!1},x(),l.reject=A,l.fulfill=B,l.master=D,l.spread=E,p.prototype.spread=function(a,b){return this.all().then(function(b){return a.apply(void 0,b)},b)},l.async=F,l.spawn=G,l["return"]=H,l.promised=I,l.dispatch=J,p.prototype.dispatch=function(a,b){var c=this,d=m();return l.nextTick(function(){c.promiseDispatch(d.resolve,a,b)}),d.promise},l.get=function(a,b){return l(a).dispatch("get",[b])},p.prototype.get=function(a){return this.dispatch("get",[a])},l.set=function(a,b,c){return l(a).dispatch("set",[b,c])},p.prototype.set=function(a,b){return this.dispatch("set",[a,b])},l.del=l["delete"]=function(a,b){return l(a).dispatch("delete",[b])},p.prototype.del=p.prototype["delete"]=function(a){return this.dispatch("delete",[a])},l.mapply=l.post=function(a,b,c){return l(a).dispatch("post",[b,c])},p.prototype.mapply=p.prototype.post=function(a,b){return this.dispatch("post",[a,b])},l.send=l.mcall=l.invoke=function(a,b){return l(a).dispatch("post",[b,Y(arguments,2)])},p.prototype.send=p.prototype.mcall=p.prototype.invoke=function(a){return this.dispatch("post",[a,Y(arguments,1)])},l.fapply=function(a,b){return l(a).dispatch("apply",[void 0,b])},p.prototype.fapply=function(a){return this.dispatch("apply",[void 0,a])},l["try"]=l.fcall=function(a){return l(a).dispatch("apply",[void 0,Y(arguments,1)])},p.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},l.fbind=function(a){var b=l(a),c=Y(arguments,1);return function(){return b.dispatch("apply",[this,c.concat(Y(arguments))])}},p.prototype.fbind=function(){var a=this,b=Y(arguments);return function(){return a.dispatch("apply",[this,b.concat(Y(arguments))])}},l.keys=function(a){return l(a).dispatch("keys",[])},p.prototype.keys=function(){return this.dispatch("keys",[])},l.all=K,p.prototype.all=function(){return K(this)},l.any=L,p.prototype.any=function(){return L(this)},l.allResolved=k(M,"allResolved","allSettled"),p.prototype.allResolved=function(){return M(this)},l.allSettled=N,p.prototype.allSettled=function(){return this.then(function(a){return K(_(a,function(a){function b(){return a.inspect()}return a=l(a),a.then(b,b)}))})},l.fail=l["catch"]=function(a,b){return l(a).then(void 0,b)},p.prototype.fail=p.prototype["catch"]=function(a){return this.then(void 0,a)},l.progress=O,p.prototype.progress=function(a){return this.then(void 0,void 0,a)},l.fin=l["finally"]=function(a,b){return l(a)["finally"](b)},p.prototype.fin=p.prototype["finally"]=function(a){return a=l(a),this.then(function(b){return a.fcall().then(function(){return b})},function(b){return a.fcall().then(function(){throw b})})},l.done=function(a,b,c,d){return l(a).done(b,c,d)},p.prototype.done=function(b,c,d){var f=function(a){l.nextTick(function(){if(e(a,g),!l.onerror)throw a;l.onerror(a)})},g=b||c||d?this.then(b,c,d):this;"object"==typeof a&&a&&a.domain&&(f=a.domain.bind(f)),g.then(void 0,f)},l.timeout=function(a,b,c){return l(a).timeout(b,c)},p.prototype.timeout=function(a,b){var c=m(),d=setTimeout(function(){b&&"string"!=typeof b||(b=new Error(b||"Timed out after "+a+" ms"),b.code="ETIMEDOUT"),c.reject(b)},a);return this.then(function(a){clearTimeout(d),c.resolve(a)},function(a){clearTimeout(d),c.reject(a)},c.notify),c.promise},l.delay=function(a,b){return void 0===b&&(b=a,a=void 0),l(a).delay(b)},p.prototype.delay=function(a){return this.then(function(b){var c=m();return setTimeout(function(){c.resolve(b)},a),c.promise})},l.nfapply=function(a,b){return l(a).nfapply(b)},p.prototype.nfapply=function(a){var b=m(),c=Y(a);return c.push(b.makeNodeResolver()),this.fapply(c).fail(b.reject),b.promise},l.nfcall=function(a){var b=Y(arguments,1);return l(a).nfapply(b)},p.prototype.nfcall=function(){var a=Y(arguments),b=m();return a.push(b.makeNodeResolver()),this.fapply(a).fail(b.reject),b.promise},l.nfbind=l.denodeify=function(a){var b=Y(arguments,1);return function(){var c=b.concat(Y(arguments)),d=m();return c.push(d.makeNodeResolver()),l(a).fapply(c).fail(d.reject),d.promise}},p.prototype.nfbind=p.prototype.denodeify=function(){var a=Y(arguments);return a.unshift(this),l.denodeify.apply(void 0,a)},l.nbind=function(a,b){var c=Y(arguments,2);return function(){function d(){return a.apply(b,arguments)}var e=c.concat(Y(arguments)),f=m();return e.push(f.makeNodeResolver()),l(d).fapply(e).fail(f.reject),f.promise}},p.prototype.nbind=function(){var a=Y(arguments,0);return a.unshift(this),l.nbind.apply(void 0,a)},l.nmapply=l.npost=function(a,b,c){return l(a).npost(b,c)},p.prototype.nmapply=p.prototype.npost=function(a,b){var c=Y(b||[]),d=m();return c.push(d.makeNodeResolver()),this.dispatch("post",[a,c]).fail(d.reject),d.promise},l.nsend=l.nmcall=l.ninvoke=function(a,b){var c=Y(arguments,2),d=m();return c.push(d.makeNodeResolver()),l(a).dispatch("post",[b,c]).fail(d.reject),d.promise},p.prototype.nsend=p.prototype.nmcall=p.prototype.ninvoke=function(a){var b=Y(arguments,1),c=m();return b.push(c.makeNodeResolver()),this.dispatch("post",[a,b]).fail(c.reject),c.promise},l.nodeify=P,p.prototype.nodeify=function(a){return a?void this.then(function(b){l.nextTick(function(){a(null,b)})},function(b){l.nextTick(function(){a(b)})}):this};var ib=j();return l})}).call(this,a("_process"))},{_process:1}],3:[function(a,b){b.exports={DELIVERY:"DELIVERY",SEAT:"SEAT",PICKUP:"PICKUP",BOOKING:"BOOKING"}},{}],4:[function(a,b){b.exports={CASH:"CASH",CARD:"CARD"}},{}],5:[function(a,b){b.exports={TIME:"TIME"}},{}],6:[function(a,b,c){!function(a,d){"function"==typeof define&&define.amd?define(d):"object"==typeof c?b.exports=d:a.atomic=d(a)}(this,function(b){function c(a){var b=function(a){for(var c in a)if(a.hasOwnProperty(c))if("$"===c.charAt(0))a[c]=void 0;else if(null!=a[c])if(a[c]instanceof Object)b(a[c]);else if(a[c].constructor==Array)for(var d=0;d<a[c].length;d++)b(a[c][d])},c=a.send;a.send=function(a){for(var d in e)e.hasOwnProperty(d)&&this.setRequestHeader(d,e[d]);a instanceof Object&&(a=f.clone(a),b(a)),c.call(this,JSON.stringify(a))}}var d={},e={},f=a("../services/util"),g=function(a){var b;try{b=JSON.parse(a.responseText)}catch(c){b=a.responseText}return[b,a]},h=function(a,d,e){var f={success:function(){},error:function(){}},h=b.XMLHttpRequest||ActiveXObject,i=new h("MSXML2.XMLHTTP.3.0");return c(i),i.open(a,d,!0),i.setRequestHeader("Content-type","application/json"),i.onreadystatechange=function(){4===i.readyState&&(i.status<300?f.success.apply(f,g(i)):f.error.apply(f,g(i)))},i.send(e),{success:function(a){return f.success=a,this},error:function(a){return f.error=a,this}}};return d.get=function(a){return h("GET",a)},d.put=function(a,b){return h("PUT",a,b)},d.patch=function(a,b){return h("PATCH",a,b)},d.post=function(a,b){return h("POST",a,b)},d["delete"]=function(a){return h("DELETE",a)},d.headers=function(a,b){return b?e[a]=b:a instanceof Object&&(e=a),e},d})},{"../services/util":33}],7:[function(a,b){(function(){var a,c,d,e,f,g={}.hasOwnProperty,h=function(a,b){function c(){this.constructor=a}for(var d in b)g.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},i=this;for(this.Stripe=function(){function a(){}return a.version=2,a.endpoint="https://api.stripe.com/v1",a.setPublishableKey=function(b){a.key=b},a.complete=function(b){return function(c){var d;return"success"!==c?(d=Math.round((new Date).getTime()/1e3),(new Image).src="https://q.stripe.com?event=stripejs-error&type="+c+"&key="+a.key+"&timestamp="+d,"function"==typeof b?b(500,{error:{code:c,type:c,message:"An unexpected error has occurred submitting your credit\ncard to our secure credit card processor. This may be\ndue to network connectivity issues, so you should try\nagain (you won't be charged twice). If this problem\npersists, please let us know!"}}):void 0):void 0}},a}.call(this),a=this.Stripe,this.Stripe.token=function(){function b(){}return b.validate=function(a,b){if(!a)throw b+" required";if("object"!=typeof a)throw b+" invalid"},b.formatData=function(b,c){return a.utils.isElement(b)&&(b=a.utils.paramsFromForm(b,c)),a.utils.underscoreKeys(b),b},b.create=function(b,c){return b.key||(b.key=a.key||a.publishableKey),a.utils.validateKey(b.key),a.ajaxJSONP({url:""+a.endpoint+"/tokens",data:b,method:"POST",success:function(a,b){return"function"==typeof c?c(b,a):void 0},complete:a.complete(c),timeout:4e4})},b.get=function(b,c){if(!b)throw"token required";return a.utils.validateKey(a.key),a.ajaxJSONP({url:""+a.endpoint+"/tokens/"+b,data:{key:a.key},success:function(a,b){return"function"==typeof c?c(b,a):void 0},complete:a.complete(c),timeout:4e4})},b}.call(this),this.Stripe.card=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return h(c,b),c.tokenName="card",c.whitelistedAttrs=["number","cvc","exp_month","exp_year","name","address_line1","address_line2","address_city","address_state","address_zip","address_country"],c.createToken=function(b,d,e){var f;return null==d&&(d={}),a.token.validate(b,"card"),"function"==typeof d?(e=d,d={}):"object"!=typeof d&&(f=parseInt(d,10),d={},f>0&&(d.amount=f)),d[c.tokenName]=a.token.formatData(b,c.whitelistedAttrs),a.token.create(d,e)},c.getToken=function(b,c){return a.token.get(b,c)},c.validateCardNumber=function(a){return a=(a+"").replace(/\s+|-/g,""),a.length>=10&&a.length<=16&&c.luhnCheck(a)},c.validateCVC=function(b){return b=a.utils.trim(b),/^\d+$/.test(b)&&b.length>=3&&b.length<=4},c.validateExpiry=function(b,c){var d,e;return b=a.utils.trim(b),c=a.utils.trim(c),/^\d+$/.test(b)&&/^\d+$/.test(c)&&parseInt(b,10)<=12?(e=new Date(c,b),d=new Date,e.setMonth(e.getMonth()-1),e.setMonth(e.getMonth()+1,1),e>d):!1},c.luhnCheck=function(a){var b,c,d,e,f,g;for(d=!0,e=0,c=(a+"").split("").reverse(),f=0,g=c.length;g>f;f++)b=c[f],b=parseInt(b,10),(d=!d)&&(b*=2),b>9&&(b-=9),e+=b;return e%10===0},c.cardType=function(a){return c.cardTypes[a.slice(0,2)]||"Unknown"},c.cardTypes=function(){var a,b,c,d;for(b={},a=c=40;49>=c;a=++c)b[a]="Visa";for(a=d=50;59>=d;a=++d)b[a]="MasterCard";return b[34]=b[37]="American Express",b[60]=b[62]=b[64]=b[65]="Discover",b[35]="JCB",b[30]=b[36]=b[38]=b[39]="Diners Club",b}(),c}.call(this,this.Stripe.token),this.Stripe.bankAccount=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return h(c,b),c.tokenName="bank_account",c.whitelistedAttrs=["country","routing_number","account_number"],c.createToken=function(b,d,e){return null==d&&(d={}),a.token.validate(b,"bank account"),"function"==typeof d&&(e=d,d={}),d[c.tokenName]=a.token.formatData(b,c.whitelistedAttrs),a.token.create(d,e)},c.getToken=function(b,c){return a.token.get(b,c)},c.validateRoutingNumber=function(b,d){switch(b=a.utils.trim(b),d){case"US":return/^\d+$/.test(b)&&9===b.length&&c.routingChecksum(b);case"CA":return/\d{5}\-\d{3}/.test(b)&&9===b.length;default:return!0}},c.validateAccountNumber=function(b,c){switch(b=a.utils.trim(b),c){case"US":return/^\d+$/.test(b)&&b.length>=1&&b.length<=17;default:return!0}},c.routingChecksum=function(a){var b,c,d,e,f,g;for(d=0,b=(a+"").split(""),g=[0,3,6],e=0,f=g.length;f>e;e++)c=g[e],d+=3*parseInt(b[c]),d+=7*parseInt(b[c+1]),d+=parseInt(b[c+2]);return 0!==d&&d%10===0},c}.call(this,this.Stripe.token),c=["createToken","getToken","cardType","validateExpiry","validateCVC","validateCardNumber"],e=0,f=c.length;f>e;e++)d=c[e],this.Stripe[d]=this.Stripe.card[d];"undefined"!=typeof b&&null!==b&&(b.exports=this.Stripe),"function"==typeof define&&define("stripe",[],function(){return i.Stripe})}).call(this),function(){var a,b,c,d=[].slice;a=encodeURIComponent,b=(new Date).getTime(),c=function(b,d,e){var f,g;null==d&&(d=[]);for(f in b)g=b[f],e&&(f=""+e+"["+f+"]"),"object"==typeof g?c(g,d,f):d.push(""+f+"="+a(g));return d.join("&").replace(/%20/g,"+")},this.Stripe.ajaxJSONP=function(a){var e,f,g,h,i,j;return null==a&&(a={}),g="sjsonp"+ ++b,i=document.createElement("script"),f=null,e=function(b){var c;return null==b&&(b="abort"),clearTimeout(f),null!=(c=i.parentNode)&&c.removeChild(i),g in window&&(window[g]=function(){}),"function"==typeof a.complete?a.complete(b,j,a):void 0},j={abort:e},i.onerror=function(){return j.abort(),"function"==typeof a.error?a.error(j,a):void 0},window[g]=function(){var b;b=1<=arguments.length?d.call(arguments,0):[],clearTimeout(f),i.parentNode.removeChild(i);try{delete window[g]}catch(c){window[g]=void 0}return"function"==typeof a.success&&a.success.apply(a,b),"function"==typeof a.complete?a.complete("success",j,a):void 0},a.data||(a.data={}),a.data.callback=g,a.method&&(a.data._method=a.method),i.src=a.url+"?"+c(a.data),h=document.getElementsByTagName("head")[0],h.appendChild(i),a.timeout>0&&(f=setTimeout(function(){return j.abort("timeout")},a.timeout)),j}}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};this.Stripe.utils=function(){function b(){}return b.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")},b.underscore=function(a){return(a+"").replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()}).replace(/-/g,"_")},b.underscoreKeys=function(a){var b,c,d;d=[];for(b in a)c=a[b],delete a[b],d.push(a[this.underscore(b)]=c);return d},b.isElement=function(a){return"object"!=typeof a?!1:"undefined"!=typeof jQuery&&null!==jQuery&&a instanceof jQuery?!0:1===a.nodeType},b.paramsFromForm=function(b,c){var d,e,f,g,h,i,j,k,l,m;for(null==c&&(c=[]),"undefined"!=typeof jQuery&&null!==jQuery&&b instanceof jQuery&&(b=b[0]),f=b.getElementsByTagName("input"),h=b.getElementsByTagName("select"),i={},j=0,l=f.length;l>j;j++)e=f[j],d=this.underscore(e.getAttribute("data-stripe")),a.call(c,d)<0||(i[d]=e.value);for(k=0,m=h.length;m>k;k++)g=h[k],d=this.underscore(g.getAttribute("data-stripe")),a.call(c,d)<0||null!=g.selectedIndex&&(i[d]=g.options[g.selectedIndex].value);return i},b.validateKey=function(a){if(!a||"string"!=typeof a)throw new Error("You did not set a valid publishable key. Call Stripe.setPublishableKey() with your publishable key. For more info, see https://stripe.com/docs/stripe.js");if(/\s/g.test(a))throw new Error("Your key is invalid, as it contains whitespace. For more info, see https://stripe.com/docs/stripe.js");if(/^sk_/.test(a))throw new Error("You are using a secret key with Stripe.js, instead of the publishable one. For more info, see https://stripe.com/docs/stripe.js")},b}()}.call(this),function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};this.Stripe.validator={"boolean":function(a,b){return"true"!==b&&"false"!==b?"Enter a boolean string (true or false)":void 0},integer:function(a,b){return/^\d+$/.test(b)?void 0:"Enter an integer"},positive:function(a,b){return!this.integer(a,b)&&parseInt(b,10)>0?void 0:"Enter a positive value"},range:function(b,c){var d;return d=parseInt(c,10),a.call(b,d)<0?"Needs to be between "+b[0]+" and "+b[b.length-1]:void 0},required:function(a,b){return!a||null!=b&&""!==b?void 0:"Required"},year:function(a,b){return/^\d{4}$/.test(b)?void 0:"Enter a 4-digit year"},birthYear:function(a,b){var c;return c=this.year(a,b),c?c:parseInt(b,10)>2e3?"You must be over 18":parseInt(b,10)<1900?"Enter your birth year":void 0},month:function(a,b){return this.integer(a,b)?"Please enter a month":this.range([1,2,3,4,5,6,7,8,9,10,11,12],b)?"Needs to be between 1 and 12":void 0},choices:function(b,c){return a.call(b,c)<0?"Not an acceptable value for this field":void 0},email:function(a,b){return/^[^@<\s>]+@[^@<\s>]+$/.test(b)?void 0:"That doesn't look like an email address"},url:function(a,b){return/^https?:\/\/.+\..+/.test(b)?void 0:"Not a valid url"},usTaxID:function(a,b){return/^\d{2}-?\d{1}-?\d{2}-?\d{4}$/.test(b)?void 0:"Not a valid tax ID"},ein:function(a,b){return/^\d{2}-?\d{7}$/.test(b)?void 0:"Not a valid EIN"},ssnLast4:function(a,b){return/^\d{4}$/.test(b)?void 0:"Not a valid last 4 digits for an SSN"},ownerPersonalID:function(a,b){var c;return c=function(){switch(a){case"CA":return/^\d{3}-?\d{3}-?\d{3}$/.test(b);case"US":return!0}}(),c?void 0:"Not a valid ID"},bizTaxID:function(a,b){var c,d,e,f,g,h,i,j;if(h={CA:["Tax ID",[/^\d{9}$/]],US:["EIN",[/^\d{2}-?\d{7}$/]]},g=h[a],null!=g){for(c=g[0],f=g[1],d=!1,i=0,j=f.length;j>i;i++)if(e=f[i],e.test(b)){d=!0;break}if(!d)return"Not a valid "+c}},zip:function(a,b){var c;return c=function(){switch(a.toUpperCase()){case"CA":return/^[\d\w]{6}$/.test(null!=b?b.replace(/\s+/g,""):void 0);case"US":return/^\d{5}$/.test(b)||/^\d{9}$/.test(b)}}(),c?void 0:"Not a valid zip"},bankAccountNumber:function(a,b){return/^\d{1,17}$/.test(b)?void 0:"Invalid bank account number"},usRoutingNumber:function(a){var b,c,d,e,f,g,h;if(!/^\d{9}$/.test(a))return"Routing number must have 9 digits";for(f=0,b=g=0,h=a.length-1;h>=g;b=g+=3)c=3*parseInt(a.charAt(b),10),d=7*parseInt(a.charAt(b+1),10),e=parseInt(a.charAt(b+2),10),f+=c+d+e;return 0===f||f%10!==0?"Invalid routing number":void 0},caRoutingNumber:function(a){return/^\d{5}\-\d{3}$/.test(a)?void 0:"Invalid transit number"},routingNumber:function(a,b){switch(a.toUpperCase()){case"CA":return this.caRoutingNumber(b);case"US":return this.usRoutingNumber(b)}},phoneNumber:function(a,b){var c;return c=b.replace(/[^0-9]/g,""),10!==c.length?"Invalid phone number":void 0},bizDBA:function(a,b){return/^.{1,23}$/.test(b)?void 0:"Statement descriptors can only have up to 23 characters"},nameLength:function(a,b){return 1===b.length?"Names need to be longer than one character":void 0}}}.call(this)},{}],8:[function(a,b){function c(a){a&&g.extend(this,a)}function d(a){var b=this;return a&&(b=a),[b.address1,b.address2,b.address3,b.city,b.county].join(", ")}var e=a("../../node_modules/q/q"),f=(a("../lib/stripe.min"),a("../services/api")),g=a("../services/util"),h=a("./user"),i=a("./venue");c.prototype.getAll=function(){if(!h.isLogged())return e.reject({message:"User not logged"});var a=h.getCurrent(),b=e.defer();return f.get("users/"+a.id+"/addresses").then(function(d){a.addresses=d.map(function(a){return new c(a)}),b.resolve(a.addresses)},function(a){b.reject(a)}),b.promise},c.prototype.save=function(a){if(!h.isLogged())return e.reject({message:"User not logged"});if(!i.getCurrent())return e.reject({message:"Venue not logged"});if(!(a instanceof Object))return e.reject({message:"Incorrect addresses parameter"});a.country=a.country||"UK";var b=e.defer(),d=h.getCurrent();return g.extend(a,{userId:d.id}),f.post("users/"+d.id+"/addresses",a).then(function(a){var e=new c(a);d.addresses.push(e),b.resolve(e)},function(a){b.reject(a)}),b.promise},c.prototype.update=function(a){if(!h.isLogged())return e.reject({message:"User not logged"});if(!i.getCurrent())return e.reject({message:"Venue not logged"});if(!(a instanceof Object&&a.id))return e.reject({message:"Incorrect address parameter"});var b=e.defer(),d=h.getCurrent();return g.extend(a,{userId:d.id}),f.put("users/"+d.id+"/addresses/"+a.id,a).then(function(a){var e=new c(a);d.updateAddress(e),b.resolve(e)},function(a){b.reject(a)}),b.promise},c.prototype["delete"]=function(a){if(!h.isLogged())return e.reject({message:"User not logged"});if(!(a instanceof Object&&a.id))return e.reject({message:"Incorrect address parameter"});var b=e.defer(),c=h.getCurrent();return f["delete"]("users/"+c.id+"/addresses/"+a.id).then(function(){h.getCurrent().removeAddress(a),b.resolve()},function(a){b.reject(a)}),b.promise},c.prototype.stringify=d,c.stringify=d,b.exports=c},{"../../node_modules/q/q":2,"../lib/stripe.min":7,"../services/api":31,"../services/util":33,"./user":28,"./venue":29}],9:[function(a,b){function c(){S={total:0}}function d(){Q={i:[],n:null},c()}function e(a){var b=J.getCurrent();if(console.log("menu here",b,a),!b)return null;var c=b.sections.filter(function(b){return b.id===a});return console.log("section here",c),c.length?c[0]:null}function f(){for(var a={},b=0,c=Q.i.length;c>b;b++){var d=Q.i[b],f=d.$sectionId;a[f]||(a[f]={section:e(f),items:[]}),a[f].items.push(Q.i[b])}return a}function g(a){var b=R.filter(function(b){return b.id===a});return b.length?b[0]:e(a)}function h(a){var b=e(a.sectionId);b&&R.push(b)}function i(a){for(var b=0,c=Q.i.filter(function(b){return b.$sectionId===a}),d=c.length-1;d>=0;d--)b+=+c[d].q;return b}function j(a){var b=g(a);if(b){var c=i(a);return{total:c,section:b}}return null}function k(a,b,c,d,e){return d||0===d||(d=0),!a.max||a.max*e>=b-d+c?!0:!1}function l(a){console.log("adding item .... ",a,G),c();var b=n(a);b?b.increment(a.item.quantity||1):(h(a.item),Q.i.push(new G({item:a.item,modifiers:a.modifiers,mealDeals:a.mealDeals})))}function m(a){console.log("updating item .... ",a,G),c();var b=Q.i.filter(function(b){return b.$_id===a.item.$_id})[0];F.extend(b,new G({item:a.item,modifiers:a.modifiers,mealDeals:a.mealDeals}))}function n(a){var b=Q.i.filter(function(b){return b.i===a.item.id}),c="",d="";a.item.isMealDeal()?(c="mealDeals",d="md"):(d="m",c="modifiers");
var e=null;if(b.length)if(a[c]&&a[c].length)for(var f=a[c].map(function(a){return a instanceof H?a.i:a.id}),g=0,h=b.length;h>g;g++){var i=b[g][d].filter(function(a){return-1!==f.indexOf(a.i)});if(i.length&&i.length===f.length){e=b[g];break}}else for(var g=0,h=b.length;h>g;g++)if(!b[g][d].length){e=b[g];break}return e||!1}function o(a){var b=n(a);return b?(c(),Q.i.splice(Q.i.indexOf(b),1),D.resolve()):D.reject({message:"Item not found"})}function p(){for(;Q.i.length>0;)Q.i.pop();c()}function q(){return S&&S.total?S.total:r()}function r(){for(var a=0,b=0,c=Q.i.length;c>b;b++)a+=+Q.i[b].getPrice();return a.toFixed(2)}function s(a){for(var b=0,c=Q.i.length-1;c>=0;c--)b=Math.max(b,Q.i[c].leadTime||a);return b}function t(a){for(var b=Date.now(),c=Date.now(),d=Q.i.length-1;d>=0;d--){var e=Q.i[d],f=e.leadDays,g=e.leadDaysTime||0;if(f>0){var h=new Date,i=h.getDay()+1,j=L.getCloseTime(a,i);if(j){var k=j.split(":");h.setHours(k[0],k[1],0,0),h.setMinutes(h.getMinutes()-g),c>h.getTime()&&(j=!1)}if(!j)for(d=0;7>d&&(h.setDate(h.getDate()+1),!(j=L.getCloseTime(a,h.getDay()+1)));d++);h.setDate(h.getDate()+f),h.setHours(0,0,0,0),b=Math.max(b,h.getTime())}}return b}function u(a){var b=I.getCurrent();if(!b)return D.reject({message:"Venue not found"});a=a||{},b.isDelivery()&&a.orderType||(a.orderType=P.PICKUP);var c="";a.expand&&(c="?expand="+a.expand);var d=D.defer();return E.post("orders/basket"+c,{v:b.id,ot:a.orderType,i:Q.i,e:a.eventId||void 0,pt:a.pickupTime||void 0}).then(function(a){S=a,S.availableSlots=S.availableSlots.map(function(a){return new N(a)}),d.resolve(a)},function(a){d.reject(a)}),d.promise}function v(){return S?S.fees:[]}function w(){return S?S.discounts:[]}function x(){return S?S.availableSlots:[]}function y(){var a=I.getCurrent();if(!a)return{};var b=a.settings||{},c=q(),d=c-(S.fee||0),e=b.deliveryOrderMin||0,f=b.orderMin||0,g={total:c||0,deliveryCharge:b.deliveryCharge||0,deliveryOrderMin:e,deliveryDifference:Math.max(0,e-d),orderMin:f,orderDifference:Math.max(0,f-d)};return g}function z(){return S}function A(a){if(!(a instanceof Object))return D.reject({message:"Invalid parameter. Expected Object"});var b=null,c=null,d=null,e=null,f=function(a){return[a.getFullYear(),a.getMonth()+1,a.getDate()].join("-")+"T"+[a.getHours(),a.getMinutes(),"00"].join(":")+".000"};a.deliveryState?(b=M.stringify(a.address),c=a.address.postcode,I.getCurrent().isDelivery()&&!a.orderType&&(a.orderType=P.DELIVERY)):(b=a.deliveryAddress,a.orderType||(a.orderType=a.outletLocation&&a.outletLocation.toSeatFlag?P.SEAT:a.bookingRef?P.BOOKING:P.PICKUP));var g=null,h=null;if(a.event){var i=F.getLocalDate(a.event.date),j=a.event.schedules?i:null;if(g=a.pickupSlot,null!==j){if(a.pickupTime){var k=a.pickupTime.split(":");j.setHours(k[0]),j.setMinutes(k[1])}d=f(j)}e=a.event.id,h=a.event.date}else d=a.pickupSlot&&a.pickupTime?a.pickupSlot+"T"+a.pickupTime+":00.000":a.pickupTime;a.paymentType===O.CASH&&(a.paymentMethod=null);var l={o:a.outletId,ot:a.orderType,da:b,dp:c,i:Q.i,t:q(),pm:a.paymentMethod,n:a.notes,ptype:a.paymentType};return d&&(l.pt=d),g&&(l.ps=g),e&&(l.e=e),h&&(l.et=h),a.bookingRef&&(l.b=a.bookingRef),K.save(l)}function B(a){return K.updateBookingOrder(a,{i:Q.i,t:q(),ot:P.BOOKING})}function C(){d()}var D=a("../../node_modules/q/q"),E=a("../services/api"),F=a("../services/util"),G=a("./basketItem"),H=a("./basketModifierItem"),I=a("./venue"),J=a("./menu"),K=a("./order"),L=(a("./user"),a("./hour")),M=a("./addresses"),N=a("./pickupSlot"),O=a("../constants/paymentMethods"),P=a("../constants/orderType"),Q={},R=[],S=null;d(),b.exports={addItem:l,isAvailableAddItemInSectionPerPeople:k,getSectionAndTotalItems:j,updateItem:m,removeItem:o,removeAll:p,total:q,totalCore:r,getSlots:x,getCostDetails:y,getDiscounts:w,getFees:v,getOrderDetail:z,maxLeadTime:s,maxPickupTime:t,checkDiscount:u,processOrder:A,updateBookingOrder:B,clear:C,getItems:function(){return Q.i},getItemsGroupBySection:f}},{"../../node_modules/q/q":2,"../constants/orderType":3,"../constants/paymentMethods":4,"../services/api":31,"../services/util":33,"./addresses":8,"./basketItem":10,"./basketModifierItem":11,"./hour":15,"./menu":18,"./order":21,"./pickupSlot":26,"./user":28,"./venue":29}],10:[function(a,b){function c(a){a.item&&e.call(this,a)}function d(){var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}function e(a){var b=a.item;this.i=b.id,this.plu=b.plu,this.n=b.name,this.p=b.price,this.q=b.quantity||b.qty||1,this.nt=b.notes,this.m=[],this.md=[],this.$sectionId=b.sectionId,this.$_id=d(),console.log("id generated ",this.$_id),a.modifiers&&a.modifiers.length&&f.call(this,a.modifiers),a.mealDeals&&a.mealDeals.length&&g.call(this,a.mealDeals)}function f(a){for(var b=0,c=a.length;c>b;b++)this.m.push(new j(a[b]))}function g(a){for(var b=0,d=a.length;d>b;b++)this.md.push(new c({item:a[b]}))}function h(){for(var a=0,b=this.m.length-1;b>=0;b--)a+=+this.m[b].p||0;return a}function i(){for(var a=0,b=this.md.length-1;b>=0;b--)a+=+this.md[b].p||0;return a}var j=a("./basketModifierItem");c.prototype.increment=function(a){this.q+=a},c.prototype.decrement=function(){this.q&&--this.q},c.prototype.getPrice=function(){var a=0;return this.m&&this.m.length&&(a+=h.call(this)),this.md&&this.md.length&&(a+=i.call(this)),((+a+ +this.p)*+this.q).toFixed(2)},b.exports=c},{"./basketModifierItem":11}],11:[function(a,b){function c(a){a&&d.call(this,a)}function d(a){this.i=a.id,this.n=a.name,this.p=a.price}b.exports=c},{}],12:[function(a,b){function c(a){a&&(g.extend(this,a),d.call(this))}function d(){this.orders&&this.orders.length&&(this.orders=this.orders.map(function(a){return new i(a)}))}var e=a("../../node_modules/q/q"),f=a("../services/api"),g=a("../services/util"),h=a("./menu"),i=a("./order");c.prototype.getBookings=function(a){if(!a||!a.venueId&&!a.permalink)return e.reject({message:"Venue identifier is required"});var b=e.defer(),d=a?g.serialize(a):"";return f.get("bookings?"+d).then(function(a){a=a.map(function(a){return new c(a)}),b.resolve(a)},function(a){b.reject(a)}),b.promise},c.prototype.getMenu=function(){var a=e.defer();return h.prototype.get({promotionId:this.promotionId}).then(function(b){b&&b.length?a.resolve(b[0]):a.resolve()},function(b){a.reject(b)}),a.promise},c.prototype.validate=function(a,b,d){if(!d)return e.reject({message:"Invalid parameters"});if(!d.venueId&&!d.permalink)return e.reject({message:"Venue identifier is required"});if(!a)return e.reject({message:"Booking reference is required"});if(!b)return e.reject({message:"Organiser last name is required"});d.expand="orders";var h=e.defer(),i=d?g.serialize(d):"";return f.post("bookings/"+a+"/validate/"+b+"?"+i).then(function(a){h.resolve(new c(a))},function(a){h.reject(a)}),h.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./menu":18,"./order":21}],13:[function(a,b){function c(a){a&&f.extend(this,a)}var d=a("../../node_modules/q/q"),e=a("../services/api"),f=a("../services/util");c.prototype.getSettings=function(a){if(!a||!a.venueId)return d.reject({message:"Venue identifier is required"});var b=d.defer(),f=a.venueId;return e.get("venues/"+f+"/booking-settings").then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},c.prototype.updateSettings=function(a){if(!a||!a.venueId)return d.reject({message:"Venue identifier is required"});if(!a||!a.settings)return d.reject({message:"Settings data cannot be null"});var b=d.defer(),f=a.venueId,g=a.settings;return e.put("venues/"+f+"/booking-settings",g).then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},c.prototype.saveSettings=function(a){if(!a||!a.venueId)return d.reject({message:"Venue identifier is required"});if(!a||!a.settings)return d.reject({message:"Settings data cannot be null"});var b=d.defer(),f=a.venueId,g=a.settings;return e.post("venues/"+f+"/booking-settings",g).then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33}],14:[function(a,b){function c(a){a&&f.extend(this,a)}var d=a("../../node_modules/q/q"),e=a("../services/api"),f=a("../services/util"),g=a("./venue");c.prototype.getAll=function(a,b){var h=g.getCurrent(),i=a||h&&h.id,j=b?f.serialize(b):"";if(!i)return d.reject({message:"Venue not found"});var k=d.defer();return e.get("venues/"+i+"/events?"+j).then(function(a){var b=a.map(function(a){return new c(a)});k.resolve(b)},function(a){k.reject(a)}),k.promise},c.prototype.create=function(a,b){if(!b||!b.name)return d.reject({message:"Malformed data to save."});var f=d.defer();return e.post("venues/"+a+"/events",b).then(function(a){f.resolve(new c(a))},function(a){f.reject(a)}),f.promise},c.prototype.save=function(a){if(!a||!a.name)return d.reject({message:"Malformed data to update."});var b=d.defer(),f=this.id;return e.put("events/"+f,a).then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},c.prototype.remove=function(){if(!this.id)return d.reject({message:"Malformed event, did you run the constructor?"});var a=d.defer();return e["delete"]("events/"+this.id).then(function(b){a.resolve(b)},function(b){a.reject(b)}),a.promise},c.prototype.deleteSlots=function(){if(!this.id)return d.reject({message:"Malformed event, did you run the constructor?"});var a=d.defer();return e["delete"]("events/"+this.id+"/slots").then(function(b){a.resolve(b)},function(b){a.reject(b)}),a.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./venue":29}],15:[function(a,b){function c(a){a&&k.extend(this,a)}function d(a,b){return b=b||[g(a)],{name:e(a),value:f(a),slots:b}}function e(a){a=new Date(new Date(a).setHours(0,0,0,0));var b=new Date((new Date).setHours(0,0,0,0)),c=Math.abs(b.getTime()-a.getTime()),d=Math.ceil(c/864e5);return 0==d?"Today":1==d?"Tomorrow":a.toDateString()}function f(a){var a=[a.getFullYear(),k.pad(a.getMonth()+1),k.pad(a.getDate())].join("-");return a}function g(a){var a=[k.pad(a.getHours()),k.pad(a.getMinutes())].join(":");return a}function h(a,b){var d=l.getCurrent();return d.hours=b.map(function(a){return new c(a)}),i.resolve(b&&b instanceof Object&&b.groupBy?this.groupByDay(b):d.hours)}var i=a("../../node_modules/q/q"),j=a("../services/api"),k=a("../services/util"),l=a("./venue"),m=a("./basket"),n=30,o=15;c.prototype.getSlotTimes=function(a){if(!~["delivery","pickup"].indexOf(a))throw"Please ensure the type is either 'pickup' or 'delivery'.";var b=l.getCurrent();if(!b)throw"Venue not logged";var c=b.hours;if(c&&c.length){var d=b.settings,e=d&&d.collectInterval||o;if("pickup"==a)var f=d&&d.leadTime||n;else var f=d&&d.deliveryLeadTime||n;f=m.maxLeadTime(f);var g=m.maxPickupTime(c);return g=Math.max(g,Date.now()+60*f*1e3),this.getTimes(4,c,e,f,new Date(g),a)}},c.prototype.getTimes=function(a,b,c,e,f,g){if(!~["delivery","pickup"].indexOf(g))throw new Error("Please ensure the type is either 'pickup' or 'delivery'.");for(var h=[],i=new Date,j=i.getDay()+1,l=0;7>l;l++){for(var m=b.filter(function(a){return a.day===j}),n=[],o=0,p=m.length;p>o;o++){var q=m[o];if(q[g]){var r=new k.TimeRange(q.open,q.close);[].push.apply(n,r.getValues(c,e,0==l?f:!1))}}if(n.length>0&&h.push(d(i,n)),h.length==a)break;i.setDate(i.getDate()+1),j=j>6?1:j+1}return h},c.prototype.getAll=function(a){var b=l.getCurrent();if(!b)return i.reject({message:"Venue not found"});var c=i.defer();return j.get("venues/"+b.id+"/hours").then(function(b){h.apply(this,[a,b]).then(function(a){c.resolve(a)})},function(a){c.reject(a)}),c.promise},c.prototype.groupByDay=function(a){for(var b=[],c=0,d=0;7>d;d++){c=6>d?d+2:1;var e=a.filter(function(a){return a.day===c});b.push({day:d,hours:[]});for(var f=0,g=e.length;g>f;f++)b[d].hours.push({open:e[f].open.slice(0,5),close:e[f].close.slice(0,5)})}return b},c.getCloseTime=function(a,b){for(var a=a.filter(function(a){return a.day==b}),c=null,d=a.length-1;d>=0;d--){var e=a[d].close;null===c?c=e:e>c&&(c=e)}return c},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./basket":9,"./venue":29}],16:[function(a,b){function c(a){a&&(f.extend(this,a),d.call(this),this.mealDeal&&e.call(this))}function d(){this.modifiers=this.modifiers.map(function(a){return new g(a)})}function e(){this.mealDealSections=this.mealDealSections.map(function(a){return new h(a)})}var f=a("../services/util"),g=a("./modifier"),h=a("./mealDealSection");c.prototype.isMealDeal=function(){return 1===this.mealDeal},c.prototype.getFromPrice=function(){var a=this.price||0;for(var b in this.modifiers){var c=this.modifiers[b],d=1/0;if(c.minChoices>0){for(var e in c.items){var f=c.items[e].price||0;d>f&&(d=f)}1/0!==d&&(a+=d)}}return a},b.exports=c},{"../services/util":33,"./mealDealSection":17,"./modifier":19}],17:[function(a,b){function c(a){a&&d.extend(this,a)}var d=a("../services/util");b.exports=c},{"../services/util":33}],18:[function(a,b){function c(a){a&&(f.extend(this,a),d.call(this))}function d(){this.sections=this.sections.map(function(a){return new h(a)})}var e=a("../../node_modules/q/q"),f=a("../services/util"),g=a("../services/api"),h=a("./section"),i=null;c.getCurrent=function(){return i},c.prototype.get=function(a){var b=e.defer(),d="menus?expand=true";return a.outletId?d+="&outletId="+a.outletId:a.venueId?d+="&venueId="+a.venueId:a.promotionId&&(d+="&promotionId="+a.promotionId),a.type&&(d+="&type="+a.type),g.get(d).then(function(a){var d=a.map(function(a){return new c(a)});i=d.length?d[0]:null,b.resolve(d)},function(a){b.reject(a)}),b.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./section":27}],19:[function(a,b){function c(a){a&&(e.extend(this,a),d.call(this))}function d(){this.items=this.items.map(function(a){return new f(a)})}var e=a("../services/util"),f=a("./modifierItem");b.exports=c},{"../services/util":33,"./modifierItem":20}],20:[function(a,b){function c(a){a&&d.extend(this,a)}var d=a("../services/util");b.exports=c},{"../services/util":33}],21:[function(a,b){function c(a){a&&(j.extend(this,a),d.call(this))}function d(){this.items=this.items.map(function(a){return new l(a)})}function e(a,b){var c=h.defer();return a.status=b,a.update().then(function(){c.resolve()},function(){c.reject()}),c.promise}function f(b){var d=a("./venue"),e=k.getCurrent(),f=d.getCurrent();if(!k.isLogged())return h.reject({message:"User not logged"});if(!f)return h.reject({message:"Venue not logged"});var g=h.defer();return j.extend(b,{v:f.id,u:e.id,ph:e.phone}),i.post("orders",b).then(function(a){g.resolve(new c(a))},function(a){g.reject(a)}),g.promise}function g(b,d){var e=a("./venue"),f=k.getCurrent(),g=e.getCurrent();if(!b)return h.reject({message:"OrderId is required"});if(!k.isLogged())return h.reject({message:"User not logged"});if(!g)return h.reject({message:"Venue not logged"});var l=h.defer();return j.extend(d,{v:g.id,u:f.id,ph:f.phone}),i.put("orders/"+b+"/booking",d).then(function(a){l.resolve(new c(a))},function(a){l.reject(a)}),l.promise}var h=a("../../node_modules/q/q"),i=a("../services/api"),j=a("../services/util"),k=a("./user"),l=a("./orderItem");c.prototype.getOrdersByUser=function(){var b=a("./venue"),d=k.getCurrent(),e=b.getCurrent();if(!d)return h.reject({message:"User not logged"});if(!e)return h.reject({message:"Venue not logged"});var f=h.defer();return i.get("orders?userId="+d.id+"&venueId="+e.id).then(function(a){a=a.map(function(a){return new c(a)}),f.resolve(a)},function(a){f.reject(a)}),f.promise},c.prototype.get=function(a){if(!a)return h.reject({message:"Id is required"});var b=h.defer();return i.get("orders/"+a).then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},c.prototype.fetch=function(a){var b=h.defer(),d=j.serialize(a);return i.get("orders"+(d?"?"+d:null)).then(function(a){a=a.map(function(a){return new c(a)}),b.resolve(a)},function(a){b.reject(a)}),b.promise},c.prototype.read=function(a){var b=null;if(this.id)b=this.id;else{if(!a)return h.reject({message:"Id is required"});b=a}var c=h.defer(),d=this;return i.post("orders/"+b+"/read").then(function(){d.viewed=new Date,c.resolve()},function(a){c.reject(a)}),c.promise},c.prototype.charge=function(a){var b=null;if(this.id)b=this.id;else{if(!a)return h.reject({message:"Id is required"});b=a}var c=h.defer();return i.post("orders/"+b+"/charge").then(function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise},c.prototype.notify=function(a){if(!this.id)return h.reject({message:"Invalid order"});var b=h.defer();return i.post("orders/"+this.id+"/notify",{content:a}).then(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},c.prototype.reject=function(a){if(!this.id)return h.reject({message:"Invalid order"});var b=h.defer();return i.post("orders/"+this.id+"/reject",{content:a}).then(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},c.prototype.noShow=function(){return e(this,"NOSHOW")},c.prototype.complete=function(a){var b=null;return a?(b=new c,b.id=a):b=this,e(b,"COMPLETED")},c.prototype.preparing=function(){return e(this,"PREPARING")},c.prototype.ready=function(){return e(this,"READY")},c.prototype.delivering=function(){return e(this,"DELIVERING")},c.prototype.save=f,c.save=f,c.prototype.updateBookingOrder=g,c.updateBookingOrder=g,c.prototype.update=function(){k.getCurrent();if(!k.isLogged())return h.reject({message:"User not logged"});var a=h.defer();return i.put("orders/"+this.id,this).then(function(b){a.resolve(b)},function(b){a.reject(b)}),a.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./orderItem":22,"./user":28,"./venue":29}],22:[function(a,b){function c(a){a&&d.extend(this,a)}var d=a("../services/util");c.prototype.isMealDeal=function(){return this.mealDealItems.length>0},b.exports=c},{"../services/util":33}],23:[function(a,b){function c(a,b){a&&(h.extend(this,a),b&&b.length&&(j[a.id]=b.map(function(a){return new c(a,d(a.id))})))}function d(a){var b=k.filter(function(b){return b.id===a});if(b=b&&b.length&&b[0]||null,b&&b.seatStart&&b.seatEnd){for(var d=[],e=b.seatStart;e<=b.seatEnd;e++){var f=h.clone(b);f.id=b.id+"-"+e,f.name=e,d.push(new c(f))}return d}return k.filter(function(b){return b.parent===a})}function e(a,b){var e=i.getCurrent();k=a,j={};var f=null;f=b?d(b):a.filter(function(a){return!a.parent}),e.outlets=[];for(var g=0,h=f.length;h>g;g++)e.outlets.push(new c(f[g],d(f[g].id)))}var f=a("../../node_modules/q/q"),g=a("../services/api"),h=a("../services/util"),i=a("./venue"),j={},k=null;c.prototype.getAll=function(a){var b=i.getCurrent();if(!b)return f.reject({message:"Venue not found"});var c=f.defer(),d="venues/"+b.id+"/outletlocations",h=null;a instanceof Object&&a.outletLocationId&&(h=a.outletLocationId,d+="?root="+a.outletLocationId);var j=this;return g.get(d).then(function(a){e.call(j,a,h),c.resolve(b.outlets)},function(a){c.reject(a)}),c.promise},c.prototype.get=function(a){var b=f.defer(),d="outlets/"+a;return g.get(d).then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},c.prototype.getChildrens=function(){return j[this.id]},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./venue":29}],24:[function(a,b){function c(a){a&&g.extend(this,a)}var d=a("../../node_modules/q/q"),e=a("../lib/stripe.min"),f=a("../services/api"),g=a("../services/util"),h=a("../services/settings"),i=a("./user"),j=a("./venue");c.prototype.getAll=function(){if(!i.isLogged())return d.reject({message:"User not logged"});var a=i.getCurrent(),b=d.defer();return f.get("users/"+a.id+"/paymentmethods").then(function(d){a.paymentMethods=d.map(function(a){return new c(a)}),b.resolve(a.paymentMethods)},function(a){b.reject(a)}),b.promise},c.prototype.validate=function(a){var b=d.defer();return e.setPublishableKey(h.getSettings().stripeKey),e.createToken(a,function(a,c){c.error?b.reject({message:c.error.message}):b.resolve({token:c.id,name:c.card.name,type:c.card.type||c.card.brand,expMonth:c.card.exp_month,expYear:c.card.exp_year,number:c.card.last4})}),b.promise},c.prototype.save=function(a){if(!i.isLogged())return d.reject({message:"User not logged"});if(!j.getCurrent())return d.reject({message:"Venue not logged"});if(!(a instanceof Object))return d.reject({message:"Incorrect Payment Method parameter"});var b=d.defer(),e=i.getCurrent();return this.validate(a).then(function(a){angular.extend(a,{userId:e.id,venueId:j.getCurrent().id}),f.post("users/"+e.id+"/paymentmethods",a).then(function(a){var d=new c(a);e.paymentMethods.push(d),b.resolve(d)},function(a){b.reject(a)})},function(a){b.reject(a)}),b.promise},c.prototype["delete"]=function(a){if(!i.isLogged())return d.reject({message:"User not logged"});if(!(a instanceof Object&&a.id))return d.reject({message:"Incorrect Payment Method parameter"});var b=d.defer(),c=i.getCurrent();return f["delete"]("users/"+c.id+"/paymentmethods/"+a.id).then(function(){i.getCurrent().removePaymentMethod(a),b.resolve()},function(a){b.reject(a)}),b.promise},b.exports=c},{"../../node_modules/q/q":2,"../lib/stripe.min":7,"../services/api":31,"../services/settings":32,"../services/util":33,"./user":28,"./venue":29}],25:[function(a,b){function c(a){a&&f.extend(this,a)}var d=a("../../node_modules/q/q"),e=a("../services/api"),f=a("../services/util"),g=a("./venue");c.prototype.getPaymentProvidersByVenue=function(){var a=g.getCurrent();if(!a)return d.reject({message:"Venue not found"});var b=d.defer();return e.get("venues/"+a.id+"/paymentproviders").then(function(d){a.paymentProviders=d.map(function(a){return new c(a)}),b.resolve(a.paymentProviders)},function(a){b.reject(a)}),b.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./venue":29}],26:[function(a,b){function c(a){a&&(f.extend(this,a),this.slots&&(this.slots=this.slots.map(function(a){return new c(a)})))}var d=a("../../node_modules/q/q"),e=a("../services/api"),f=a("../services/util"),g=a("../constants/pickupSlotType");c.prototype.getAll=function(a){if(!a||!a.id)return d.reject({message:"Invalid event param"});var b=d.defer();return e.get("events/"+a.id+"/slots/slotConfig").then(function(a){var a=a.map(function(a){return new c(a)});b.resolve(a)},function(a){b.reject(a)}),b.promise},c.prototype.create=function(a){if(!a||!a.name||!a.eventId)return d.reject({message:"Malformed pickup slot, did you run the constructor?"});var b=d.defer();return e.post("events/"+a.eventId+"/slots",a).then(function(a){b.resolve(new c(a))},function(a){b.reject(a)}),b.promise},c.prototype.save=function(){if(void 0==this.id||void 0==this.eventId)return d.reject({message:"Malformed pickup slot, did you run the constructor?"});var a=d.defer();return e.put("events/"+this.eventId+"/slots/"+this.id,this).then(function(b){var b=b.map(function(a){return new c(a)});a.resolve(b)},function(b){a.reject(b)}),a.promise},c.prototype.remove=function(){this.id?"post":"put";if(!this.name||!this.eventId)return d.reject({message:"Malformed pickup slot, did you run the constructor?"});var a=d.defer();return this.id?e["delete"]("events/"+this.eventId+"/slots/"+this.id).then(function(b){var b=b.map(function(a){return new c(a)});a.resolve(b)},function(b){a.reject(b)}):a.resolve({message:"No slots to delete"}),a.promise},c.prototype.processSlotChild=function(){var a=[];for(var b in this.slots)if(this.slots[b].step&&this.slots[b].isTime())for(var d=new f.getLocalDate(this.slots[b].value||this.slots[b].name),e=0;e<=this.slots[b].repeat;e++)a.push(new c(f.extend(this.slots[b],{$timestamp:d.getTime()}))),d=f.addMinutes(d,this.slots[b].step);else a.push(this.slots[b]);return a},c.prototype.isTime=function(){return this.type===g.TIME},b.exports=c},{"../../node_modules/q/q":2,"../constants/pickupSlotType":5,"../services/api":31,"../services/util":33}],27:[function(a,b){function c(a){a&&(e.extend(this,a),d.call(this))}function d(){this.items=this.items.map(function(a){return new f(a)})}var e=a("../services/util"),f=a("./item");b.exports=c},{"../services/util":33,"./item":16}],28:[function(a,b){function c(a){a&&(j.extend(this,a),d.call(this),e.call(this))}function d(){if(this.addresses){var b=a("./addresses");this.addresses=this.addresses.map(function(a){return new b(a)})}else this.addresses=[]}function e(){if(this.paymentMethods){var b=a("./paymentMethod");this.paymentMethods=this.paymentMethods.map(function(a){return new b(a)})}else this.paymentMethods=[]}function f(){return k}function g(){return null!==k}var h=a("../../node_modules/q/q"),i=a("../services/api"),j=a("../services/util"),k=null;c.prototype.auth=function(a){if(!a)return h.reject({message:"Username and password is required"});if(!a.username)return h.reject({message:"Username is required"});if(!a.password)return h.reject({message:"Password is required"});var b=h.defer();return i.post("users/auth",{username:a.username,password:a.password}).then(function(a){k=new c(a),b.resolve(k)},function(a){b.reject(a)}),b.promise},c.prototype.forgotPassword=function(a){if(!a.email)return h.reject({message:"Email is required"});var b=h.defer();return i.post("users/auth/forgot",a).then(function(){b.resolve()},function(a){b.reject(a)}),b.promise},c.prototype.isAdmin=function(){var a=h.defer();return i.get("users/auth/roles/admin").then(function(){a.resolve()},function(b){a.reject(b)}),a.promise},c.prototype.save=function(a){if(c.isLogged())return h.reject({message:"User already logged"});if(!a.firstName)return h.reject({message:"First name is required"});if(!a.lastName)return h.reject({message:"Last name is required"});if(!a.email)return h.reject({message:"Email is required"});if(!a.password)return h.reject({message:"Password is required"});var b=h.defer();return i.post("users",a).then(function(a){k=new c(a),b.resolve(k)},function(a){b.reject(a)}),b.promise},c.prototype.update=function(a){if(!c.isLogged())return h.reject({message:"User not logged"});if(!a.firstName)return h.reject({message:"First name is required"});if(!a.lastName)return h.reject({message:"Last name is required"});if(!a.email)return h.reject({message:"Email is required"});var b=c.getCurrent(),d=h.defer();return i.patch("users/"+b.id,{firstName:a.firstName,lastName:a.lastName,email:a.email,phone:a.phone}).then(function(a){a.token=b.token,k=new c(a),d.resolve(k)},function(a){d.reject(a)}),d.promise},c.getCurrent=f,c.prototype.getCurrent=f,c.isLogged=g,c.prototype.isLogged=g,c.prototype.setUser=function(a){k=a},c.prototype.removePaymentMethod=function(a){var b=this.paymentMethods.map(function(a){return a.id}).indexOf(a.id);this.paymentMethods.splice(b,1)},c.prototype.updateAddress=function(a){var b=this.addresses.map(function(a){return a.id}).indexOf(a.id);this.addresses[b]=a},c.prototype.removeAddress=function(a){var b=this.addresses.map(function(a){return a.id}).indexOf(a.id);this.addresses.splice(b,1)},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./addresses":8,"./paymentMethod":24}],29:[function(a,b){function c(a){a&&f.extend(this,a)}var d=a("../../node_modules/q/q"),e=a("../services/api"),f=a("../services/util"),g=a("./booking"),h=a("./bookingSettings"),i=null;c.prototype.get=function(a){if(!a)return d.reject({message:"Venue identifier is required"});var b=d.defer();return this.fetch(a).then(function(a){i=a[0],b.resolve(a[0])},function(a){b.reject(a)}),b.promise},c.prototype.fetch=function(a){var b=d.defer(),g="venues",h="settings,hours";return a.venueId||a.permalink&&(delete a.venueId,g+="/permalink"),a.expand&&(h+=","+a.expand,delete a.expand),g+="?expand="+h+"&"+f.serialize(a),e.get(g).then(function(a){void 0===a.length&&(a=[a]);var d=a.map(function(a){return new c(a)});b.resolve(d)},function(a){b.reject(a)}),b.promise},c.prototype.getMessages=function(a){var b=null;if(this.id)b=this.id;else{if(!a)return d.reject({message:"Id is required"});b=a}var c=d.defer();return e.get("venues/"+b+"/messages").then(function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise},c.prototype.getPromotions=function(a){var b=null;if(this.id)b=this.id;else{if(!a)return d.reject({message:"Id is required"});b=a}var c=d.defer();return e.get("venues/"+b+"/promotions").then(function(a){c.resolve(a)},function(a){c.reject(a)}),c.promise},c.prototype.getHours=function(){return i=this,Preoday.Hour.getAll()},c.prototype.getPaymentProviders=function(){return i=this,Preoday.PaymentProvider.getPaymentProvidersByVenue()},c.getCurrent=function(){return i},c.prototype.getBookings=function(a){return a||(a={}),a.venueId=this.id,g.prototype.getBookings(a)},c.prototype.getBookingSettings=function(a){return a||(a={}),h.prototype.getSettings(a)},c.prototype.saveBookingSettings=function(a){return a||(a={}),h.prototype.saveSettings(a)},c.prototype.isEvent=function(){return this.eventFlag},c.prototype.isDelivery=function(){return this.deliverFlag},c.prototype.isPickup=function(){return this.pickupFlag},c.prototype.isCashPaymentEnable=function(){return this.paymentProviders&&this.paymentProviders.filter(function(a){return"CASH"===a.type}).length},c.prototype.isCardPaymentEnable=function(){return this.paymentProviders&&this.paymentProviders.filter(function(a){return"Stripe"===a.type}).length},c.prototype.isOwner=function(a){var b=d.defer();return e.get("venues/"+a+"/owner").then(function(a){b.resolve(a)},function(a){b.reject(a)}),b.promise},b.exports=c},{"../../node_modules/q/q":2,"../services/api":31,"../services/util":33,"./booking":12,"./bookingSettings":13}],30:[function(a){window.Preoday={Menu:new(a("./modules/menu")),Venue:new(a("./modules/venue")),Event:new(a("./modules/event")),PickupSlot:new(a("./modules/pickupSlot")),Outlet:new(a("./modules/outlet")),Hour:new(a("./modules/hour")),User:new(a("./modules/user")),PaymentMethod:new(a("./modules/paymentMethod")),PaymentProvider:new(a("./modules/paymentProvider")),Addresses:new(a("./modules/addresses")),Order:new(a("./modules/order")),Api:a("./services/api"),Basket:a("./modules/basket"),Booking:new(a("./modules/booking"))};var b=a("./services/settings");b.loadConfig()},{"./modules/addresses":8,"./modules/basket":9,"./modules/booking":12,"./modules/event":14,"./modules/hour":15,"./modules/menu":18,"./modules/order":21,"./modules/outlet":23,"./modules/paymentMethod":24,"./modules/paymentProvider":25,"./modules/pickupSlot":26,"./modules/user":28,"./modules/venue":29,"./services/api":31,"./services/settings":32}],31:[function(a,b){function c(a){i();var b=j.defer();return l.get(k+a).success(function(a){b.resolve(a)}).error(function(a){b.reject(a)}),b.promise}function d(a,b){i();var c=j.defer();return l.post(k+a,b).success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise}function e(a,b){i();var c=j.defer();return l.put(k+a,b).success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise}function f(a,b){i();var c=j.defer();return l.patch(k+a,b).success(function(a){c.resolve(a)}).error(function(a){c.reject(a)}),c.promise}function g(a){i();var b=j.defer();return l["delete"](k+a).success(function(a){b.resolve(a)}).error(function(a){b.reject(a)}),b.promise}function h(a){return l.headers(a)}function i(){var b=a("../modules/venue"),c=b.getCurrent();return c?l.headers("preo-venueid",c.id):void 0}var j=a("../../node_modules/q/q"),k=(a("./util"),"/api/"),l=new(a("../lib/atomic"))(window);b.exports={get:c,post:d,put:e,patch:f,headers:h,"delete":g,setUrlBase:function(a){k=a}}},{"../../node_modules/q/q":2,"../lib/atomic":6,"../modules/venue":29,"./util":33}],32:[function(a,b){function c(){var a=d.defer();return e.get("config/app").then(function(b){f=b,a.resolve()},function(b){a.reject(b)}),a.promise}var d=a("../../node_modules/q/q"),e=a("./api"),f=(a("./util"),null);b.exports={loadConfig:c,getSettings:function(){return f}}},{"../../node_modules/q/q":2,"./api":31,"./util":33}],33:[function(a,b){function c(a){return 10>a?"0"+a:a}a("../../node_modules/q/q");b.exports={extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},pad:c,TimeRange:function(a,b){this.start=a,this.end=b.replace(/^00:00/,"23:59");var d=this.start.split(":"),e=this.end.split(":");
this.getValues=function(a,b,f){console.log("start here",f);var g=[],h=new Date;h.setHours(parseInt(d[0],10)),h.setMinutes(parseInt(d[1],10)+b);var i=new Date;i.setHours(parseInt(e[0],10)),i.setMinutes(parseInt(e[1],10)),i.setDate(h.getDate());var j=i.getTime();if(h.getTime()<j)for(;h.getTime()<=j;)(!f||h.getTime()>=f.getTime())&&g.push(c(h.getHours())+":"+c(h.getMinutes())),h.setMinutes(h.getMinutes()+a);return g}},serialize:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},clone:function(a){return JSON.parse(JSON.stringify(a))},addMinutes:function(a,b){return new Date(a.getTime()+6e4*b)},getLocalDate:function(a){function b(){var a=(new Date).getTimezoneOffset(),b=Math.abs(a);return(0>a?"+":"-")+("00"+Math.floor(b/60)).slice(-2)+":"+("00"+b%60).slice(-2)}if("string"==typeof a){if(a.match(/(Z|([\+-]\d\d:?\d\d))$/))return new Date(a);var c=b();return new Date(a+c)}throw"Date param must be a valid ISO string"}}},{"../../node_modules/q/q":2}]},{},[30]),angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e){function f(){e.$broadcast("gettextLanguageChanged")}var g,h="$$noContext",i='<span id="test" title="test" class="tested">test</span>',j=angular.element("<span>"+i+"</span>").html()!==i,k=function(a){return g.debug&&g.currentLanguage!==g.baseLanguage?g.debugPrefix+a:a},l=function(a){return g.showTranslatedMarkers?g.translatedMarkerPrefix+a+g.translatedMarkerSuffix:a};return g={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:c("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,f()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(a,b){this.strings[a]||(this.strings[a]={});for(var c in b){var d=b[c];if(j&&(c=angular.element("<span>"+c+"</span>").html()),angular.isString(d)||angular.isArray(d)){var e={};e[h]=d,d=e}for(var g in d){var i=d[g];d[g]=angular.isArray(i)?i:[i]}this.strings[a][c]=d}f()},getStringForm:function(a,b,c){var d=this.strings[this.currentLanguage]||{},e=d[a]||{},f=e[c||h]||[];return f[b]},getString:function(a,b,c){return a=this.getStringForm(a,0,c)||k(a),a=b?d(a)(b):a,l(a)},getPlural:function(b,c,e,f,g){var h=a(this.currentLanguage,b);return c=this.getStringForm(c,h,g)||k(1===b?c:e),f&&(f.$count=b,c=d(c)(f)),l(c)},loadRemote:function(a){return b({method:"GET",url:a,cache:g.cache}).success(function(a){for(var b in a)g.setStrings(b,a[b])})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(a,b,c,d,e){function f(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}var g=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}(),h=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(e,i){f(!i.translatePlural||i.translateN,"translate-n","translate-plural"),f(!i.translateN||i.translatePlural,"translate-plural","translate-n");var j=g(e.html()),k=i.translatePlural,l=i.translateContext;return 8>=h&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,f,h){function i(){var b;k?(e=n||(n=e.$new()),e.$count=m(e),b=a.getPlural(e.$count,j,k,null,l)):b=a.getString(j,null,l);var h=f.contents();if(0!==h.length){if(b===g(h.html()))return void(o&&d(h)(e));var i=angular.element("<span>"+b+"</span>");d(i.contents())(e);var p=i.contents();c.enter(p,f),c.leave(h)}}var m=b(h.translateN),n=null,o=!0;h.translateN&&e.$watch(h.translateN,i),e.$on("gettextLanguageChanged",i),i(),o=!1}}}}}]),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){return function(a,b){switch(a){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return b%10!=1||b%100==11?1:0;case"jv":return 0!=b?1:0;case"mk":return 1==b||b%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return b>1?1:0;case"lv":return b%10==1&&b%100!=11?0:0!=b?1:2;case"lt":return b%10==1&&b%100!=11?0:b%10>=2&&(10>b%100||b%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return b%10==1&&b%100!=11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"mnk":return 0==b?0:1==b?1:2;case"ro":return 1==b?0:0==b||b%100>0&&20>b%100?1:2;case"pl":return 1==b?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"cs":case"sk":return 1==b?0:b>=2&&4>=b?1:2;case"sl":return b%100==1?1:b%100==2?2:b%100==3||b%100==4?3:0;case"mt":return 1==b?0:0==b||b%100>1&&11>b%100?1:b%100>10&&20>b%100?2:3;case"gd":return 1==b||11==b?0:2==b||12==b?1:b>2&&20>b?2:3;case"cy":return 1==b?0:2==b?1:8!=b&&11!=b?2:3;case"kw":return 1==b?0:2==b?1:3==b?2:3;case"ga":return 1==b?0:2==b?1:7>b?2:11>b?3:4;case"ar":return 0==b?0:1==b?1:2==b?2:b%100>=3&&10>=b%100?3:b%100>=11?4:5;default:return 1!=b?1:0}}}),function(a){return a.module("ngOrderObjectBy",[]).filter("orderObjectBy",function(){return function(b,c,d){function e(a,b){return a[b]}var f=[];return a.forEach(b,function(a){f.push(a)}),f.sort(function(a,b){var d,f=c.split(".").reduce(e,a),g=c.split(".").reduce(e,b);return d=f===g?0:f>g?1:-1}),d&&f.reverse(),f}})}(angular),angular.module("gettext").run(["gettextCatalog",function(a){a.setStrings("de_DE",{"Active?":"Aktiv?","Add a new event":"Neue Veranstaltung hinzufgen","Add another slot":"Zeitraum hinzufgen","Address Line 1":"Adresse des Unternehmens","Address Line 2":"Adresse des Unternehmens","Address Line 3":"Adresse des Unternehmens","All Locations":"Alle Kategorien",Amount:"Menge?","Are you sure you want to delete this event? Note: all event data will be lost!":"Sind Sie sicher, dass Sie diese Veranstaltung lschen mchten? Alle Veranstaltungsdaten werden bei diesem Vorgang gelscht!","Are you sure you want to delete this menu? Note: all menu data will be lost!":"Sind Sie sicher, dass Sie dieses Angebot lschen mchten? Alle Daten zu diesem Angebot werden bei diesem Vorgang gelscht!","Billing Address":"Adresse des Unternehmens","Billing History":"Unternehmensprofil","Billing Schedule":"Adresse des Unternehmens","Business Name":"Geschftsname","CHANGE CARD":"SPRACHE NDERN","CHANGE DETAILS":"SPRACHE NDERN","CHANGE PASSWORD":"PASSWORT ZURCKSETZEN","Choose a Collection Slot":"Abholzeitraum auswhlen","Choose preset:":"Gre auswhlen","Click to add a description":"Klicken, um Beschreibung hinzuzufgen","Click to add an event name":"Klicken, um den Veranstaltungsnamen hinzuzufgen",Collapse:"Verkleinern","Collection Slot":"Abholzeitraum auswhlen","Collection Slot: Half-Time":"Abholzeitraum: Halbzeit","Collection Slot: Interval":"Abholzeitraum: Pause","Collection Slot: Post-Game":"Abholzeitraum: Nach dem Spiel","Collection Slot: Post-Show":"Abholzeitraum: Nach der Show","Collection Slot: Pre-Game":"Abholzeitraum: Vor dem Spiel","Collection Slot: Pre-Show":"Abholzeitraum: Vor der Show","Collection Slot: Second-Interval":"Abholzeitraum: Zweite Pause",Confirm:"Passwort besttigen",Customer:"Neue Nutzer",Customers:"Neue Nutzer","DD/MM/YYYY":"TT/MM/JJJJ",Date:"Datum?","Date Range:":"Datum?","Date/Time":"Anfang","Date?":"Datum?","Default delivery time (minutes)":"Lieferverzug (in Minuten)",Delete:"Lschen","Delete this slot":"Diese Kategorie lschen","Delivery Areas":"Liefergebiete","Delivery Settings":"Liefereinstellungen","Delivery charge":"Zustellgebhr",Description:"Beschreibung",Discount:"Rabatt-Preis ","Discount offered for delivery orders (%)":"Rabbatangebot fr Lieferbestellungen (%)",Done:"Fertig",Duplicate:"Verdoppeln","Duration:":"Erstellen eines Angebots",Edit:"Bearbeiten","Email Address":"Adresse des Unternehmens","Email address":"Adresse des Unternehmens","Enable delivery services":"Lieferservice aktivieren","End Time":"Ende",Event:"Veranstaltungen","Event description:":"Beschreibung des Unternehmens","Event name:":"Veranstaltungen",Events:"Veranstaltungen","Events:":"Veranstaltungen","First Name":"Vorname","Free delivery for orders above":"Freie Lieferung fr Bestellungen ber","HH:MM":"SS:MM","Half-Time":"Zeit?","In case of customer queries contact:":"Bei Kundenanfragen kontaktieren Sie:",Item:"Nachname",Items:"Nachname","Know your customers":"Neue Nutzer","Last Name":"Nachname","Menu items":"Angebote","Minimum order value to qualify for delivery":"Erforderlicher Mindestbestellwert fr Lieferung",Minutes:"Dieser Monat","My Account":"Ihr Konto","My Subscriptions":"Beschreibung",Name:"Name","New Password":"Neues Passwort","New event":"Neue Veranstaltung hinzufgen",No:"Nein","No, go back.":"Nein, zurck.","Old Password":"Altes Passwort",Order:"versptete Bestellung","Order Rejection Alerts":"Meldung ber abgelehnte Bestellung ","Order Status Alerts":"Meldung ber Bestellstatus","Order Total":"versptete Bestellung",Orders:"versptete Bestellung",Outlet:"Standorte","Outlet Name:":"Standorte","Outlet location:":"Standorte",Password:"Passwort",Payment:"Zahlungsweise Hinzgen","Payment Methods":"Zahlungsmethode","Please choose a slot.":"Bitte whlen Sie einen Zeitraum aus. ","Please enter a message and a short name or remove this notification.":"Bitte eine Nachricht und eine Abkrzung eingeben oder diese Benachrichtigung lschen.","Please enter a valid number (e.g. 20.52)":"Bitte eine gltige Nummer eingeben (z.B. 20.52)","Please enter a valid number (e.g. 3.25)":"Bitte eine gltige Nummer eingeben (z.B. 3.25)","Please enter a valid telephone number":"Bitte geben Sie eine gltige Telefonnummer ein ","Please enter a valid time interval in minutes (e.g. 20)":"Bitte gltigen Zeitraum in Minuten eingeben (z.B. 20)","Please enter both the notification and a short name.":"Bitte Benachrichtigung und Abkrzung eingeben","Please provide a discount percentage (between 0 and 100)":"Bitte geben Sie den Prozentsatz fr Rabatt an (zwischen 0 und 100)","Please type a delivery zone (max 200chars)":"Bitte geben ein Liefergebiet ein (max. 200 Zeichen). ","Please type a description (max 250chars)":"Bitte geben Sie eine Beschreibung ein (max. 250 Zeichen).","Please type a valid email address":"Bitte geben Sie eine gltige E-Mail Adresse ein","Please type an event name (max 100 chars)":"Bitte geben Sie den Veranstaltungsnamen an (max 100 Zeichen)","Please type an event name (max 100chars)":"Bitte geben Sie den Veranstaltungsnamen an (max 100 Zeichen)","Please type your account name.(max 100chars)":"Bitte geben Sie Ihren Nachnamen ein (max. 100 Zeichen). ","Please type your first name.(max 100chars)":"Bitte geben Sie Ihren Vornamen ein (max. 100 Zeichen). ","Please type your last name.(max 100chars)":"Bitte geben Sie Ihren Nachnamen ein (max. 100 Zeichen). ","Please update your card details within":"Bitte geben Sie Ihre E-Mail ein",Postcode:"Postleitzahl des Unternehmens","Preset Notifications":"Benachrichtigungen","Preset customer notifications, sent by email and push alert":"Voreingestellte Benachrichtigungen fr Kunden per E-Mail und Push Meldung versendet","Preset order rejection notifications, sent by email and push alert":"Voreingestellte Benachrichtigungen bei abgelehnten Bestellungen per E-Mail und Push Mitteilung versendet",Profile:"Profil","Quantity Ordered":"Menge",Reports:"Meldung ber abgelehnte Bestellung ",SAVE:"SPEICHERN","SAVE CHANGES":"NDERUNGEN SPEICHERN","SAVING...":"SPEICHERN...",Schedule:"Adresse des Unternehmens","Second-Interval":"Abholzeitraum: Zweite Pause",Selected:"Auswahl Angebot","Short name":"Abkrzung","Slot name":"Abkrzung","Sorry, but there's been an error processing your request.":"Es ist leider ein Fehler bei der Bearbeitung Ihres Auftrags aufgetreten!","Start Date":"Datum","Start Time":"Anfang","Start time:":"Anfang",Subscriptions:"Beschreibung","These show when you are open for ordering, such as performances or matches. They can be viewed from the front page of your app":"Diese werden angezeigt, wenn Sie bereit sind Bestellungen aufzunehmen, wie z.B bei Auffhrungen oder Spielen. Sie sind auf der Startseite Ihrer App zu sehen. ",Time:"Zeit?","Time?":"Zeit?",Tools:"Tools",Total:"versptete Bestellung","Total Spent":"Gesamtumsatz","Town/City":"Stadt","Venue Alerts":"Unternehmensname","Visible?":"Sichtbar?","What's your event duration?":"Tage, an denen Ihr Unternehmen geffnet hat",Yes:"Ja","Yes, delete this event!":"Ja, diese Veranstaltung lschen!","Yes, delete this menu!":"Ja, dieses Angebot lschen!","You are currently subscribed to the":"Ihre App ist zurzeit im ","You have an outstanding payment!":"Zahlungsmethode","Your account will be billed":"Ihr Konto","Your account will be deactivated on":"Ihr Konto","Your events":"Ihre Veranstaltungen","Your subscription has been cancelled":"Angebot-Konfigurationen wurden gespeichert!","days to prevent your account from being deactivated.":"Ihr Konto",'eg. \\"NW1, NW2...\\"':'z.B. "NW1, NW2..."',minutes:"Dieser Monat","minutes and it":"Dieser Monat"}),a.setStrings("English",{}),a.setStrings("fr_FR",{"Add a new event":"Ajouter un nouvel vnement ","Add another slot":"Ajouter un autre crneau","Address Line 1":"Adresse de l'endroit","Address Line 2":"Adresse de l'endroit","Address Line 3":"Adresse de l'endroit","All Locations":"Toutes les sections",Amount:"Somme ?","Are you sure you want to delete this event? Note: all event data will be lost!":"dtes-vous sr de vouloir supprimer cet vnement? NB: toutes les donnes de votre vnement seront perdues !","Are you sure you want to delete this menu? Note: all menu data will be lost!":"dtes-vous sr de vouloir supprimer ce menu? NB: toutes les donnes du menu seront perdues!","Billing Address":"Adresse de l'endroit","Billing History":"Profil de l'entreprise","Billing Schedule":"Adresse de l'endroit","Business Name":"Nom de votre entreprise","CHANGE CARD":"CHANGER LA LANGUE","CHANGE DETAILS":"CHANGER LA LANGUE","CHANGE PASSWORD":"Rinitialiser le mot de passe","Choose a Collection Slot":"Choisir un crneau de rcupration","Choose preset:":"Choisir une taille","Click to add a description":"Cliquer pour ajouter un descriptif","Click to add an event name":"Cliquer pour ajouter un nom d'vnement",Collapse:"Rduire","Collection Slot":"Choisir un crneau de rcupration","Collection Slot: Half-Time":"Crneau de Rcupration: mi-temps","Collection Slot: Interval":"Crneau de Collecte : Entracte","Collection Slot: Post-Game":"Crneau de Collecte : Aprs Match","Collection Slot: Post-Show":"Crneau de Collecte : Aprs le spectacle","Collection Slot: Pre-Game":"Crneau de Collecte : Avant-Match","Collection Slot: Pre-Show":"Crneau de Collecte: Avant Spectacle","Collection Slot: Second-Interval":"Crneau de Collecte : Deuxime Entracte",Confirm:"Confirmer votre mot de passe",Customer:"Nouveaux utilisateurs",Customers:"Nouveaux utilisateurs","DD/MM/YYYY":"JJ/MM/AAAA",Date:"Date?","Date Range:":"Date?","Date/Time":"Heure de dbut","Date?":"Date?",Delete:"Supprimer","Delete this slot":"Supprimer cette section","Delivery Areas":"Rglages du Lieu","Delivery Settings":"Rglages du Lieu","Delivery charge":"Rglages du Lieu",Description:"Descriptif",Discount:"Prix avec rduction (&euro;)",Done:"Terminer",Duplicate:"Dupliquer","Duration:":"Cration du Menu",Edit:"Modifier","Email Address":"Adresse de l'endroit","Email address":"Adresse de l'endroit","End Time":"Heure de fin",Event:"Evnements","Event description:":"Descriptif du lieu","Event name:":"Evnements",Events:"Evnements","Events:":"Evnements","First Name":"Prnom","HH:MM":"HH:MM","Half-Time":"Heure?",Item:"Nom de Famille",Items:"Nom de Famille","Know your customers":"Nouveaux utilisateurs","Last Name":"Nom de Famille","Menu items":"Menus","Minimum order value to qualify for delivery":"S'il vous pladdt fournir un dlai de prparation",Minutes:"Ce mois-ci","My Account":"Votre compte","My Subscriptions":"Descriptif",Name:"Nom","New Password":"Nouveau mot de passe","New event":"Ajouter un nouvel vnement ",No:"Non","No, go back.":"Non, revenir","Old Password":"Ancien mot de passe",Order:"Rarranger","Order Rejection Alerts":"Rarranger","Order Status Alerts":"Rarranger","Order Total":"Rarranger",Orders:"Rarranger",Outlet:"Points de vente","Outlet Name:":"Points de vente","Outlet location:":"Points de vente",Password:"Mot de passe",Payment:"3. Paiement","Payment Methods":"Moyen de paiement","Please choose a slot.":"Veuillez choisir un crneau. ","Please enter a valid number (e.g. 20.52)":"Veuillez entrer une adresse email valide","Please enter a valid number (e.g. 3.25)":"Veuillez entrer une adresse email valide","Please enter a valid telephone number":"Veuillez entrer une adresse email valide","Please enter a valid time interval in minutes (e.g. 20)":"Veuillez entrer une adresse email valide","Please type a delivery zone (max 200chars)":"Veuillez entrer un nom d'utilisateur (max 200 caractres)","Please type a description (max 250chars)":"Veuillez taper un descriptif (max 250 caractres)","Please type a valid email address":"Veuillez entrer une adresse email valide","Please type an event name (max 100 chars)":"Veuillez entrer le nom de l'vnement","Please type an event name (max 100chars)":"Veuillez entrer le nom de l'vnement","Please type your account name.(max 100chars)":"Veuillez taper votre nom (max 100 caractres)","Please type your first name.(max 100chars)":"Veuillez taper votre prnom (max 100 caractres)","Please type your last name.(max 100chars)":"Veuillez taper votre nom (max 100 caractres)","Please update your card details within":"Veuillez taper votre Email",Postcode:"Code postal de l'endroit","Preset Notifications":"Notifications",Profile:"Profil","Quantity Ordered":"Quantit",Reports:"Rarranger",SAVE:"ENREGISTRER","SAVE CHANGES":"ENREGISTRER MODIFICATIONS","SAVING...":"EN COURS DE SAUVEGARDE",Schedule:"Adresse de l'endroit","Second-Interval":"Crneau de Collecte : Deuxime Entracte",Selected:"Slectionner tous les menus(","Short name":"Prnom","Slot name":"Prnom","Sorry, but there's been an error processing your request.":"Dsols, mais il y a eu une erreur lors du traitement de votre demande.","Start Date":"Date de dbut","Start Time":"Heure de dbut","Start time:":"Heure de dbut",Subscriptions:"Descriptif","These show when you are open for ordering, such as performances or matches. They can be viewed from the front page of your app":"Il montreront quand vous tes ouverts, comme pour des matchs ou spectacles. Ils seront visibles depuis la premire page de lapplication",Time:"Heure?","Time?":"Heure?",Tools:"Outils",Total:"Rarranger","Total Spent":"Total chiffre d'affaires","Venue Alerts":"Titre du lieu","Visible?":"Visible?","What's your event duration?":"Les jours o vous tes ouverts",Yes:"Oui","Yes, delete this event!":"Oui, supprimer cet vnement","Yes, delete this menu!":"Oui! Supprimer ce menu","You are currently subscribed to the":"Votre App est actuellement en ","You have an outstanding payment!":"Moyen de paiement","Your account will be billed":"Votre compte","Your account will be deactivated on":"Votre compte","Your events":"Vos vnements","Your subscription has been cancelled":"Configurations du menu ont bien t enregistres !","days to prevent your account from being deactivated.":"Votre compte",minutes:"Ce mois-ci","minutes and it":"Ce mois-ci"}),a.setStrings("nb_NO",{"ADD PAYMENT METHOD":"LEGG TIL BETALINGSMTE","Active?":"Aktiv?","Add a new event":"Legg til nytt arrangement","Add another slot":"Legg til nytt sted","Address Line 1":"Adresselinje 1","Address Line 2":"Adresselinje 2","Address Line 3":"Adresselinje 3",All:"Alle","All Locations":"Alle lokasjoner",Amount:"Belp","Are you sure you want to delete this event? Note: all event data will be lost!":"Er du sikker p at du vil slette denne hendelsen? Merk: alle hendelses data vil g tapt!","Are you sure you want to delete this menu? Note: all menu data will be lost!":"Er du sikker p at du vil slette denne menyen? Merk: alle meny data vil g tapt!","BILLING HISTORY":"FAKTURA HISTORIKK","Billing Address":"Fakturaadresse","Billing History":"Faktura historikk","Billing Schedule":"Faktureringsplan","Business Name":"Navn p virksomhet",CANCEL:"AVBRYT",CCV:"CCV","CHANGE CARD":"ENDRE KORT","CHANGE DETAILS":"ENDRE DETALJER","CHANGE PASSWORD":"ENDRE PASSORD",CSV:"CSV","Card Number":"Kortnummer","Card ending":"Siste siffer i kortnummer","Choose a Collection Slot":"Velg et sted","Choose preset:":"Velg forhndsinnstilling:","Click to add a description":"Klikk for  legge inn en beskrivelse","Click to add an event name":"Klikk for  legge et arrangement navn",Collapse:"Trekk sammen","Collection Slot":"Velg et sted","Collection Slot: Half-Time":"Samlingssted: Halv tid","Collection Slot: Interval":"Samlingssted: Interval","Collection Slot: Post-Game":"Samlingssted: Etter kamp","Collection Slot: Post-Show":"Samlingssted: Etter show","Collection Slot: Pre-Game":"Samlingssted: Fr kamp","Collection Slot: Pre-Show":"Samlingssted: Fr show","Collection Slot: Second-Interval":"Samlingssted: Andre interval",Confirm:"Bekreft","Credit Card Name":"Kredittkortnummer","Credit Card Number":"Kredittkortnummer",Customer:"Kunde",Customers:"Kunder","DD/MM/YYYY":"DD/MM/","DOWNLOAD PDF":"LAST NED PDF",Date:"Dato","Date Range:":"Datointerval","Date/Time":"Dato/tid","Date?":"Dato?","Default delivery time (minutes)":"Standard leveringstid (minutter)",Delete:"Slett","Delete this slot":"Slett denne delen","Delivery Areas":"Leveringsomrder","Delivery Settings":"Leveringsinnstillinger","Delivery charge":"Leveringskostnad",Description:"Beskrivelse",Discount:"Rabatt","Discount offered for delivery orders (%)":"Rabatt ved ordre for levering (%)",Done:"Fullfrt",Duplicate:"Dupliser","Duration:":"Opprette meny",Edit:"Rediger","Email Address":"E-postadresse","Email address":"E-postadresse","Email address for receiving venue alerts":"E-postadresse for  motta butikk varsler","Enable delivery services":"Aktiver leveringstjenester","End Time":"Slutt tidspunkt","Enter a number":"Kortnummer",Event:"Arrangement","Event description:":"Bedriftens beskrivelse","Event name:":"Arrangementer:",Events:"Arrangementer","Events:":"Arrangementer:",Expires:"Utlper","Export as...":"Eksporter som...","First Name":"Fornavn","Free delivery for orders above":"Gratis levering for ordre over","HH:MM":"TT:MM","Half-Time":"Tid","In addition to the fulfilment app, you can also receive email updates to notify when you have received a new order":"I tillegg til appen kan du motta varsling p e-post nr du har mottatt en ny ordre","In case of customer queries contact:":"Ved kundehenvendelser kontakt:","Inv no.":"Faktura nr.",Item:"Vare",Items:"Varer","Know your customers":"Bli kjent med dine kunder","Last Name":"Etternavn","Live Stream":"Live aktivitet","Live stream":"Live aktivitet",MM:"MM","Menu items":"Menyelementer",Metrics:"Analyser","Minimum order value to qualify for delivery":"Minimumsbelp for levering",Minutes:"minutter siden","My Account":"Min konto","My Subscriptions":"Mine abonnementer",Name:"Navn","Name on card":"Navn p kortet","New Password":"Nytt passord","New event":"Legg til nytt arrangement",No:"Nei","No Data":"Ingen data","No, go back.":"Nei, g tilbake.","Old Password":"Gammelt passord",Order:"Bestill","Order Rejection Alerts":"Varsel for avvist ordre","Order Status Alerts":"Varsel for ordrestatus","Order Total":"Ordre total",Orders:"Ordre",Outlet:"Utsalgssted","Outlet Name:":"Utsalgsstedets navn:","Outlet location:":"Utsalgsstedets navn:",PDF:"PDF",Password:"Passord",Payment:"Betaling","Payment Methods":"Betalingsmetoder","Please add a credit card to resubscribe":"Vennligst legg til kortdetaljer for  aktivere abonnementet.","Please add a payment method to keep your account active":"Vennligst legg til en betalingsmte for  holde kontoen din aktiv","Please choose a slot.":"Velg et sted","Please enter a message and a short name or remove this notification.":"Skriv inn en melding og et kallenavn eller fjern dette varselet.","Please enter a valid number (e.g. 20.52)":"Skriv inn et gyldig nummer (f.eks 200,00)","Please enter a valid number (e.g. 3.25)":"Skriv inn et gyldig nummer (f.eks 45,00)","Please enter a valid telephone number":"Skriv inn et gyldig telefonnummer","Please enter a valid time interval in minutes (e.g. 20)":"Skriv inn gyldig tidsintervall i minutter (f.eks 20)","Please enter both the notification and a short name.":"Vennligst oppgi bde varsling og et kort navn.","Please provide a discount percentage (between 0 and 100)":"Vennligst oppgi rabatt i prosent (mellom 0 og 100)","Please type a delivery zone (max 200chars)":"Vennligst skriv inn et leveringsomrde (maks 200 bokstaver)","Please type a description (max 250chars)":"Skriv inn en beskrivelse (maks 250 bokstaver)","Please type a valid email address":"Vennligst skriv inn en gyldig e-postadresse","Please type an event name (max 100 chars)":"Skriv inn et arrangement navn (maks 100 bokstaver)","Please type an event name (max 100chars)":"Skriv inn et arrangement navn (maks 100 bokstaver)","Please type your account name.(max 100chars)":"Vennligst skriv inn kontonavn. (maks 100 bokstaver)","Please type your first name.(max 100chars)":"Vennligst skriv fornavnet ditt. (maks 100 bokstaver)","Please type your last name.(max 100chars)":"Vennligst skriv etternavnet ditt. (maks 100 bokstaver)","Please update your card details within":"Vennligst oppdater kortdetaljene innen",Postcode:"Postnummer","Preset Notifications":"Forhndsinnstilte pminnelser","Preset customer notifications, sent by email and push alert":"Forhndsinnstilte kundemeldinger, som sendes via e-post og push-varsling","Preset order rejection notifications, sent by email and push alert":"Forhndsinnstilte avvisnings meldinger, som sendes via e-post og push-varsling",Profile:"Profil","Quantity Ordered":"Antall bestilt",RESUBSCRIBE:"REAKTIVER ABONNEMENT",Refresh:"Oppdater",Reports:"Rapporter",SAVE:"LAGRE","SAVE CHANGES":"LAGRE ENDRINGER","SAVING...":"LAGRER...",Schedule:"Faktureringsplan","Second-Interval":"Samlingssted: Andre interval",Selected:"Valgte","Short name":"Kallenavn","Slot name":"Kallenavn","Sorry, but there's been an error processing your request.":"Beklager, men det var en feil ved behandling av foresprselen.","Start Date":"Start dato","Start Time":"Start tidspunkt","Start time:":"Start tidspunkt",Status:"Status",Stock:"Varebeholdning",Subscriptions:"Abonnementer",TOTAL:"TOTALT","These show when you are open for ordering, such as performances or matches. They can be viewed from the front page of your app":"Disse viser nr du har pent for bestilling, som for eksempel forestillinger eller kamper. De kan sees fra forsiden av din app",Time:"Tid","Time?":"Tid?",Tools:"Verkty",Total:"Total","Total Spent":"Totalt brukt","Town/City":"Poststed",UPGRADE:"OPPGRADER","Venue Alerts":"Varsler for utsalgssted","Visible?":"Synlig?","What's your event duration?":"Dagene din restaurant er pen",YY:"",Yes:"Ja","Yes, delete this event!":"Ja, slett denne hendelsen!","Yes, delete this menu!":"Ja, slett denne menyen!","You are currently subscribed to the":"Du abonnerer for yeblikket p","You have an outstanding payment!":"Du har en utestende betaling!","You have no active subscriptions, your account will not be billed at this time.":"Du har ingen aktive abonnementer, din konto vil ikke bli fakturert p dette tidspunktet.","Your account will be billed":"Din konto vil bli fakturert","Your account will be deactivated on":"Din konto vil bli deaktivert den","Your events":"Dine arrangementer","Your free trial of this subscription will end at midnight on":"Din gratis prveversjon av dette abonnementet vil avsluttes ved midnatt","Your subscription has been cancelled":"Abonnementet er kansellert","days to prevent your account from being deactivated.":"dager for  hindre at kontoen din blir deaktivert.",'eg. \\"NW1, NW2...\\"':'f.eks. \\"3210, 3211...\\"',minutes:"minutter siden","minutes and it":"minutter siden","package":"pakke",to:"til"})}]),angular.module("loaders",[]).service("$AjaxInterceptor",["$rootScope","$timeout",function(a,b){function c(){var a=document.getElementsByClassName(".loading-content");if(a.length>0){(new Spinner).spin(a[0])}}return{start:function(){++a.requests,c()},complete:function(){b(function(){a.requests>0&&--a.requests},100)},isRequesting:function(){return a.requests>0}}}]),function(){var a=null;try{a=angular.module("constants")}catch(b){a=angular.module("constants",[])}a.constant("FEATURE_STATUS",{INSTALLED:"INSTALLED",TRIAL:"TRIAL",UNINSTALLED:"UNINSTALLED"}),a.constant("FEATURES",{BOOKING:9})}(),function(){angular.module("booking",["ngRoute","constants","loaders","mm.foundation","gettext","ngOrderObjectBy"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"/code/booking/partials/booking.php"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","gettextCatalog","LANG","$http","ACCOUNT_ID","FEATURE_STATUS","FEATURES",function(a,b,c,d,e,f,g){a.requests=0;var h="en_GB",i="en";switch(c){case"de":h="de_DE";break;case"fr":h="fr_FR";break;case"nb":h="nb_NO"}i=h.substr(0,h.indexOf("_")),"en_GB"!=h&&(b.currentLanguage=h,moment.locale(i)),d.get("/api/accounts/"+e+"/packages").then(function(a){var b=!1;if(a&&a.data)for(var c=0,d=a.data.length;d>c;c++){var e=a.data[c];if(e&&e.preoPackage&&e.preoPackage.features)for(var h=0,i=e.preoPackage.features.length;i>h;h++){var j=e.preoPackage.features[h];if(j.id===g.BOOKING&&(e.status===f.INSTALLED||e.status===f.TRIAL||e.status===f.UNINSTALLED)){b=!0;break}}if(b)break}b||window.location.replace("/dashboard")})}])}(),function(a,b){"use scrict";b.module("booking").controller("BookingCtrl",["$scope","$rootScope","$timeout","$q","$AjaxInterceptor","BookingService","MenuService","gettextCatalog","BookingSettingsService","$filter",function(b,c,d,e,f,g,h,i,j,k){function l(){var a=[],b=e.defer(),c={startDate:p.startDate,endDate:p.endDate};return f.start(),g.getBookings(c).then(function(c){for(var d=c||[],g=0,h=d.length;h>g;g++){var i=e.defer(),j=d[g];if(j.promotionId){var k=moment(j.date).utc(),l=j.time?j.time.split(":"):[];l.length>0&&(k.hour(l[0]),k.minutes(l[1])),j.date=k.format("DD/MM/YY"),j.time=m(j.time),j.$bookingDate=k.valueOf(),j.$promotionName=j.promotionId,i.resolve(),a.push(i.promise)}}0==d.length&&(b.resolve(d),f.complete()),e.all(a).then(function(){var a=d.filter(function(a){return a.promotionId});b.resolve(a),f.complete()},function(){f.complete(),n()})},function(){f.complete(),n()}),b.promise}function m(a){return 8==a.length?a.substr(0,a.length-3):a}function n(a){var b=a||i.getString("Sorry, but there's been an error processing your request.");noty({type:"error",layout:"topCenter",text:b})}function o(){c.requests=0,f.start();var b=$(".sched-start-date").fdatepicker({format:"dd/mm/yyyy"}).on("changeDate",function(){b.hide(),$(".sched-end-date").focus()}).data("datepicker"),e=($(".sched-end-date").fdatepicker({format:"dd/mm/yyyy",onRender:function(a){return a.valueOf()<=b.date.valueOf()?"disabled":""}}).data("datepicker"),moment().add("30","days"));p.startDate=moment().format("DD/MM/YYYY"),p.endDate=e.format("DD/MM/YYYY"),j.getSettings().then(function(){f.complete(),p.getBookings()},function(){var b=i.getString("Please, setup the group booking settings first.");f.complete(),n(b),d(function(){a.location.href="/bookingSettings"},2500)})}var p=this;p.maxItemsPerPage=25,p.currentPage=1,p.bookingsToShow=[],p.toggleDetails=function(a,b){var c=$(".booking-details")[a];
$(c).slideRow("none"==$(c).css("display")?"down":"up"),b.$menus||(f.start(),h.loadMenu(b).then(function(a){b.$menus=a,b.sectionsFiltered=h.groupItemBySection(b.$menus,b.orders),f.complete()}))},p.getBookings=function(){l().then(function(a){p.bookingData=k("orderBy")(a,"$bookingDate"),p.bookingsToShow=p.bookingData.slice(0,p.maxItemsPerPage)})},p.changePage=function(a){var b=p.maxItemsPerPage*(a-1);console.log(a),p.bookingsToShow=p.bookingData.slice(b,p.maxItemsPerPage*a),p.currentPage=a},p.prepareData=function(){var a=[];p.bookingData.length&&(f.start(),$.each(p.bookingData,function(b,c){var d=e.defer();c.$menus?d.resolve():h.loadMenu(c).then(function(){d.resolve()},function(){d.reject(),f.complete(),n()}),a.push(d.promise)}),e.all(a).then(function(){$.each(p.bookingData,function(a,b){h.loadMenu(b).then(function(a){b.$menus=a,b.sectionsFiltered=h.groupItemBySection(b.$menus,b.orders)})}),f.complete(),d(function(){b.$broadcast("generateReportTrigger")})},function(){f.complete(),n()}))},d(o)}])}(window,angular),angular.module("booking").directive("bookingItem",["$timeout","$q","$rootScope","gettextCatalog","VENUE_PERMALINK",function(a,b,c,d,e){return{templateUrl:"/code/booking/js/directives/booking-item/booking-item.php",restrict:"A",replace:!0,scope:{booking:"=element"},link:function(a){window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""));var b=document.location.origin,c=b.substr(b.length-1);"/"!==c&&(b+="/"),a.getWebOrdersUrl=function(a){return b+"menus/"+e+"#/booking/"+a.reference+"/"+a.user.lastName}}}}]),angular.module("booking").directive("bookingItemDetails",["$timeout","$q","$rootScope","gettextCatalog","$http","ACCOUNT_ID",function(a,b,c,d,e,f){return{templateUrl:"/code/booking/js/directives/booking-item-details/booking-item-details.php",restrict:"A",replace:!0,scope:{booking:"=element"},link:function(a){function b(){var b={client:{name:a.booking.user.name,phone:a.booking.user.phone,email:a.booking.user.email},booking:{promotion:a.booking.promotionId,date:a.booking.date,time:a.booking.time,guests:a.booking.people},sections:a.booking.sectionsFiltered};return{data:b}}d.getString("Booking");a.account_id=f,a.exportXLS=function(){a.csvData=b(a.booking)},a.getExportDate=function(){var b=moment.utc(a.startDate),c=moment.utc(a.endDate);return b.format("DD-MMM-YYYY")+" - "+c.format("DD-MMM-YYYY")}}}}]),angular.module("booking").directive("submitForm",["$timeout",function(){return{link:function(a,b,c){a.$on(c.submitForm,function(){b.trigger("submit")})}}}]),function(a,b){b.module("booking").service("BookingService",["$http","VENUE_ID",function(a,b){function c(a){var b=a.split("/");return b[1]+"/"+b[0]+"/"+b[2]}var d={},e=b;return d.getBookings=function(a){var b={expand:"orders,user",venueId:e};return a.startDate&&(b.after=c(a.startDate)),a.endDate&&(b.before=c(a.endDate)),Preoday.Booking.getBookings(b)},d}])}(window,angular),function(a,b){b.module("booking").service("MenuService",["$http","VENUE_ID","$q",function(a,b,c){function d(a){for(var b=0,c=0;c<a.length;c++)b+=isNaN(a[c].qty)?0:+a[c].qty;return b}var e={},f={};return e.groupItemBySection=function(a,b){var c={};c.Unknown={items:[]};for(var e=0,f=b.length;f>e;e++)for(var g=b[e],h=0,i=g.items.length;i>h;h++){for(var j=g.items[h],k=!1,l=0,m=a.sections.length;m>l;l++)for(var n=a.sections[l],o=0,p=n.items.length;p>o;o++){var q=n.items[o];j.menuItemId==q.id&&(c[n.id]||(c[n.id]={},c[n.id].items=[],c[n.id].sectionName=n.name,c[n.id].min=n.min,c[n.id].position=n.position),c[n.id].items.push(j),k=!0)}k||(c.Unknown.min=1,c.Unknown.sectionName="Unknown",c.Unknown.position=1/0,c.Unknown.items.push(j))}0==c.Unknown.items.length&&delete c.Unknown;for(var r in c)c[r].total=d(c[r].items);return c},e.loadMenu=function(a){var b=c.defer();return f[a.promotionId]?b.resolve(f[a.promotionId]):(f[a.promotionId]=!0,a.getMenu().then(function(c){console.log("menu jscore",c),f[a.promotionId]=c,b.resolve(c)})),b.promise},e}])}(window,angular),function(a,b){b.module("booking").service("BookingSettingsService",["VENUE_ID",function(a){var b={},c=a;return b.getSettings=function(){return Preoday.Venue.getBookingSettings({venueId:c})},b}])}(window,angular);