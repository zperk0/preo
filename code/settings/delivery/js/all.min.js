angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e){function f(){e.$broadcast("gettextLanguageChanged")}var g,h="$$noContext",i='<span id="test" title="test" class="tested">test</span>',j=angular.element("<span>"+i+"</span>").html()!==i,k=function(a){return g.debug&&g.currentLanguage!==g.baseLanguage?g.debugPrefix+a:a},l=function(a){return g.showTranslatedMarkers?g.translatedMarkerPrefix+a+g.translatedMarkerSuffix:a};return g={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:c("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,f()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(a,b){this.strings[a]||(this.strings[a]={});for(var c in b){var d=b[c];if(j&&(c=angular.element("<span>"+c+"</span>").html()),angular.isString(d)||angular.isArray(d)){var e={};e[h]=d,d=e}for(var g in d){var i=d[g];d[g]=angular.isArray(i)?i:[i]}this.strings[a][c]=d}f()},getStringForm:function(a,b,c){var d=this.strings[this.currentLanguage]||{},e=d[a]||{},f=e[c||h]||[];return f[b]},getString:function(a,b,c){return a=this.getStringForm(a,0,c)||k(a),a=b?d(a)(b):a,l(a)},getPlural:function(b,c,e,f,g){var h=a(this.currentLanguage,b);return c=this.getStringForm(c,h,g)||k(1===b?c:e),f&&(f.$count=b,c=d(c)(f)),l(c)},loadRemote:function(a){return b({method:"GET",url:a,cache:g.cache}).success(function(a){for(var b in a)g.setStrings(b,a[b])})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(a,b,c,d,e){function f(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}var g=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}(),h=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(e,i){f(!i.translatePlural||i.translateN,"translate-n","translate-plural"),f(!i.translateN||i.translatePlural,"translate-plural","translate-n");var j=g(e.html()),k=i.translatePlural,l=i.translateContext;return 8>=h&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,f,h){function i(){var b;k?(e=n||(n=e.$new()),e.$count=m(e),b=a.getPlural(e.$count,j,k,null,l)):b=a.getString(j,null,l);var h=f.contents();if(0!==h.length){if(b===g(h.html()))return void(o&&d(h)(e));var i=angular.element("<span>"+b+"</span>");d(i.contents())(e);var p=i.contents();c.enter(p,f),c.leave(h)}}var m=b(h.translateN),n=null,o=!0;h.translateN&&e.$watch(h.translateN,i),e.$on("gettextLanguageChanged",i),i(),o=!1}}}}}]),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){return function(a,b){switch(a){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return b%10!=1||b%100==11?1:0;case"jv":return 0!=b?1:0;case"mk":return 1==b||b%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return b>1?1:0;case"lv":return b%10==1&&b%100!=11?0:0!=b?1:2;case"lt":return b%10==1&&b%100!=11?0:b%10>=2&&(10>b%100||b%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return b%10==1&&b%100!=11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"mnk":return 0==b?0:1==b?1:2;case"ro":return 1==b?0:0==b||b%100>0&&20>b%100?1:2;case"pl":return 1==b?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"cs":case"sk":return 1==b?0:b>=2&&4>=b?1:2;case"sl":return b%100==1?1:b%100==2?2:b%100==3||b%100==4?3:0;case"mt":return 1==b?0:0==b||b%100>1&&11>b%100?1:b%100>10&&20>b%100?2:3;case"gd":return 1==b||11==b?0:2==b||12==b?1:b>2&&20>b?2:3;case"cy":return 1==b?0:2==b?1:8!=b&&11!=b?2:3;case"kw":return 1==b?0:2==b?1:3==b?2:3;case"ga":return 1==b?0:2==b?1:7>b?2:11>b?3:4;case"ar":return 0==b?0:1==b?1:2==b?2:b%100>=3&&10>=b%100?3:b%100>=11?4:5;default:return 1!=b?1:0}}}),angular.module("gettext").run(["gettextCatalog",function(a){a.setStrings("de_DE",{"Active?":"Aktiv?","Address Line 1":"Adresse des Unternehmens","Address Line 2":"Adresse des Unternehmens","Address Line 3":"Adresse des Unternehmens",Amount:"Menge?","Billing Address":"Adresse des Unternehmens","Billing History":"Unternehmensprofil","Billing Schedule":"Adresse des Unternehmens","Business Name":"Geschäftsname","CHANGE CARD":"SPRACHE ÄNDERN","CHANGE DETAILS":"SPRACHE ÄNDERN","CHANGE PASSWORD":"PASSWORT ZURÜCKSETZEN","Choose preset:":"Größe auswählen",Confirm:"Passwort bestätigen",Customer:"Neue Nutzer",Customers:"Neue Nutzer",Date:"Datum?","Date Range:":"Datum?","Date/Time":"Anfang","Default delivery time (minutes)":"Lieferverzug (in Minuten)","Delivery Areas":"Liefergebiete","Delivery Settings":"Liefereinstellungen","Delivery charge":"Zustellgebühr",Discount:"Rabatt-Preis ","Discount offered for delivery orders (%)":"Rabbatangebot für Lieferbestellungen (%)","Email Address":"Adresse des Unternehmens","Email address":"Adresse des Unternehmens","Enable delivery services":"Lieferservice aktivieren",Event:"Veranstaltungen",Events:"Veranstaltungen","Events:":"Veranstaltungen","First Name":"Vorname","Free delivery for orders above":"Freie Lieferung für Bestellungen über","In case of customer queries contact:":"Bei Kundenanfragen kontaktieren Sie:",Item:"Nachname",Items:"Nachname","Know your customers":"Neue Nutzer","Last Name":"Nachname","Menu items":"Angebote","Minimum order value to qualify for delivery":"Erforderlicher Mindestbestellwert für Lieferung","My Account":"Ihr Konto","My Subscriptions":"Beschreibung",Name:"Name","New Password":"Neues Passwort",No:"Nein","Old Password":"Altes Passwort",Order:"verspätete Bestellung","Order Rejection Alerts":"Meldung über abgelehnte Bestellung ","Order Status Alerts":"Meldung über Bestellstatus","Order Total":"verspätete Bestellung",Orders:"verspätete Bestellung",Outlet:"Standorte","Outlet Name:":"Standorte",Password:"Passwort",Payment:"Zahlungsweise Hinzügen","Payment Methods":"Zahlungsmethode","Please enter a message and a short name or remove this notification.":"Bitte eine Nachricht und eine Abkürzung eingeben oder diese Benachrichtigung löschen.","Please enter a valid number (e.g. 20.52)":"Bitte eine gültige Nummer eingeben (z.B. 20.52)","Please enter a valid number (e.g. 3.25)":"Bitte eine gültige Nummer eingeben (z.B. 3.25)","Please enter a valid telephone number":"Bitte geben Sie eine gültige Telefonnummer ein ","Please enter a valid time interval in minutes (e.g. 20)":"Bitte gültigen Zeitraum in Minuten eingeben (z.B. 20)","Please enter both the notification and a short name.":"Bitte Benachrichtigung und Abkürzung eingeben","Please provide a discount percentage (between 0 and 100)":"Bitte geben Sie den Prozentsatz für Rabatt an (zwischen 0 und 100)","Please type a delivery zone (max 200chars)":"Bitte geben ein Liefergebiet ein (max. 200 Zeichen). ","Please type a valid email address":"Bitte geben Sie eine gültige E-Mail Adresse ein","Please type your account name.(max 100chars)":"Bitte geben Sie Ihren Nachnamen ein (max. 100 Zeichen). ","Please type your first name.(max 100chars)":"Bitte geben Sie Ihren Vornamen ein (max. 100 Zeichen). ","Please type your last name.(max 100chars)":"Bitte geben Sie Ihren Nachnamen ein (max. 100 Zeichen). ","Please update your card details within":"Bitte geben Sie Ihre E-Mail ein",Postcode:"Postleitzahl des Unternehmens","Preset Notifications":"Benachrichtigungen","Preset customer notifications, sent by email and push alert":"Voreingestellte Benachrichtigungen für Kunden per E-Mail und Push Meldung versendet","Preset order rejection notifications, sent by email and push alert":"Voreingestellte Benachrichtigungen bei abgelehnten Bestellungen per E-Mail und Push Mitteilung versendet",Profile:"Profil","Quantity Ordered":"Menge",Reports:"Meldung über abgelehnte Bestellung ",SAVE:"SPEICHERN","SAVE CHANGES":"ÄNDERUNGEN SPEICHERN","SAVING...":"SPEICHERN...",Selected:"Auswahl Angebot","Short name":"Abkürzung",Subscriptions:"Beschreibung",Time:"Zeit?",Total:"verspätete Bestellung","Total Spent":"Gesamtumsatz","Town/City":"Stadt","Venue Alerts":"Unternehmensname",Yes:"Ja","You are currently subscribed to the":"Ihre App ist zurzeit im ","You have an outstanding payment!":"Zahlungsmethode","Your account will be billed":"Ihr Konto","Your account will be deactivated on":"Ihr Konto","Your subscription has been cancelled":"Angebot-Konfigurationen wurden gespeichert!","days to prevent your account from being deactivated.":"Ihr Konto",'eg. \\"NW1, NW2...\\"':'z.B. "NW1, NW2..."'}),a.setStrings("English",{}),a.setStrings("fr_FR",{"Address Line 1":"Adresse de l'endroit","Address Line 2":"Adresse de l'endroit","Address Line 3":"Adresse de l'endroit",Amount:"Somme ?","Billing Address":"Adresse de l'endroit","Billing History":"Profil de l'entreprise","Billing Schedule":"Adresse de l'endroit","Business Name":"Nom de votre entreprise","CHANGE CARD":"CHANGER LA LANGUE","CHANGE DETAILS":"CHANGER LA LANGUE","CHANGE PASSWORD":"RÃ©initialiser le mot de passe","Choose preset:":"Choisir une taille",Confirm:"Confirmer votre mot de passe",Customer:"Nouveaux utilisateurs",Customers:"Nouveaux utilisateurs",Date:"Date?","Date Range:":"Date?","Date/Time":"Heure de dÃ©but","Delivery Areas":"RÃ©glages du Lieu","Delivery Settings":"RÃ©glages du Lieu","Delivery charge":"RÃ©glages du Lieu",Discount:"Prix avec rÃ©duction (&euro;)","Email Address":"Adresse de l'endroit","Email address":"Adresse de l'endroit",Event:"EvÃ©nements",Events:"EvÃ©nements","Events:":"EvÃ©nements","First Name":"PrÃ©nom",Item:"Nom de Famille",Items:"Nom de Famille","Know your customers":"Nouveaux utilisateurs","Last Name":"Nom de Famille","Menu items":"Menus","Minimum order value to qualify for delivery":"S'il vous plaÃ®t fournir un dÃ©lai de prÃ©paration","My Account":"Votre compte","My Subscriptions":"Descriptif",Name:"Nom","New Password":"Nouveau mot de passe",No:"Non","Old Password":"Ancien mot de passe",Order:"RÃ©arranger","Order Rejection Alerts":"RÃ©arranger","Order Status Alerts":"RÃ©arranger","Order Total":"RÃ©arranger",Orders:"RÃ©arranger",Outlet:"Points de vente","Outlet Name:":"Points de vente",Password:"Mot de passe",Payment:"3. Paiement","Payment Methods":"Moyen de paiement","Please enter a valid number (e.g. 20.52)":"Veuillez entrer une adresse email valide","Please enter a valid number (e.g. 3.25)":"Veuillez entrer une adresse email valide","Please enter a valid telephone number":"Veuillez entrer une adresse email valide","Please enter a valid time interval in minutes (e.g. 20)":"Veuillez entrer une adresse email valide","Please type a delivery zone (max 200chars)":"Veuillez entrer un nom d'utilisateur (max 200 caractÃ¨res)","Please type a valid email address":"Veuillez entrer une adresse email valide","Please type your account name.(max 100chars)":"Veuillez taper votre nom (max 100 caractÃ¨res)","Please type your first name.(max 100chars)":"Veuillez taper votre prÃ©nom (max 100 caractÃ¨res)","Please type your last name.(max 100chars)":"Veuillez taper votre nom (max 100 caractÃ¨res)","Please update your card details within":"Veuillez taper votre Email",Postcode:"Code postal de l'endroit","Preset Notifications":"Notifications",Profile:"Profil","Quantity Ordered":"QuantitÃ©",Reports:"RÃ©arranger",SAVE:"ENREGISTRER","SAVE CHANGES":"ENREGISTRER MODIFICATIONS","SAVING...":"EN COURS DE SAUVEGARDE",Selected:"SÃ©lectionner tous les menus(","Short name":"PrÃ©nom",Subscriptions:"Descriptif",Time:"Heure?",Total:"RÃ©arranger","Total Spent":"Total chiffre d'affaires","Venue Alerts":"Titre du lieu",Yes:"Oui","You are currently subscribed to the":"Votre App est actuellement en ","You have an outstanding payment!":"Moyen de paiement","Your account will be billed":"Votre compte","Your account will be deactivated on":"Votre compte","Your subscription has been cancelled":"Configurations du menu ont bien Ã©tÃ© enregistrÃ©es !","days to prevent your account from being deactivated.":"Votre compte"}),a.setStrings("nb_NO",{"ADD PAYMENT METHOD":"LEGG TIL BETALINGSMÅTE","Active?":"Aktiv?","Address Line 1":"Adresselinje 1","Address Line 2":"Adresselinje 2","Address Line 3":"Adresselinje 3",All:"Alle",Amount:"Beløp","BILLING HISTORY":"FAKTURA HISTORIKK","Billing Address":"Fakturaadresse","Billing History":"Faktura historikk","Billing Schedule":"Faktureringsplan","Business Name":"Navn på virksomhet",CANCEL:"AVBRYT",CCV:"CCV","CHANGE CARD":"ENDRE KORT","CHANGE DETAILS":"ENDRE DETALJER","CHANGE PASSWORD":"ENDRE PASSORD",CSV:"CSV","Card Number":"Kortnummer","Card ending":"Siste siffer i kortnummer","Choose preset:":"Velg forhåndsinnstilling:",Confirm:"Bekreft","Credit Card Name":"Kredittkortnummer","Credit Card Number":"Kredittkortnummer",Customer:"Kunde",Customers:"Kunder","DOWNLOAD PDF":"LAST NED PDF",Date:"Dato","Date Range:":"Datointerval","Date/Time":"Dato/tid","Default delivery time (minutes)":"Standard leveringstid (minutter)","Delivery Areas":"Leveringsområder","Delivery Settings":"Leveringsinnstillinger","Delivery charge":"Leveringskostnad",Discount:"Rabatt","Discount offered for delivery orders (%)":"Rabatt ved ordre for levering (%)","Email Address":"E-postadresse","Email address":"E-postadresse","Email address for receiving venue alerts":"E-postadresse for å motta butikk varsler","Enable delivery services":"Aktiver leveringstjenester",Event:"Arrangement",Events:"Arrangementer","Events:":"Arrangementer:",Expires:"Utløper","Export as...":"Eksporter som...","First Name":"Fornavn","Free delivery for orders above":"Gratis levering for ordre over","In addition to the fulfilment app, you can also receive email updates to notify when you have received a new order":"I tillegg til appen kan du motta varsling på e-post når du har mottatt en ny ordre","In case of customer queries contact:":"Ved kundehenvendelser kontakt:","Inv no.":"Faktura nr.",Item:"Vare",Items:"Varer","Know your customers":"Bli kjent med dine kunder","Last Name":"Etternavn","Live Stream":"Live aktivitet","Live stream":"Live aktivitet",MM:"MM","Menu items":"Menyelementer",Metrics:"Analyser","Minimum order value to qualify for delivery":"Minimumsbeløp for levering","My Account":"Min konto","My Subscriptions":"Mine abonnement",Name:"Navn","Name on card":"Navn på kortet","New Password":"Nytt passord",No:"Nei","No Data":"Ingen data","Old Password":"Gammelt passord",Order:"Bestill","Order Rejection Alerts":"Varsel for avvist ordre","Order Status Alerts":"Varsel for ordrestatus","Order Total":"Ordre total",Orders:"Ordre",Outlet:"Utsalgssted","Outlet Name:":"Utsalgsstedets navn:",PDF:"PDF",Password:"Passord",Payment:"Betaling","Payment Methods":"Betalingsmetoder","Please add a credit card to resubscribe":"Vennligst legg til kortinformasjon for å aktivere abonnementet.","Please add a payment method to keep your account active":"Vennligst legg til en betalingsmåte for å holde kontoen din aktiv","Please enter a message and a short name or remove this notification.":"Skriv inn en melding og et kallenavn eller fjern dette varselet.","Please enter a valid number (e.g. 20.52)":"Skriv inn et gyldig nummer (f.eks 200,00)","Please enter a valid number (e.g. 3.25)":"Skriv inn et gyldig nummer (f.eks 45,00)","Please enter a valid telephone number":"Skriv inn et gyldig telefonnummer","Please enter a valid time interval in minutes (e.g. 20)":"Skriv inn gyldig tidsintervall i minutter (f.eks 20)","Please enter both the notification and a short name.":"Vennligst oppgi både varsling og et kallenavn.","Please provide a discount percentage (between 0 and 100)":"Vennligst oppgi rabatt i prosent (mellom 0 og 100)","Please type a delivery zone (max 200chars)":"Vennligst skriv inn et leveringsområde (maks 200 bokstaver)","Please type a valid email address":"Vennligst skriv inn en gyldig e-postadresse","Please type your account name.(max 100chars)":"Vennligst skriv inn kontonavn. (maks 100 tegn)","Please type your first name.(max 100chars)":"Vennligst oppgi fornavnet ditt. (maks 100 tegn)","Please type your last name.(max 100chars)":"Vennligst oppgi etternavnet ditt. (maks 100 tegn)","Please update your card details within":"Vennligst oppdater kortdetaljene innen",Postcode:"Postnummer","Preset Notifications":"Forhåndsdefinerte meldinger","Preset customer notifications, sent by email and push alert":"Forhåndsdefinerte kundemeldinger, som sendes via e-post og push-varsling","Preset order rejection notifications, sent by email and push alert":"Forhåndsdefinerte (ikke godkjent) meldinger, som sendes via e-post og push-varsling",Profile:"Profil","Quantity Ordered":"Antall bestilt",RESUBSCRIBE:"REAKTIVER ABONNEMENT",Refresh:"Oppdater",Reports:"Rapporter",SAVE:"LAGRE","SAVE CHANGES":"LAGRE ENDRINGER","SAVING...":"LAGRER...",Selected:"Valgte","Short name":"Kallenavn",Status:"Status",Stock:"Varebeholdning",Subscriptions:"Abonnementer",TOTAL:"TOTALT",Time:"Tid",Total:"Totalt","Total Spent":"Totalt brukt","Town/City":"Poststed",UPGRADE:"OPPGRADER","Venue Alerts":"Varsler for utsalgssted",YY:"ÅÅ",Yes:"Ja","You are currently subscribed to the":"Du abonnerer for øyeblikket på","You have an outstanding payment!":"Du har en utestående betaling!","You have no active subscriptions, your account will not be billed at this time.":"Du har ingen aktive abonnementer, din konto vil ikke bli fakturert på dette tidspunktet.","Your account will be billed":"Din konto vil bli fakturert","Your account will be deactivated on":"Din konto vil bli deaktivert den","Your free trial of this subscription will end at midnight on":"Din gratis prøveversjon av dette abonnementet vil avsluttes ved midnatt","Your subscription has been cancelled":"Abonnementet er kansellert","days to prevent your account from being deactivated.":"dager for å hindre at kontoen din blir deaktivert.",'eg. \\"NW1, NW2...\\"':'f.eks. \\"3210, 3211...\\"',"package":"pakke",to:"til"})}]),angular.module("delivery",["ngResource","ngRoute","delivery.resources","delivery.controllers","delivery.directives","constants","gettext"]).run(["LANG","gettextCatalog",function(a,b){var c="en_US";switch(a){case"de":c="de_DE";break;case"fr":c="fr_FR";break;case"nb":c="nb_NO"}"en_US"!=c&&(b.currentLanguage=c)}]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"/code/settings/delivery/partials/delivery.php",controller:"deliveryController"}),a.when("/notifications",{templateUrl:"/code/settings/delivery/partials/notifications.php",controller:"notificationCtrl"}),a.otherwise({redirectTo:"/"})}]);var messagesAlert={notify:[{content:_tr("Your order is running 15 mins late"),name:_tr("Late Order"),type:"ORDER_NOTIFY"},{content:_tr("Your order is on its way"),name:_tr("En-route"),type:"ORDER_NOTIFY"},{content:_tr("There is a problem with your order. Please call us"),name:_tr("Call us"),type:"ORDER_NOTIFY"}],reject:[{content:_tr("Your address is out of our delivery zone"),name:_tr("Out of zone"),type:"ORDER_REJECT"},{content:_tr("Sorry, that item is out of stock"),name:_tr("Out of stock"),type:"ORDER_REJECT"},{content:_tr("Sorry, Your order has been rejected. Please call us"),name:_tr("Call us"),type:"ORDER_REJECT"}]};angular.module("delivery.resources",["ngResource"]).factory("Resources",["$resource",function(a){var b=a("/api/venues/:id",{id:"@id"},{put:{method:"PUT"}}),c=a("/api/venues/:id/settings",{id:"@id"},{put:{method:"PUT"}}),d=a("/api/venues/:venueId/messages/:id",{venueId:"@venueId",id:"@id"},{put:{method:"PUT"}});return{Venue:b,VenueSettings:c,VenueMessages:d}}]),angular.module("delivery.controllers",[]).controller("deliveryController",["$scope","$http","Resources","$q","VENUE_ID","$rootScope",function(a,b,c,d,e,f){function g(a){var b=new c.VenueMessages;return b.content=a.content,b.name=a.name,b.type=a.type,b.orderType=a.type,b.$save({venueId:e})}a.isPosting=!1,a.triedSubmit=!1,f.requests=2,a.venue=c.Venue.get({id:e},function(){--f.requests},function(){console.log("error",arguments)}),++f.requests;var h=0,i=!1;c.VenueMessages.query({venueId:e},function(a){h=a.length,--f.requests});var j=c.VenueSettings.get({id:e},function(b){a.venueSettings=b,--f.requests},function(){console.log("error",arguments)}),k=messagesAlert.notify.concat(messagesAlert.reject);a.processForm=function(){if(a.isPosting=!0,a.triedSubmit=!0,!a.deliveryForm.$valid)return a.isPosting=!1,!1;delete a.venue.ccySymbol;var b=[c.Venue.put({id:e},a.venue).$promise,c.VenueSettings.put({id:e},j).$promise];i&&1==a.venue.deliverFlag&&0==h&&(b.push(g(k[0]).$promise),b.push(g(k[1]).$promise),b.push(g(k[2]).$promise),b.push(g(k[3]).$promise),b.push(g(k[4]).$promise),b.push(g(k[5]).$promise),h=6),++f.requests,d.all(b).then(function(){--f.requests,a.isPosting=!1,noty({type:"success",layout:"topCenter",text:_tr("Successfully saved delivery settings.")})},function(){a.isPosting=!1,noty({type:"error",layout:"topCenter",text:_tr("Sorry, but there's been an error processing your request.")})})},a.onChangeDeliverFlag=function(){i=!0}}]).controller("notificationCtrl",["$scope","$http","Resources","$q","VENUE_ID","$rootScope",function(a,b,c,d,e,f){function g(a){if(a.id)return""!==a.name.trim()&&""!==a.content.trim()?a.$put().$promise:a.$remove().$promise;if(a.name&&""!=a.name.trim()&&a.content&&""!==a.content.trim()){var b=d.defer();return a.$save({venueId:e}).then(function(c){a.id=c.id,b.resolve()},function(c){console.log("reject here",c,a),b.reject()}),b.promise}return!0}a.isPosting=!1,a.selected=1,a.triedSubmit=!1,f.requests=1;var h={notify:["ORDER_NOTIFY"],reject:["ORDER_REJECT"]};a.venue=c.Venue.get({id:e},function(){},function(){console.log("error",arguments)});c.VenueMessages.query({venueId:e},function(b){a.messages={notify:[],reject:[]};for(var d=0,e=0,g=0;6>g;g++)if(b.length>g){var i=b[g];h.notify.indexOf(i.type)>-1?(a.messages.notify.push(i),d++):(a.messages.reject.push(i),e++)}else if(3>d){var j=new c.VenueMessages({name:"",content:"",type:h.notify[0],active:0});d++,a.messages.notify.push(j)}else{var j=new c.VenueMessages({name:"",content:"",type:h.reject[0],active:0});e++,a.messages.reject.push(j)}f.requests=0,a.finishedLoading=!0},function(){console.log("error",arguments)});a.validateMessage=function(b){var c=Boolean(b.content)?!Boolean(b.name):Boolean(b.name);return c&&a.triedSubmit},a.validateEmail=function(a){if(!a||!a.length)return!0;var b=new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return b.test(a)},a.validateActive=function(a){return a&&a.name&&a.content?""===a.name.trim()&&""===a.content.trim()?(a.active=0,!1):!0:(a.active=0,!1)},a.processForm=function(){if(a.isPosting=!0,a.triedSubmit=!0,!a.deliveryForm.$valid)return a.isPosting=!1,!1;if(a.venue.notificationEmailAddress&&!a.validateEmail(a.venue.notificationEmailAddress))return noty({type:"error",layout:"topCenter",text:_tr("Email is invalid")}),a.isPosting=!1,!1;var b=a.messages.reject.concat(a.messages.notify);for(var c in b)delete b[c].typeString,delete b[c].suppressed;delete a.venue.ccySymbol,d.all([a.venue.$put(),g(b[0]),g(b[1]),g(b[2]),g(b[3]),g(b[4]),g(b[5])]).then(function(){a.isPosting=!1,noty({type:"success",layout:"topCenter",text:_tr("Successfully saved delivery settings.")})},function(){a.isPosting=!1,noty({type:"error",layout:"topCenter",text:_tr("Sorry, but there's been an error processing your request.")})})},a.getPlaceholder=function(a,b){return messagesAlert[a][b]}}]);var directives=angular.module("delivery.directives",[]);directives.directive("percent",["$filter",function(a){var b=function(b){var c=b.match(/^(\d+)/);return null!==c?a("number")(parseFloat(b)/100):void 0},c=function(b){return a("number")(100*parseFloat(b))};return{require:"ngModel",link:function(a,d,e,f){f.$parsers.unshift(b),f.$formatters.unshift(c)}}}]),directives.directive("currency",function(){function a(a,c,d,e){function f(a){var b=Math.pow(10,k);return Math.round(a*b)/b}function g(a){return parseFloat(a).toFixed(k)}function h(a){return e.$isEmpty(a)?"":""+a}var i,j=parseFloat(d.min||0),k=parseFloat(d.precision||2);e.$parsers.push(function(a){0===a.indexOf(".")&&(a="0"+a),0===a.indexOf("-")&&(j>=0?(a=null,e.$setViewValue(""),e.$render()):"-"===a&&(a=""));var c=e.$isEmpty(a);return c||b.test(a)?i=""===a?null:c?a:parseFloat(a):(e.$setViewValue(h(i)),e.$render()),e.$setValidity("number",!0),i}),e.$formatters.push(h);var l=function(a){return!e.$isEmpty(a)&&j>a?void e.$setValidity("min",!1):(e.$setValidity("min",!0),a)};if(e.$parsers.push(l),e.$formatters.push(l),d.max){var m=parseFloat(d.max),n=function(a){return!e.$isEmpty(a)&&a>m?void e.$setValidity("max",!1):(e.$setValidity("max",!0),a)};e.$parsers.push(n),e.$formatters.push(n)}k>-1&&(e.$parsers.push(function(a){return a?f(a):a}),e.$formatters.push(function(a){return a?g(a):a})),c.bind("blur",function(){var a=e.$modelValue;a&&(e.$viewValue=g(a),e.$render())})}var b=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/;return{restrict:"A",require:"ngModel",link:a}});