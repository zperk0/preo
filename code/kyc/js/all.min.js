"use strict";angular.module("gettext",[]),angular.module("gettext").constant("gettext",function(a){return a}),angular.module("gettext").factory("gettextCatalog",["gettextPlurals","$http","$cacheFactory","$interpolate","$rootScope",function(a,b,c,d,e){function f(){e.$broadcast("gettextLanguageChanged")}var g,h="$$noContext",i='<span id="test" title="test" class="tested">test</span>',j=angular.element("<span>"+i+"</span>").html()!==i,k=function(a){return g.debug&&g.currentLanguage!==g.baseLanguage?g.debugPrefix+a:a},l=function(a){return g.showTranslatedMarkers?g.translatedMarkerPrefix+a+g.translatedMarkerSuffix:a};return g={debug:!1,debugPrefix:"[MISSING]: ",showTranslatedMarkers:!1,translatedMarkerPrefix:"[",translatedMarkerSuffix:"]",strings:{},baseLanguage:"en",currentLanguage:"en",cache:c("strings"),setCurrentLanguage:function(a){this.currentLanguage=a,f()},getCurrentLanguage:function(){return this.currentLanguage},setStrings:function(a,b){this.strings[a]||(this.strings[a]={});for(var c in b){var d=b[c];if(j&&(c=angular.element("<span>"+c+"</span>").html()),angular.isString(d)||angular.isArray(d)){var e={};e[h]=d,d=e}for(var g in d){var i=d[g];d[g]=angular.isArray(i)?i:[i]}this.strings[a][c]=d}f()},getStringForm:function(a,b,c){var d=this.strings[this.currentLanguage]||{},e=d[a]||{},f=e[c||h]||[];return f[b]},getString:function(a,b,c){return a=this.getStringForm(a,0,c)||k(a),a=b?d(a)(b):a,l(a)},getPlural:function(b,c,e,f,g){var h=a(this.currentLanguage,b);return c=this.getStringForm(c,h,g)||k(1===b?c:e),f&&(f.$count=b,c=d(c)(f)),l(c)},loadRemote:function(a){return b({method:"GET",url:a,cache:g.cache}).success(function(a){for(var b in a)g.setStrings(b,a[b])})}}}]),angular.module("gettext").directive("translate",["gettextCatalog","$parse","$animate","$compile","$window",function(a,b,c,d,e){function f(a,b,c){if(!a)throw new Error("You should add a "+b+" attribute whenever you add a "+c+" attribute.")}var g=function(){return String.prototype.trim?function(a){return"string"==typeof a?a.trim():a}:function(a){return"string"==typeof a?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}(),h=parseInt((/msie (\d+)/.exec(angular.lowercase(e.navigator.userAgent))||[])[1],10);return{restrict:"AE",terminal:!0,compile:function(e,i){f(!i.translatePlural||i.translateN,"translate-n","translate-plural"),f(!i.translateN||i.translatePlural,"translate-plural","translate-n");var j=g(e.html()),k=i.translatePlural,l=i.translateContext;return 8>=h&&"<!--IE fix-->"===j.slice(-13)&&(j=j.slice(0,-13)),{post:function(e,f,h){function i(){var b;k?(e=n||(n=e.$new()),e.$count=m(e),b=a.getPlural(e.$count,j,k,null,l)):b=a.getString(j,null,l);var h=f.contents();if(0!==h.length){if(b===g(h.html()))return void(o&&d(h)(e));var i=angular.element("<span>"+b+"</span>");d(i.contents())(e);var p=i.contents();c.enter(p,f),c.leave(h)}}var m=b(h.translateN),n=null,o=!0;h.translateN&&e.$watch(h.translateN,i),e.$on("gettextLanguageChanged",i),i(),o=!1}}}}}]),angular.module("gettext").filter("translate",["gettextCatalog",function(a){function b(b,c){return a.getString(b,null,c)}return b.$stateful=!0,b}]),angular.module("gettext").factory("gettextPlurals",function(){return function(a,b){switch(a){case"ay":case"bo":case"cgg":case"dz":case"fa":case"id":case"ja":case"jbo":case"ka":case"kk":case"km":case"ko":case"ky":case"lo":case"ms":case"my":case"sah":case"su":case"th":case"tt":case"ug":case"vi":case"wo":case"zh":return 0;case"is":return b%10!=1||b%100==11?1:0;case"jv":return 0!=b?1:0;case"mk":return 1==b||b%10==1?0:1;case"ach":case"ak":case"am":case"arn":case"br":case"fil":case"fr":case"gun":case"ln":case"mfe":case"mg":case"mi":case"oc":case"pt_BR":case"tg":case"ti":case"tr":case"uz":case"wa":case"zh":return b>1?1:0;case"lv":return b%10==1&&b%100!=11?0:0!=b?1:2;case"lt":return b%10==1&&b%100!=11?0:b%10>=2&&(10>b%100||b%100>=20)?1:2;case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return b%10==1&&b%100!=11?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"mnk":return 0==b?0:1==b?1:2;case"ro":return 1==b?0:0==b||b%100>0&&20>b%100?1:2;case"pl":return 1==b?0:b%10>=2&&4>=b%10&&(10>b%100||b%100>=20)?1:2;case"cs":case"sk":return 1==b?0:b>=2&&4>=b?1:2;case"sl":return b%100==1?1:b%100==2?2:b%100==3||b%100==4?3:0;case"mt":return 1==b?0:0==b||b%100>1&&11>b%100?1:b%100>10&&20>b%100?2:3;case"gd":return 1==b||11==b?0:2==b||12==b?1:b>2&&20>b?2:3;case"cy":return 1==b?0:2==b?1:8!=b&&11!=b?2:3;case"kw":return 1==b?0:2==b?1:3==b?2:3;case"ga":return 1==b?0:2==b?1:7>b?2:11>b?3:4;case"ar":return 0==b?0:1==b?1:2==b?2:b%100>=3&&10>=b%100?3:b%100>=11?4:5;default:return 1!=b?1:0}}}),angular.module("gettext").run(["gettextCatalog",function(a){a.setStrings("de_DE",{"Active?":"Aktiv?","Add a new event":"Neue Veranstaltung hinzufügen","Add another slot":"Zeitraum hinzufügen","Address Line 1":"Adresse des Unternehmens","Address Line 2":"Adresse des Unternehmens","Address Line 3":"Adresse des Unternehmens","All Locations":"Alle Kategorien",Amount:"Menge?","Are you sure you want to delete this event? Note: all event data will be lost!":"Sind Sie sicher, dass Sie diese Veranstaltung löschen möchten? Alle Veranstaltungsdaten werden bei diesem Vorgang gelöscht!","Are you sure you want to delete this menu? Note: all menu data will be lost!":"Sind Sie sicher, dass Sie dieses Angebot löschen möchten? Alle Daten zu diesem Angebot werden bei diesem Vorgang gelöscht!","Billing Address":"Adresse des Unternehmens","Billing History":"Unternehmensprofil","Billing Schedule":"Adresse des Unternehmens","Business Name":"Geschäftsname","CHANGE CARD":"SPRACHE ÄNDERN","CHANGE DETAILS":"SPRACHE ÄNDERN","CHANGE PASSWORD":"PASSWORT ZURÜCKSETZEN","Choose a Collection Slot":"Abholzeitraum auswählen","Choose preset:":"Größe auswählen","Click to add a description":"Klicken, um Beschreibung hinzuzufägen","Click to add an event name":"Klicken, um den Veranstaltungsnamen hinzuzufügen",Collapse:"Verkleinern","Collection Slot":"Abholzeitraum auswählen","Collection Slot: Half-Time":"Abholzeitraum: Halbzeit","Collection Slot: Interval":"Abholzeitraum: Pause","Collection Slot: Post-Game":"Abholzeitraum: Nach dem Spiel","Collection Slot: Post-Show":"Abholzeitraum: Nach der Show","Collection Slot: Pre-Game":"Abholzeitraum: Vor dem Spiel","Collection Slot: Pre-Show":"Abholzeitraum: Vor der Show","Collection Slot: Second-Interval":"Abholzeitraum: Zweite Pause",Confirm:"Passwort bestätigen",Customer:"Neue Nutzer",Customers:"Neue Nutzer","DD/MM/YYYY":"TT/MM/JJJJ",Date:"Datum?","Date Range:":"Datum?","Date/Time":"Anfang","Date?":"Datum?","Default delivery time (minutes)":"Lieferverzug (in Minuten)",Delete:"Löschen","Delete this slot":"Diese Kategorie löschen","Delivery Areas":"Liefergebiete","Delivery Settings":"Liefereinstellungen","Delivery charge":"Zustellgebühr",Description:"Beschreibung",Discount:"Rabatt-Preis ","Discount offered for delivery orders (%)":"Rabbatangebot für Lieferbestellungen (%)",Done:"Fertig",Duplicate:"Verdoppeln","Duration:":"Erstellen eines Angebots",Edit:"Bearbeiten","Email Address":"Adresse des Unternehmens","Email address":"Adresse des Unternehmens","Enable delivery services":"Lieferservice aktivieren","End Time":"Ende",Event:"Veranstaltungen","Event description:":"Beschreibung des Unternehmens","Event name:":"Veranstaltungen",Events:"Veranstaltungen","Events:":"Veranstaltungen","First Name":"Vorname","Free delivery for orders above":"Freie Lieferung für Bestellungen über","HH:MM":"SS:MM","Half-Time":"Zeit?","In case of customer queries contact:":"Bei Kundenanfragen kontaktieren Sie:",Item:"Nachname",Items:"Nachname","Know your customers":"Neue Nutzer","Last Name":"Nachname","Menu items":"Angebote","Minimum order value to qualify for delivery":"Erforderlicher Mindestbestellwert für Lieferung",Minutes:"Dieser Monat","My Account":"Ihr Konto","My Subscriptions":"Beschreibung",Name:"Name","New Password":"Neues Passwort","New event":"Neue Veranstaltung hinzufügen",No:"Nein","No, go back.":"Nein, zurück.","Old Password":"Altes Passwort",Order:"verspätete Bestellung","Order Rejection Alerts":"Meldung über abgelehnte Bestellung ","Order Status Alerts":"Meldung über Bestellstatus","Order Total":"verspätete Bestellung",Orders:"verspätete Bestellung",Outlet:"Standorte","Outlet Name:":"Standorte","Outlet location:":"Standorte",Password:"Passwort",Payment:"Zahlungsweise Hinzügen","Payment Methods":"Zahlungsmethode","Please choose a slot.":"Bitte wählen Sie einen Zeitraum aus. ","Please enter a message and a short name or remove this notification.":"Bitte eine Nachricht und eine Abkürzung eingeben oder diese Benachrichtigung löschen.","Please enter a valid number (e.g. 20.52)":"Bitte eine gültige Nummer eingeben (z.B. 20.52)","Please enter a valid number (e.g. 3.25)":"Bitte eine gültige Nummer eingeben (z.B. 3.25)","Please enter a valid telephone number":"Bitte geben Sie eine gültige Telefonnummer ein ","Please enter a valid time interval in minutes (e.g. 20)":"Bitte gültigen Zeitraum in Minuten eingeben (z.B. 20)","Please enter both the notification and a short name.":"Bitte Benachrichtigung und Abkürzung eingeben","Please provide a discount percentage (between 0 and 100)":"Bitte geben Sie den Prozentsatz für Rabatt an (zwischen 0 und 100)","Please type a delivery zone (max 200chars)":"Bitte geben ein Liefergebiet ein (max. 200 Zeichen). ","Please type a description (max 250chars)":"Bitte geben Sie eine Beschreibung ein (max. 250 Zeichen).","Please type a valid email address":"Bitte geben Sie eine gültige E-Mail Adresse ein","Please type an event name (max 100 chars)":"Bitte geben Sie den Veranstaltungsnamen an (max 100 Zeichen)","Please type an event name (max 100chars)":"Bitte geben Sie den Veranstaltungsnamen an (max 100 Zeichen)","Please type your account name.(max 100chars)":"Bitte geben Sie Ihren Nachnamen ein (max. 100 Zeichen). ","Please type your first name.(max 100chars)":"Bitte geben Sie Ihren Vornamen ein (max. 100 Zeichen). ","Please type your last name.(max 100chars)":"Bitte geben Sie Ihren Nachnamen ein (max. 100 Zeichen). ","Please update your card details within":"Bitte geben Sie Ihre E-Mail ein",Postcode:"Postleitzahl des Unternehmens","Preset Notifications":"Benachrichtigungen","Preset customer notifications, sent by email and push alert":"Voreingestellte Benachrichtigungen für Kunden per E-Mail und Push Meldung versendet","Preset order rejection notifications, sent by email and push alert":"Voreingestellte Benachrichtigungen bei abgelehnten Bestellungen per E-Mail und Push Mitteilung versendet",Profile:"Profil","Quantity Ordered":"Menge",Reports:"Meldung über abgelehnte Bestellung ",SAVE:"SPEICHERN","SAVE CHANGES":"ÄNDERUNGEN SPEICHERN","SAVING...":"SPEICHERN...",Schedule:"Adresse des Unternehmens","Second-Interval":"Abholzeitraum: Zweite Pause",Selected:"Auswahl Angebot","Short name":"Abkürzung","Slot name":"Abkürzung","Sorry, but there's been an error processing your request.":"Es ist leider ein Fehler bei der Bearbeitung Ihres Auftrags aufgetreten!","Start Date":"Datum","Start Time":"Anfang","Start time:":"Anfang",Subscriptions:"Beschreibung","These show when you are open for ordering, such as performances or matches. They can be viewed from the front page of your app":"Diese werden angezeigt, wenn Sie bereit sind Bestellungen aufzunehmen, wie z.B bei Aufführungen oder Spielen. Sie sind auf der Startseite Ihrer App zu sehen. ",Time:"Zeit?","Time?":"Zeit?",Tools:"Tools",Total:"verspätete Bestellung","Total Spent":"Gesamtumsatz","Town/City":"Stadt","Venue Alerts":"Unternehmensname","Visible?":"Sichtbar?","What's your event duration?":"Tage, an denen Ihr Unternehmen geöffnet hat",Yes:"Ja","Yes, delete this event!":"Ja, diese Veranstaltung löschen!","Yes, delete this menu!":"Ja, dieses Angebot löschen!","You are currently subscribed to the":"Ihre App ist zurzeit im ","You have an outstanding payment!":"Zahlungsmethode","Your account will be billed":"Ihr Konto","Your account will be deactivated on":"Ihr Konto","Your events":"Ihre Veranstaltungen","Your subscription has been cancelled":"Angebot-Konfigurationen wurden gespeichert!","days to prevent your account from being deactivated.":"Ihr Konto",'eg. \\"NW1, NW2...\\"':'z.B. "NW1, NW2..."',minutes:"Dieser Monat","minutes and it":"Dieser Monat"}),a.setStrings("English",{}),a.setStrings("fr_FR",{"Add a new event":"Ajouter un nouvel événement ","Add another slot":"Ajouter un autre créneau","Address Line 1":"Adresse de l'endroit","Address Line 2":"Adresse de l'endroit","Address Line 3":"Adresse de l'endroit","All Locations":"Toutes les sections",Amount:"Somme ?","Are you sure you want to delete this event? Note: all event data will be lost!":"dÊtes-vous sûr de vouloir supprimer cet événement? NB: toutes les données de votre événement seront perdues !","Are you sure you want to delete this menu? Note: all menu data will be lost!":"dÊtes-vous sûr de vouloir supprimer ce menu? NB: toutes les données du menu seront perdues!","Billing Address":"Adresse de l'endroit","Billing History":"Profil de l'entreprise","Billing Schedule":"Adresse de l'endroit","Business Name":"Nom de votre entreprise","CHANGE CARD":"CHANGER LA LANGUE","CHANGE DETAILS":"CHANGER LA LANGUE","CHANGE PASSWORD":"Réinitialiser le mot de passe","Choose a Collection Slot":"Choisir un créneau de récupération","Choose preset:":"Choisir une taille","Click to add a description":"Cliquer pour ajouter un descriptif","Click to add an event name":"Cliquer pour ajouter un nom d'événement",Collapse:"Réduire","Collection Slot":"Choisir un créneau de récupération","Collection Slot: Half-Time":"Créneau de Récupération: mi-temps","Collection Slot: Interval":"Créneau de Collecte : Entracte","Collection Slot: Post-Game":"Créneau de Collecte : Après Match","Collection Slot: Post-Show":"Créneau de Collecte : Après le spectacle","Collection Slot: Pre-Game":"Créneau de Collecte : Avant-Match","Collection Slot: Pre-Show":"Créneau de Collecte: Avant Spectacle","Collection Slot: Second-Interval":"Créneau de Collecte : Deuxième Entracte",Confirm:"Confirmer votre mot de passe",Customer:"Nouveaux utilisateurs",Customers:"Nouveaux utilisateurs","DD/MM/YYYY":"JJ/MM/AAAA",Date:"Date?","Date Range:":"Date?","Date/Time":"Heure de début","Date?":"Date?",Delete:"Supprimer","Delete this slot":"Supprimer cette section","Delivery Areas":"Réglages du Lieu","Delivery Settings":"Réglages du Lieu","Delivery charge":"Réglages du Lieu",Description:"Descriptif",Discount:"Prix avec réduction (&euro;)",Done:"Terminer",Duplicate:"Dupliquer","Duration:":"Création du Menu",Edit:"Modifier","Email Address":"Adresse de l'endroit","Email address":"Adresse de l'endroit","End Time":"Heure de fin",Event:"Evénements","Event description:":"Descriptif du lieu","Event name:":"Evénements",Events:"Evénements","Events:":"Evénements","First Name":"Prénom","HH:MM":"HH:MM","Half-Time":"Heure?",Item:"Nom de Famille",Items:"Nom de Famille","Know your customers":"Nouveaux utilisateurs","Last Name":"Nom de Famille","Menu items":"Menus","Minimum order value to qualify for delivery":"S'il vous pladdît fournir un délai de préparation",Minutes:"Ce mois-ci","My Account":"Votre compte","My Subscriptions":"Descriptif",Name:"Nom","New Password":"Nouveau mot de passe","New event":"Ajouter un nouvel événement ",No:"Non","No, go back.":"Non, revenir","Old Password":"Ancien mot de passe",Order:"Réarranger","Order Rejection Alerts":"Réarranger","Order Status Alerts":"Réarranger","Order Total":"Réarranger",Orders:"Réarranger",Outlet:"Points de vente","Outlet Name:":"Points de vente","Outlet location:":"Points de vente",Password:"Mot de passe",Payment:"3. Paiement","Payment Methods":"Moyen de paiement","Please choose a slot.":"Veuillez choisir un créneau. ","Please enter a valid number (e.g. 20.52)":"Veuillez entrer une adresse email valide","Please enter a valid number (e.g. 3.25)":"Veuillez entrer une adresse email valide","Please enter a valid telephone number":"Veuillez entrer une adresse email valide","Please enter a valid time interval in minutes (e.g. 20)":"Veuillez entrer une adresse email valide","Please type a delivery zone (max 200chars)":"Veuillez entrer un nom d'utilisateur (max 200 caractères)","Please type a description (max 250chars)":"Veuillez taper un descriptif (max 250 caractères)","Please type a valid email address":"Veuillez entrer une adresse email valide","Please type an event name (max 100 chars)":"Veuillez entrer le nom de l'événement","Please type an event name (max 100chars)":"Veuillez entrer le nom de l'événement","Please type your account name.(max 100chars)":"Veuillez taper votre nom (max 100 caractères)","Please type your first name.(max 100chars)":"Veuillez taper votre prénom (max 100 caractères)","Please type your last name.(max 100chars)":"Veuillez taper votre nom (max 100 caractères)","Please update your card details within":"Veuillez taper votre Email",Postcode:"Code postal de l'endroit","Preset Notifications":"Notifications",Profile:"Profil","Quantity Ordered":"Quantité",Reports:"Réarranger",SAVE:"ENREGISTRER","SAVE CHANGES":"ENREGISTRER MODIFICATIONS","SAVING...":"EN COURS DE SAUVEGARDE",Schedule:"Adresse de l'endroit","Second-Interval":"Créneau de Collecte : Deuxième Entracte",Selected:"Sélectionner tous les menus(","Short name":"Prénom","Slot name":"Prénom","Sorry, but there's been an error processing your request.":"Désolés, mais il y a eu une erreur lors du traitement de votre demande.","Start Date":"Date de début","Start Time":"Heure de début","Start time:":"Heure de début",Subscriptions:"Descriptif","These show when you are open for ordering, such as performances or matches. They can be viewed from the front page of your app":"Il montreront quand vous êtes ouverts, comme pour des matchs ou spectacles. Ils seront visibles depuis la première page de l’application",Time:"Heure?","Time?":"Heure?",Tools:"Outils",Total:"Réarranger","Total Spent":"Total chiffre d'affaires","Venue Alerts":"Titre du lieu","Visible?":"Visible?","What's your event duration?":"Les jours où vous êtes ouverts",Yes:"Oui","Yes, delete this event!":"Oui, supprimer cet événement","Yes, delete this menu!":"Oui! Supprimer ce menu","You are currently subscribed to the":"Votre App est actuellement en ","You have an outstanding payment!":"Moyen de paiement","Your account will be billed":"Votre compte","Your account will be deactivated on":"Votre compte","Your events":"Vos événements","Your subscription has been cancelled":"Configurations du menu ont bien été enregistrées !","days to prevent your account from being deactivated.":"Votre compte",minutes:"Ce mois-ci","minutes and it":"Ce mois-ci"}),a.setStrings("nb_NO",{"ADD PAYMENT METHOD":"LEGG TIL BETALINGSMÅTE","Active?":"Aktiv?","Add a new event":"Legg til nytt arrangement","Add another slot":"Legg til nytt sted","Address Line 1":"Adresselinje 1","Address Line 2":"Adresselinje 2","Address Line 3":"Adresselinje 3",All:"Alle","All Locations":"Alle lokasjoner",Amount:"Beløp","Are you sure you want to delete this event? Note: all event data will be lost!":"Er du sikker på at du vil slette denne hendelsen? Merk: alle hendelses data vil gå tapt!","Are you sure you want to delete this menu? Note: all menu data will be lost!":"Er du sikker på at du vil slette denne menyen? Merk: alle meny data vil gå tapt!","BILLING HISTORY":"FAKTURA HISTORIKK","Billing Address":"Fakturaadresse","Billing History":"Faktura historikk","Billing Schedule":"Faktureringsplan","Business Name":"Navn på virksomhet",CANCEL:"AVBRYT",CCV:"CCV","CHANGE CARD":"ENDRE KORT","CHANGE DETAILS":"ENDRE DETALJER","CHANGE PASSWORD":"ENDRE PASSORD",CSV:"CSV","Card Number":"Kortnummer","Card ending":"Siste siffer i kortnummer","Choose a Collection Slot":"Velg et sted","Choose preset:":"Velg forhåndsinnstilling:","Click to add a description":"Klikk for å legge inn en beskrivelse","Click to add an event name":"Klikk for å legge et arrangement navn",Collapse:"Trekk sammen","Collection Slot":"Velg et sted","Collection Slot: Half-Time":"Samlingssted: Halv tid","Collection Slot: Interval":"Samlingssted: Interval","Collection Slot: Post-Game":"Samlingssted: Etter kamp","Collection Slot: Post-Show":"Samlingssted: Etter show","Collection Slot: Pre-Game":"Samlingssted: Før kamp","Collection Slot: Pre-Show":"Samlingssted: Før show","Collection Slot: Second-Interval":"Samlingssted: Andre interval",Confirm:"Bekreft","Credit Card Name":"Kredittkortnummer","Credit Card Number":"Kredittkortnummer",Customer:"Kunde",Customers:"Kunder","DD/MM/YYYY":"DD/MM/ÅÅÅÅ","DOWNLOAD PDF":"LAST NED PDF",Date:"Dato","Date Range:":"Datointerval","Date/Time":"Dato/tid","Date?":"Dato?","Default delivery time (minutes)":"Standard leveringstid (minutter)",Delete:"Slett","Delete this slot":"Slett denne delen","Delivery Areas":"Leveringsområder","Delivery Settings":"Leveringsinnstillinger","Delivery charge":"Leveringskostnad",Description:"Beskrivelse",Discount:"Rabatt","Discount offered for delivery orders (%)":"Rabatt ved ordre for levering (%)",Done:"Fullført",Duplicate:"Dupliser","Duration:":"Opprette meny",Edit:"Rediger","Email Address":"E-postadresse","Email address":"E-postadresse","Email address for receiving venue alerts":"E-postadresse for å motta butikk varsler","Enable delivery services":"Aktiver leveringstjenester","End Time":"Slutt tidspunkt","Enter a number":"Kortnummer",Event:"Arrangement","Event description:":"Bedriftens beskrivelse","Event name:":"Arrangementer:",Events:"Arrangementer","Events:":"Arrangementer:",Expires:"Utløper","Export as...":"Eksporter som...","First Name":"Fornavn","Free delivery for orders above":"Gratis levering for ordre over","HH:MM":"TT:MM","Half-Time":"Tid","In addition to the fulfilment app, you can also receive email updates to notify when you have received a new order":"I tillegg til appen kan du motta varsling på e-post når du har mottatt en ny ordre","In case of customer queries contact:":"Ved kundehenvendelser kontakt:","Inv no.":"Faktura nr.",Item:"Vare",Items:"Varer","Know your customers":"Bli kjent med dine kunder","Last Name":"Etternavn","Live Stream":"Live aktivitet","Live stream":"Live aktivitet",MM:"MM","Menu items":"Menyelementer",Metrics:"Analyser","Minimum order value to qualify for delivery":"Minimumsbeløp for levering",Minutes:"minutter siden","My Account":"Min konto","My Subscriptions":"Mine abonnementer",Name:"Navn","Name on card":"Navn på kortet","New Password":"Nytt passord","New event":"Legg til nytt arrangement",No:"Nei","No Data":"Ingen data","No, go back.":"Nei, gå tilbake.","Old Password":"Gammelt passord",Order:"Bestill","Order Rejection Alerts":"Varsel for avvist ordre","Order Status Alerts":"Varsel for ordrestatus","Order Total":"Ordre total",Orders:"Ordre",Outlet:"Utsalgssted","Outlet Name:":"Utsalgsstedets navn:","Outlet location:":"Utsalgsstedets navn:",PDF:"PDF",Password:"Passord",Payment:"Betaling","Payment Methods":"Betalingsmetoder","Please add a credit card to resubscribe":"Vennligst legg til kortdetaljer for å aktivere abonnementet.","Please add a payment method to keep your account active":"Vennligst legg til en betalingsmåte for å holde kontoen din aktiv","Please choose a slot.":"Velg et sted","Please enter a message and a short name or remove this notification.":"Skriv inn en melding og et kallenavn eller fjern dette varselet.","Please enter a valid number (e.g. 20.52)":"Skriv inn et gyldig nummer (f.eks 200,00)","Please enter a valid number (e.g. 3.25)":"Skriv inn et gyldig nummer (f.eks 45,00)","Please enter a valid telephone number":"Skriv inn et gyldig telefonnummer","Please enter a valid time interval in minutes (e.g. 20)":"Skriv inn gyldig tidsintervall i minutter (f.eks 20)","Please enter both the notification and a short name.":"Vennligst oppgi både varsling og et kort navn.","Please provide a discount percentage (between 0 and 100)":"Vennligst oppgi rabatt i prosent (mellom 0 og 100)","Please type a delivery zone (max 200chars)":"Vennligst skriv inn et leveringsområde (maks 200 bokstaver)","Please type a description (max 250chars)":"Skriv inn en beskrivelse (maks 250 bokstaver)","Please type a valid email address":"Vennligst skriv inn en gyldig e-postadresse","Please type an event name (max 100 chars)":"Skriv inn et arrangement navn (maks 100 bokstaver)","Please type an event name (max 100chars)":"Skriv inn et arrangement navn (maks 100 bokstaver)","Please type your account name.(max 100chars)":"Vennligst skriv inn kontonavn. (maks 100 bokstaver)","Please type your first name.(max 100chars)":"Vennligst skriv fornavnet ditt. (maks 100 bokstaver)","Please type your last name.(max 100chars)":"Vennligst skriv etternavnet ditt. (maks 100 bokstaver)","Please update your card details within":"Vennligst oppdater kortdetaljene innen",Postcode:"Postnummer","Preset Notifications":"Forhåndsinnstilte påminnelser","Preset customer notifications, sent by email and push alert":"Forhåndsinnstilte kundemeldinger, som sendes via e-post og push-varsling","Preset order rejection notifications, sent by email and push alert":"Forhåndsinnstilte avvisnings meldinger, som sendes via e-post og push-varsling",Profile:"Profil","Quantity Ordered":"Antall bestilt",RESUBSCRIBE:"REAKTIVER ABONNEMENT",Refresh:"Oppdater",Reports:"Rapporter",SAVE:"LAGRE","SAVE CHANGES":"LAGRE ENDRINGER","SAVING...":"LAGRER...",Schedule:"Faktureringsplan","Second-Interval":"Samlingssted: Andre interval",Selected:"Valgte","Short name":"Kallenavn","Slot name":"Kallenavn","Sorry, but there's been an error processing your request.":"Beklager, men det var en feil ved behandling av forespørselen.","Start Date":"Start dato","Start Time":"Start tidspunkt","Start time:":"Start tidspunkt",Status:"Status",Stock:"Varebeholdning",Subscriptions:"Abonnementer",TOTAL:"TOTALT","These show when you are open for ordering, such as performances or matches. They can be viewed from the front page of your app":"Disse viser når du har åpent for bestilling, som for eksempel forestillinger eller kamper. De kan sees fra forsiden av din app",Time:"Tid","Time?":"Tid?",Tools:"Verktøy",Total:"Total","Total Spent":"Totalt brukt","Town/City":"Poststed",UPGRADE:"OPPGRADER","Venue Alerts":"Varsler for utsalgssted","Visible?":"Synlig?","What's your event duration?":"Dagene din restaurant er åpen",YY:"ÅÅ",Yes:"Ja","Yes, delete this event!":"Ja, slett denne hendelsen!","Yes, delete this menu!":"Ja, slett denne menyen!","You are currently subscribed to the":"Du abonnerer for øyeblikket på","You have an outstanding payment!":"Du har en utestående betaling!","You have no active subscriptions, your account will not be billed at this time.":"Du har ingen aktive abonnementer, din konto vil ikke bli fakturert på dette tidspunktet.","Your account will be billed":"Din konto vil bli fakturert","Your account will be deactivated on":"Din konto vil bli deaktivert den","Your events":"Dine arrangementer","Your free trial of this subscription will end at midnight on":"Din gratis prøveversjon av dette abonnementet vil avsluttes ved midnatt","Your subscription has been cancelled":"Abonnementet er kansellert","days to prevent your account from being deactivated.":"dager for å hindre at kontoen din blir deaktivert.",'eg. \\"NW1, NW2...\\"':'f.eks. \\"3210, 3211...\\"',minutes:"minutter siden","minutes and it":"minutter siden","package":"pakke",to:"til"})}]),function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){function c(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function d(a){function b(a){return O[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function e(a,b){for(var c=0,d=b.length;d>c;c+=1)if(g(a,b[c]))return c;return-1}function f(){var b=a(N);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function g(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function h(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function i(a){return a.outerWidth(!1)-a.width()}function j(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function k(c){c.on("mousemove",function(c){var d=M;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function l(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function m(a,b){var c=l(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){e(a.target,b.get())>=0&&c(a)})}function n(a){a[0]!==document.activeElement&&window.setTimeout(function(){var b,c=a[0],d=a.val().length;a.focus();var e=c.offsetWidth>0||c.offsetHeight>0;e&&c===document.activeElement&&(c.setSelectionRange?c.setSelectionRange(d,d):c.createTextRange&&(b=c.createTextRange(),b.collapse(!1),b.select()))},0)}function o(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function p(a){a.preventDefault(),a.stopPropagation()}function q(a){a.preventDefault(),a.stopImmediatePropagation()}function r(b){if(!J){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);J=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),J.attr("class","select2-sizer"),a("body").append(J)}return J.text(b.val()),J.width()}function s(b,c,d){var e,f,g=[];e=b.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){0===this.indexOf("select2-")&&g.push(this)})),e=c.attr("class"),e&&(e=""+e,a(e.split(" ")).each2(function(){0!==this.indexOf("select2-")&&(f=d(this),f&&g.push(f))})),b.attr("class",g.join(" "))}function t(a,b,c,e){var f=d(a.toUpperCase()).indexOf(d(b.toUpperCase())),g=b.length;return 0>f?void c.push(e(a)):(c.push(e(a.substring(0,f))),c.push("<span class='select2-match'>"),c.push(e(a.substring(f,f+g))),c.push("</span>"),void c.push(e(a.substring(f+g,a.length))))}function u(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function v(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page);i.callback(b)}}),e=j.call(h,l)},f)}}function w(b){var c,d,e=b,f=function(a){return""+a.text};a.isArray(e)&&(d=e,e={results:d}),a.isFunction(e)===!1&&(d=e,e=function(){return d});var g=e();return g.text&&(f=g.text,a.isFunction(f)||(c=g.text,f=function(a){return a[c]})),function(b){var c,d=b.term,g={results:[]};return""===d?void b.callback(e()):(c=function(e,g){var h,i;if(e=e[0],e.children){h={};for(i in e)e.hasOwnProperty(i)&&(h[i]=e[i]);h.children=[],a(e.children).each2(function(a,b){c(b,h.children)}),(h.children.length||b.matcher(d,f(h),e))&&g.push(h)}else b.matcher(d,f(e),e)&&g.push(e)},a(e().results).each2(function(a,b){c(b,g.results)
}),void b.callback(g))}}function x(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function y(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function z(b){if(a.isFunction(b)){var c=Array.prototype.slice.call(arguments,1);return b.apply(null,c)}return b}function A(b){var c=0;return a.each(b,function(a,b){b.children?c+=A(b.children):c++}),c}function B(a,c,d,e){var f,h,i,j,k,l=a,m=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(h=-1,i=0,j=e.tokenSeparators.length;j>i&&(k=e.tokenSeparators[i],h=a.indexOf(k),!(h>=0));i++);if(0>h)break;if(f=a.substring(0,h),a=a.substring(h+k.length),f.length>0&&(f=e.createSearchChoice.call(this,f,c),f!==b&&null!==f&&e.id(f)!==b&&null!==e.id(f))){for(m=!1,i=0,j=c.length;j>i;i++)if(g(e.id(f),e.id(c[i]))){m=!0;break}m||d(f)}}return l!==a?a:void 0}function C(){var a=this;Array.prototype.forEach.call(arguments,function(b){a[b].remove(),a[b]=null})}function D(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var E,F,G,H,I,J,K,L,M={x:0,y:0},E={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case E.LEFT:case E.RIGHT:case E.UP:case E.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case E.SHIFT:case E.CTRL:case E.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},N="<div class='select2-measure-scrollbar'></div>",O={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z"};K=a(document),I=function(){var a=1;return function(){return a++}}(),K.on("mousemove",function(a){M.x=a.pageX,M.y=a.pageY}),F=D(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,g=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+I()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(z(c.containerCss)),this.container.addClass(z(c.containerCssClass)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",p),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(c.dropdownCssClass)),this.dropdown.data("select2",this),this.dropdown.on("click",p),this.results=d=this.container.find(g),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",p),k(this.results),this.dropdown.on("mousemove-filtered",g,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",g,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",g,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",g,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),m(80,this.results),this.dropdown.on("scroll-debounced",g,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),p(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),p(a))}),j(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",g,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),L=L||f(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2");this.close(),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:g(a.attr("locked"),"locked")||g(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,i,j=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,h=this.opts.id,i=this.liveRegion;(g=function(d,e,k){var l,m,n,o,p,q,r,s,t,u;for(d=c.sortResults(d,e,f),l=0,m=d.length;m>l;l+=1)n=d[l],p=n.disabled===!0,o=!p&&h(n)!==b,q=n.children&&n.children.length>0,r=a("<li></li>"),r.addClass("select2-results-dept-"+k),r.addClass("select2-result"),r.addClass(o?"select2-result-selectable":"select2-result-unselectable"),p&&r.addClass("select2-disabled"),q&&r.addClass("select2-result-with-children"),r.addClass(j.opts.formatResultCssClass(n)),r.attr("role","presentation"),s=a(document.createElement("div")),s.addClass("select2-result-label"),s.attr("id","select2-result-label-"+I()),s.attr("role","option"),u=c.formatResult(n,s,f,j.opts.escapeMarkup),u!==b&&(s.html(u),r.append(s)),q&&(t=a("<ul></ul>"),t.addClass("select2-result-sub"),g(n.children,t,k+1),r.append(t)),r.data("select2-data",n),e.append(r);i.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var c,e,f,g={results:[],more:!1},h=a.term;f=function(b,c){var d;b.is("option")?a.matcher(h,b.text(),b)&&c.push(j.optionToData(b)):b.is("optgroup")&&(d=j.optionToData(b),b.children().each2(function(a,b){f(b,d.children)}),d.children.length>0&&c.push(d))},c=d.children(),this.getPlaceholder()!==b&&c.length>0&&(e=this.getPlaceholderOption(),e&&(c=c.not(e))),c.each2(function(a,b){f(b,g.results)}),a.callback(g)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(i=c.element.data("ajax-url"),i&&i.length>0&&(c.ajax.url=i),c.query=v.call(c.element,c.ajax)):"data"in c?c.query=w(c.data):"tags"in c&&(c.query=x(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(h(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return g(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var a,c,d=this.opts.element;d.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),a=this.bind(function(){var a=d.prop("disabled");a===b&&(a=!1),this.enable(!a);var c=d.prop("readonly");c===b&&(c=!1),this.readonly(c),s(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(z(this.opts.containerCssClass)),s(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(z(this.opts.dropdownCssClass))}),d.length&&d[0].attachEvent&&d.each(function(){this.attachEvent("onpropertychange",a)}),c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,c!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new c(function(b){b.forEach(a)}),this.propertyObserver.observe(d.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var b,c,d,e,f,g=this.dropdown,h=this.container.offset(),i=this.container.outerHeight(!1),j=this.container.outerWidth(!1),k=g.outerHeight(!1),l=a(window),m=l.width(),n=l.height(),o=l.scrollLeft()+m,p=l.scrollTop()+n,q=h.top+i,r=h.left,s=p>=q+k,t=h.top-k>=l.scrollTop(),u=g.outerWidth(!1),v=o>=r+u,w=g.hasClass("select2-drop-above");w?(c=!0,!t&&s&&(d=!0,c=!1)):(c=!1,!s&&t&&(d=!0,c=!0)),d&&(g.hide(),h=this.container.offset(),i=this.container.outerHeight(!1),j=this.container.outerWidth(!1),k=g.outerHeight(!1),o=l.scrollLeft()+m,p=l.scrollTop()+n,q=h.top+i,r=h.left,u=g.outerWidth(!1),v=o>=r+u,g.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(f=a(".select2-results",g)[0],g.addClass("select2-drop-auto-width"),g.css("width",""),u=g.outerWidth(!1)+(f.scrollHeight===f.clientHeight?0:L.width),u>j?j=u:u=j,k=g.outerHeight(!1),v=o>=r+u):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(b=this.body.offset(),q-=b.top,r-=b.left),v||(r=h.left+this.container.outerWidth(!1)-u),e={left:r,width:j},c?(e.top=h.top-k,e.bottom="auto",this.container.addClass("select2-drop-above"),g.addClass("select2-drop-above")):(e.top=q,e.bottom="auto",this.container.removeClass("select2-drop-above"),g.removeClass("select2-drop-above")),e=a.extend(e,z(this.opts.dropdownCss)),g.css(e)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),!0):!1},opening:function(){var b,d=this.containerEventName,e="scroll."+d,f="resize."+d,g="orientationchange."+d;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),b=a("#select2-drop-mask"),0==b.length&&(b=a(document.createElement("div")),b.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),b.hide(),b.appendTo(this.body),b.on("mousedown touchstart click",function(d){c(b);var e,f=a("#select2-drop");f.length>0&&(e=f.data("select2"),e.opts.selectOnBlur&&e.selectHighlighted({noFocus:!0}),e.close(),d.preventDefault(),d.stopPropagation())})),this.dropdown.prev()[0]!==b[0]&&this.dropdown.before(b),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),b.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var h=this;this.container.parents().add(window).each(function(){a(this).on(f+" "+e+" "+g,function(){h.opened()&&h.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return z(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var b,c,d,e,f,g,h,i=this.results;if(c=this.highlight(),!(0>c)){if(0==c)return void i.scrollTop(0);b=this.findHighlightableChoices().find(".select2-result-label"),d=a(b[c]),e=d.offset().top+d.outerHeight(!0),c===b.length-1&&(h=i.find("li.select2-more-results"),h.length>0&&(e=h.offset().top+h.outerHeight(!0))),f=i.offset().top+i.outerHeight(!0),e>f&&i.scrollTop(i.scrollTop()+(e-f)),g=d.offset().top-i.offset().top,0>g&&"none"!=d.css("display")&&i.scrollTop(i.scrollTop()+g)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var c,d,f=this.findHighlightableChoices();return 0===arguments.length?e(f.filter(".select2-highlighted")[0],f.get()):(b>=f.length&&(b=f.length-1),0>b&&(b=0),this.removeHighlight(),c=a(f[b]),c.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",c.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(c.text()),d=c.data("select2-data"),void(d&&this.opts.element.trigger({type:"select2-highlight",val:this.id(d),choice:d})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a,b=this.results,c=b.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==c.length&&(a=c.offset().top-b.offset().top-b.height(),a<=this.opts.loadMorePadding&&(c.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(a){e.opened()&&(e.opts.populateResults.call(this,b,a.results,{term:f,page:d,context:g}),e.postprocessResults(a,!1,!1),a.more===!0?(c.detach().appendTo(b).text(z(e.opts.formatLoadMore,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):c.remove(),e.positionDropdown(),e.resultsPage=d,e.context=a.context,this.opts.element.trigger({type:"select2-loaded",items:a}))})})))},tokenize:function(){},updateResults:function(c){function d(){j.removeClass("select2-active"),m.positionDropdown(),m.liveRegion.text(k.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?k.text():m.opts.formatMatches(k.find(".select2-result-selectable").length))}function e(a){k.html(a),d()}var f,h,i,j=this.search,k=this.results,l=this.opts,m=this,n=j.val(),o=a.data(this.container,"select2-last-term");if((c===!0||!o||!g(n,o))&&(a.data(this.container,"select2-last-term",n),c===!0||this.showSearchInput!==!1&&this.opened())){i=++this.queryCount;var p=this.getMaximumSelectionSize();if(p>=1&&(f=this.data(),a.isArray(f)&&f.length>=p&&y(l.formatSelectionTooBig,"formatSelectionTooBig")))return void e("<li class='select2-selection-limit'>"+z(l.formatSelectionTooBig,p)+"</li>");if(j.val().length<l.minimumInputLength)return e(y(l.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+z(l.formatInputTooShort,j.val(),l.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(l.maximumInputLength&&j.val().length>l.maximumInputLength)return void e(y(l.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+z(l.formatInputTooLong,j.val(),l.maximumInputLength)+"</li>":"");l.formatSearching&&0===this.findHighlightableChoices().length&&e("<li class='select2-searching'>"+z(l.formatSearching)+"</li>"),j.addClass("select2-active"),this.removeHighlight(),h=this.tokenize(),h!=b&&null!=h&&j.val(h),this.resultsPage=1,l.query({element:l.element,term:j.val(),page:this.resultsPage,context:null,matcher:l.matcher,callback:this.bind(function(f){var h;if(i==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=f.context===b?null:f.context,this.opts.createSearchChoice&&""!==j.val()&&(h=this.opts.createSearchChoice.call(m,j.val(),f.results),h!==b&&null!==h&&m.id(h)!==b&&null!==m.id(h)&&0===a(f.results).filter(function(){return g(m.id(this),m.id(h))}).length&&this.opts.createSearchChoicePosition(f.results,h)),0===f.results.length&&y(l.formatNoMatches,"formatNoMatches"))return void e("<li class='select2-no-results'>"+z(l.formatNoMatches,j.val())+"</li>");k.empty(),m.opts.populateResults.call(this,k,f.results,{term:j.val(),page:this.resultsPage,context:null}),f.more===!0&&y(l.formatLoadMore,"formatLoadMore")&&(k.append("<li class='select2-more-results'>"+m.opts.escapeMarkup(z(l.formatLoadMore,this.resultsPage))+"</li>"),window.setTimeout(function(){m.loadMoreIfNeeded()},10)),this.postprocessResults(f,c),d(),this.opts.element.trigger({type:"select2-loaded",items:f})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){n(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),G=D(F,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var b,d,e=this.container,f=this.dropdown,g=I();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=b=e.find(".select2-choice"),this.focusser=e.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+g),this.focusser.attr("aria-labelledby","select2-chosen-"+g),this.results.attr("id","select2-results-"+g),this.search.attr("aria-owns","select2-results-"+g),this.focusser.attr("id","s2id_autogen"+g),d=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(d.text()).attr("for",this.focusser.attr("id"));var h=this.opts.element.attr("title");this.opts.element.attr("title",h||d.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){if(a.which===E.PAGE_UP||a.which===E.PAGE_DOWN)return void p(a);
switch(a.which){case E.UP:case E.DOWN:return this.moveHighlight(a.which===E.UP?-1:1),void p(a);case E.ENTER:return this.selectHighlighted(),void p(a);case E.TAB:return void this.selectHighlighted({noFocus:!0});case E.ESC:return this.cancel(a),void p(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==E.TAB&&!E.isControl(a)&&!E.isFunctionKey(a)&&a.which!==E.ESC){if(this.opts.openOnEnter===!1&&a.which===E.ENTER)return void p(a);if(a.which==E.DOWN||a.which==E.UP||a.which==E.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void p(a)}return a.which==E.DELETE||a.which==E.BACKSPACE?(this.opts.allowClear&&this.clear(),void p(a)):void 0}})),j(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),q(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(d){c(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),p(d)})),f.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){p(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.setPlaceholder(),a.nextSearchTerm=a.opts.nextSearchTerm(c,a.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var h=g(e,b.id(d));return h&&(f=d),h},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return g(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&this.highlight(b===!0&&d>=0?d:0),b===!0){var f=this.opts.minimumResultsForSearch;f>=0&&this.showSearch(A(a.results)>=f)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),g(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var c,d,e=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),e.empty(),null!==a&&(c=this.opts.formatSelection(a,e,this.opts.escapeMarkup)),c!==b&&e.append(c),d=this.opts.formatSelectionCssClass(a,e),d!==b&&e.addClass(d),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),H=D(F,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=h(c.val(),b.separator),f=[];b.query({matcher:function(c,d,h){var i=a.grep(e,function(a){return g(a,b.id(h))}).length;return i&&f.push(h),i},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var h=e[c],i=0;i<f.length;i++){var j=f[i];if(g(h,b.id(j))){a.push(j),f.splice(i,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var b,c=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=b=this.container.find(c);var d=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){d.search[0].focus(),d.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+I()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var c=b.find(".select2-search-choice-focus"),d=c.prev(".select2-search-choice:not(.select2-locked)"),e=c.next(".select2-search-choice:not(.select2-locked)"),f=o(this.search);if(c.length&&(a.which==E.LEFT||a.which==E.RIGHT||a.which==E.BACKSPACE||a.which==E.DELETE||a.which==E.ENTER)){var g=c;return a.which==E.LEFT&&d.length?g=d:a.which==E.RIGHT?g=e.length?e:null:a.which===E.BACKSPACE?this.unselect(c.first())&&(this.search.width(10),g=d.length?d:e):a.which==E.DELETE?this.unselect(c.first())&&(this.search.width(10),g=e.length?e:null):a.which==E.ENTER&&(g=null),this.selectChoice(g),p(a),void(g&&g.length||this.open())}if((a.which===E.BACKSPACE&&1==this.keydowns||a.which==E.LEFT)&&0==f.offset&&!f.length)return this.selectChoice(b.find(".select2-search-choice:not(.select2-locked)").last()),void p(a);if(this.selectChoice(null),this.opened())switch(a.which){case E.UP:case E.DOWN:return this.moveHighlight(a.which===E.UP?-1:1),void p(a);case E.ENTER:return this.selectHighlighted(),void p(a);case E.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case E.ESC:return this.cancel(a),void p(a)}if(a.which!==E.TAB&&!E.isControl(a)&&!E.isFunctionKey(a)&&a.which!==E.BACKSPACE&&a.which!==E.ESC){if(a.which===E.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===E.PAGE_UP||a.which===E.PAGE_DOWN)&&p(a),a.which===E.ENTER&&p(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",c,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",c,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(c){c!==b&&null!==c&&(a.updateSelection(c),a.close(),a.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],f=this;a(b).each(function(){e(f.id(this),c)<0&&(c.push(f.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){f.addSelectedChoice(this)}),f.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var d,e,f=!c.locked,g=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),h=a("<li class='select2-search-choice select2-locked'><div></div></li>"),i=f?g:h,j=this.id(c),k=this.getVal();d=this.opts.formatSelection(c,i.find("div"),this.opts.escapeMarkup),d!=b&&i.find("div").replaceWith("<div>"+d+"</div>"),e=this.opts.formatSelectionCssClass(c,i.find("div")),e!=b&&i.addClass(e),f&&i.find(".select2-search-choice-close").on("mousedown",p).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),p(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),i.data("select2-data",c),i.insertBefore(this.searchContainer),k.push(j),this.setVal(k)},unselect:function(b){var c,d,f=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(c=b.data("select2-data")){var g=a.Event("select2-removing");if(g.val=this.id(c),g.choice=c,this.opts.element.trigger(g),g.isDefaultPrevented())return!1;for(;(d=e(this.id(c),f))>=0;)f.splice(d,1),this.setVal(f),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),f=this.results.find(".select2-result"),g=this.results.find(".select2-result-with-children"),h=this;f.each2(function(a,b){var c=h.id(b.data("select2-data"));e(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),g.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&h.highlight(0),!this.opts.createSearchChoice&&!f.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&y(h.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+z(h.opts.formatNoMatches,h.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-i(this.search)},resizeSearch:function(){var a,b,c,d,e,f=i(this.search);a=r(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),h(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){e(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)g(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var d,e,f=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(e=this.data(),b||(b=[]),d=a.map(b,function(a){return f.opts.id(a)}),this.setVal(d),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(e,this.data())),void 0)}}),a.fn.select2=function(){var c,d,f,g,h,i=Array.prototype.slice.call(arguments,0),j=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],k=["opened","isFocused","container","dropdown"],l=["val","data"],m={search:"externalSearch"};return this.each(function(){if(0===i.length||"object"==typeof i[0])c=0===i.length?{}:a.extend({},i[0]),c.element=a(this),"select"===c.element.get(0).tagName.toLowerCase()?h=c.element.prop("multiple"):(h=c.multiple||!1,"tags"in c&&(c.multiple=h=!0)),d=h?new window.Select2["class"].multi:new window.Select2["class"].single,d.init(c);else{if("string"!=typeof i[0])throw"Invalid arguments to select2 plugin: "+i;if(e(i[0],j)<0)throw"Unknown method: "+i[0];if(g=b,d=a(this).data("select2"),d===b)return;if(f=i[0],"container"===f?g=d.container:"dropdown"===f?g=d.dropdown:(m[f]&&(f=m[f]),g=d[f].apply(d,i.slice(1))),e(i[0],k)>=0||e(i[0],l)>=0&&1==i.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return t(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},formatMatches:function(a){return a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return d(""+b).toUpperCase().indexOf(d(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:B,escapeMarkup:u,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:v,local:w,tags:x},util:{debounce:l,markMatch:t,escapeMarkup:u,stripDiacritics:d},"class":{"abstract":F,single:G,multi:H}}}}(jQuery),!function(a,b){function c(a,b,c){var d=a.children(),e=!1;a.empty();for(var g=0,h=d.length;h>g;g++){var i=d.eq(g);if(a.append(i),c&&a.append(c),f(a,b)){i.remove(),e=!0;break}c&&c.detach()}return e}function d(b,c,g,h,i){var j=!1,k="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",l="script, .dotdotdot-keep";return b.contents().detach().each(function(){var m=this,n=a(m);if("undefined"==typeof m||3==m.nodeType&&0==a.trim(m.data).length)return!0;if(n.is(l))b.append(n);else{if(j)return!0;b.append(n),i&&b[b.is(k)?"after":"append"](i),f(g,h)&&(j=3==m.nodeType?e(n,c,g,h,i):d(n,c,g,h,i),j||(n.detach(),j=!0)),j||i&&i.detach()}}),j}function e(b,c,d,e,h){var k=b[0];if(!k)return!1;var m=j(k),n=-1!==m.indexOf(" ")?" ":"　",o="letter"==e.wrap?"":n,p=m.split(o),q=-1,r=-1,s=0,t=p.length-1;for(e.fallbackToLetter&&0==s&&0==t&&(o="",p=m.split(o),t=p.length-1);t>=s&&(0!=s||0!=t);){var u=Math.floor((s+t)/2);if(u==r)break;r=u,i(k,p.slice(0,r+1).join(o)+e.ellipsis),f(d,e)?(t=r,e.fallbackToLetter&&0==s&&0==t&&(o="",p=p[0].split(o),q=-1,r=-1,s=0,t=p.length-1)):(q=r,s=r)}if(-1==q||1==p.length&&0==p[0].length){var v=b.parent();b.detach();var w=h&&h.closest(v).length?h.length:0;v.contents().length>w?k=l(v.contents().eq(-1-w),c):(k=l(v,c,!0),w||v.detach()),k&&(m=g(j(k),e),i(k,m),w&&h&&a(k).parent().append(h))}else m=g(p.slice(0,q+1).join(o),e),i(k,m);return!0}function f(a,b){return a.innerHeight()>b.maxHeight}function g(b,c){for(;a.inArray(b.slice(-1),c.lastCharacter.remove)>-1;)b=b.slice(0,-1);return a.inArray(b.slice(-1),c.lastCharacter.noEllipsis)<0&&(b+=c.ellipsis),b}function h(a){return{width:a.innerWidth(),height:a.innerHeight()}}function i(a,b){a.innerText?a.innerText=b:a.nodeValue?a.nodeValue=b:a.textContent&&(a.textContent=b)}function j(a){return a.innerText?a.innerText:a.nodeValue?a.nodeValue:a.textContent?a.textContent:""}function k(a){do a=a.previousSibling;while(a&&1!==a.nodeType&&3!==a.nodeType);return a}function l(b,c,d){var e,f=b&&b[0];if(f){if(!d){if(3===f.nodeType)return f;if(a.trim(b.text()))return l(b.contents().last(),c)}for(e=k(f);!e;){if(b=b.parent(),b.is(c)||!b.length)return!1;e=k(b[0])}if(e)return l(a(e),c)}return!1}function m(b,c){return b?"string"==typeof b?(b=a(b,c),b.length?b:!1):b.jquery?b:!1:!1}function n(a){for(var b=a.innerHeight(),c=["paddingTop","paddingBottom"],d=0,e=c.length;e>d;d++){var f=parseInt(a.css(c[d]),10);isNaN(f)&&(f=0),b-=f}return b}if(!a.fn.dotdotdot){a.fn.dotdotdot=function(b){if(0==this.length)return a.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){a(this).dotdotdot(b)});var e=this;e.data("dotdotdot")&&e.trigger("destroy.dot"),e.data("dotdotdot-style",e.attr("style")||""),e.css("word-wrap","break-word"),"nowrap"===e.css("white-space")&&e.css("white-space","normal"),e.bind_events=function(){return e.bind("update.dot",function(b,h){b.preventDefault(),b.stopPropagation(),i.maxHeight="number"==typeof i.height?i.height:n(e),i.maxHeight+=i.tolerance,"undefined"!=typeof h&&(("string"==typeof h||h instanceof HTMLElement)&&(h=a("<div />").append(h).contents()),h instanceof a&&(g=h)),p=e.wrapInner('<div class="dotdotdot" />').children(),p.contents().detach().end().append(g.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var k=!1,l=!1;return j.afterElement&&(k=j.afterElement.clone(!0),k.show(),j.afterElement.detach()),f(p,i)&&(l="children"==i.wrap?c(p,i,k):d(p,e,p,i,k)),p.replaceWith(p.contents()),p=null,a.isFunction(i.callback)&&i.callback.call(e[0],l,g),j.isTruncated=l,l}).bind("isTruncated.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],j.isTruncated),j.isTruncated}).bind("originalContent.dot",function(a,b){return a.preventDefault(),a.stopPropagation(),"function"==typeof b&&b.call(e[0],g),g}).bind("destroy.dot",function(a){a.preventDefault(),a.stopPropagation(),e.unwatch().unbind_events().contents().detach().end().append(g).attr("style",e.data("dotdotdot-style")||"").data("dotdotdot",!1)}),e},e.unbind_events=function(){return e.unbind(".dot"),e},e.watch=function(){if(e.unwatch(),"window"==i.watch){var b=a(window),c=b.width(),d=b.height();b.bind("resize.dot"+j.dotId,function(){c==b.width()&&d==b.height()&&i.windowResizeFix||(c=b.width(),d=b.height(),l&&clearInterval(l),l=setTimeout(function(){e.trigger("update.dot")},100))})}else k=h(e),l=setInterval(function(){if(e.is(":visible")){var a=h(e);(k.width!=a.width||k.height!=a.height)&&(e.trigger("update.dot"),k=a)}},500);return e},e.unwatch=function(){return a(window).unbind("resize.dot"+j.dotId),l&&clearInterval(l),e};var g=e.contents(),i=a.extend(!0,{},a.fn.dotdotdot.defaults,b),j={},k={},l=null,p=null;return i.lastCharacter.remove instanceof Array||(i.lastCharacter.remove=a.fn.dotdotdot.defaultArrays.lastCharacter.remove),i.lastCharacter.noEllipsis instanceof Array||(i.lastCharacter.noEllipsis=a.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),j.afterElement=m(i.after,e),j.isTruncated=!1,j.dotId=o++,e.data("dotdotdot",!0).bind_events().trigger("update.dot"),i.watch&&e.watch(),e},a.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},a.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},a.fn.dotdotdot.debug=function(){};var o=1,p=a.fn.html;a.fn.html=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?this.trigger("update",[c]):p.apply(this,arguments)};var q=a.fn.text;a.fn.text=function(c){return c!=b&&!a.isFunction(c)&&this.data("dotdotdot")?(c=a("<div />").text(c).html(),this.trigger("update",[c])):q.apply(this,arguments)}}}(jQuery),angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(a,b){var c={};return a&&angular.extend(c,a),{require:"ngModel",priority:1,compile:function(a,d){var e,f,g,h=a.is("select"),i=angular.isDefined(d.multiple);return a.is("select")&&(f=a.find("option[ng-repeat], option[data-ng-repeat]"),f.length&&(g=f.attr("ng-repeat")||f.attr("data-ng-repeat"),e=jQuery.trim(g.split("|")[0]).split(" ").pop())),function(a,f,g,j){var k=angular.extend({},c,a.$eval(g.uiSelect2)),l=function(a){var b;return k.simple_tags?(b=[],angular.forEach(a,function(a){b.push(a.id)})):b=a,b},m=function(a){var b=[];return a?(k.simple_tags?(b=[],angular.forEach(a,function(a){b.push({id:a,text:a})})):b=a,b):b};if(h?(delete k.multiple,delete k.initSelection):i&&(k.multiple=!0),j&&(a.$watch(d.ngModel,function(a,b){a&&a!==b&&j.$render()},!0),j.$render=function(){if(h)f.select2("val",j.$viewValue);else if(k.multiple){var a=j.$viewValue;angular.isString(a)&&(a=a.split(",")),f.select2("data",m(a))}else angular.isObject(j.$viewValue)?f.select2("data",j.$viewValue):j.$viewValue?f.select2("val",j.$viewValue):f.select2("data",null)},e&&a.$watch(e,function(a,c){angular.equals(a,c)||b(function(){f.select2("val",j.$viewValue),f.trigger("change"),a&&!c&&j.$setPristine&&j.$setPristine(!0)})}),j.$parsers.push(function(a){var b=f.prev();return b.toggleClass("ng-invalid",!j.$valid).toggleClass("ng-valid",j.$valid).toggleClass("ng-invalid-required",!j.$valid).toggleClass("ng-valid-required",j.$valid).toggleClass("ng-dirty",j.$dirty).toggleClass("ng-pristine",j.$pristine),a}),!h&&(f.bind("change",function(b){b.stopImmediatePropagation(),a.$$phase||a.$root.$$phase||a.$apply(function(){j.$setViewValue(l(f.select2("data")))})}),k.initSelection))){var n=k.initSelection;k.initSelection=function(a,b){n(a,function(a){j.$setViewValue(l(a)),b(a)})}}f.bind("$destroy",function(){f.select2("destroy")}),g.$observe("disabled",function(a){f.select2("enable",!a)}),g.$observe("readonly",function(a){f.select2("readonly",!!a)}),g.ngMultiple&&a.$watch(g.ngMultiple,function(a){g.$set("multiple",!!a),f.select2(k)}),b(function(){f.select2(k),f.val(j.$viewValue),j.$render(),k.initSelection||h||j.$setViewValue(l(f.select2("data")))})}}}}]),angular.module("kyc.controllers",[]),angular.module("kyc.resources",[]),angular.module("kyc.charts",[]),angular.module("kyc.services",[]),angular.module("kyc.directives",[]),angular.module("kyc.reports",[]),angular.module("kyc",["ngRoute","ngResource","ngSanitize","kyc.directives","kyc.resources","kyc.services","kyc.charts","kyc.controllers","kyc.resources","kyc.filters","kyc.reports","loaders","notification","mm.foundation","ui.select2","constants","gettext","webapp.components"]).run(["$rootScope","ACCOUNT_ID","LANG","gettextCatalog",function(a,b,c,d){a.requests=0;var e="en_GB";switch(c){case"de":e="de_DE";break;case"fr":e="fr_FR";break;case"nb":e="nb_NO"}"en_GB"!=e&&(d.currentLanguage=e)}]).config(["$routeProvider",function(a){a.when("/dashboard",{templateUrl:"/code/kyc/partials/dashboard.php",controller:"DashboardCtrl",resolve:{load:["$route","AllCharts","$AjaxInterceptor",function(a,b,c){return c.start(),b.promise}]}}),a.when("/stock",{templateUrl:"/code/kyc/partials/stock.php",controller:"StockCtrl",resolve:{load:["$route","OrderService","$AjaxInterceptor",function(a,b,c){return c.start(),b.load()}]}}),a.when("/customers",{templateUrl:"/code/kyc/partials/customers.php",controller:"CustomersCtrl",resolve:{load:["$route","OrderService","$AjaxInterceptor",function(a,b,c){return c.start(),b.load()}]}}),a.when("/reports",{templateUrl:"/code/kyc/partials/reports.php",controller:"ReportsCtrl",resolve:{load:["$route","AllReports","$AjaxInterceptor",function(a,b,c){return c.start(),b.init()}]}}),a.when("/stream",{templateUrl:"/code/kyc/partials/stream.php",controller:"StreamCtrl",resolve:{load:["$route","OrderService","$AjaxInterceptor",function(a,b,c){return c.start(),b.load()
}]}}),a.when("/events",{templateUrl:"/code/kyc/partials/events.php",controller:"EventsCtrl",resolve:{load:["$route","OrderService","$AjaxInterceptor",function(a,b,c){return c.start(),b.load()}]}}),a.when("/orders",{templateUrl:"/code/kyc/partials/orders.php",controller:"OrdersCtrl",resolve:{load:["$route","OrderService","$AjaxInterceptor",function(a,b,c){return c.start(),b.load()}]}}),a.otherwise({redirectTo:"/dashboard"})}]),angular.module("notification",["ngSanitize"]).controller("confirmModalController",["$scope","$modalInstance","data","deffered","$http","$templateCache","$compile","$sce","$timeout","AccountFeature","ACCOUNT_ID","VENUE_ID","USER_ID",function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n="/code/notification/templates/";if(a.title=c.title||"",a.discountCode="",a.appliedDiscount=!1,c.hasOwnProperty("templateFullUrl")&&c.templateFullUrl)angular.extend(a,c.scope);else if(c.hasOwnProperty("templateUrl")&&c.templateUrl){a.templateUrl=c.templateUrl;var o=function(b){i(function(){angular.element("#contentPartial").html(g(b)(a))})},p=f.get(n+c.templateUrl);p?o(p):e.get(n+c.templateUrl).then(function(a){f.put(n+c.templateUrl,a.data),o(a.data)})}else a.content=c.content||"";c.hasOwnProperty("scope")&&c.scope&&(a=angular.extend(a,c.scope)),a.toTrusted=function(a){return h.trustAsHtml(a||"")},a.showTerm=c.showTerm||!1,a.acceptTerm=!1,a.contentClass=c.contentClass||"",a.modifyPositionButtons=c.modifyPositionButtons||!1,a.btnOk=c.btnOk===!1?!1:c.btnOk||_tr("OK"),c.btnCancel===!1?c.btnCancel=!1:a.btnCancel=c.btnCancel||_tr("CANCEL"),a.changeTerm=function(b){a.acceptTerm=b},a.send=function(){b.close();var c={acceptTerm:a.acceptTerm};a.appliedDiscount&&(c.discountCode=a.discountCode),d.resolve(c)},a.cancel=function(){b.close(),d.reject({acceptTerm:a.acceptTerm})},a.validateDiscountCode=function(){a.errorMsg="",a.discountCode||(a.errorMsg=_tr("Please enter a discount code")),j.getPrice({accountId:k,featureId:a.featureId,code:a.discountCode.toUpperCase(),venueId:l,userId:m},function(b){angular.extend(a,b),a.appliedDiscount=!0},function(b){400===b.status&&b.data&&(a.errorMsg=b.data.message)})}}]).service("$notification",["$modal","$q","$sce",function(a,b){var c="/code/notification/templates/",d=function(d){var e=b.defer();d=d||{},d.hasOwnProperty("templateFullUrl")&&d.templateFullUrl&&(d.templateFullUrl=c+d.templateFullUrl);var f=a.open({templateUrl:d.templateFullUrl||"/code/notification/notification.php",windowClass:"modal-preoday "+(d.windowClass||""),controller:"confirmModalController",resolve:{data:function(){return d},deffered:function(){return e}}});return f.opened.then(function(){setTimeout(function(){$(".modal-preoday").addClass("active")},400)}),e.promise};return{confirm:d}}]),angular.module("kyc.services",[]).service("$chartService",["ChartType","$filter","TickInterval",function(a,b,c){var d=function(a){return{options:{chart:{type:"areaspline",height:"250"},exporting:{enabled:!1},plotOptions:{line:{marker:{enabled:!1}},areaspline:{lineWidth:0,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#523E8A"],[1,"#1AA1DB"]]},marker:{enabled:!1}}}},credits:{enabled:!1},title:{text:""},xAxis:{type:"datetime",minTickInterval:864e5,labels:{enabled:!1}},yAxis:{gridLineWidth:0,minorGridLineWidth:0,title:{text:""},labels:{enabled:!1}},series:[{showInLegend:!1,enableMouseTracking:!1,name:"",data:a.data}]}},e=function(a){var d=a.data.length;return{options:{chart:{type:"areaspline",height:"250"},exporting:{enabled:!1},plotOptions:{line:{marker:{enabled:!1}},series:{marker:{fillColor:"#126FB2",lineColor:"#126FB2",lineWidth:2}},areaspline:{color:"#E7F1F7",lineColor:"#126FB2",lineWidth:3,marker:{fillColor:"#126FB2",enabled:d>1?!1:!0}}},tooltip:{borderWidth:0,backgroundColor:"transparent",shadow:!1,useHTML:!0,positioner:function(a,b,c){var d=a/2;return d-=this.chart.plotLeft,{x:c.plotX-d,y:c.plotY-b}},formatter:function(){var d;d=this.series.xAxis.tickInterval===c.MONTH?b("date")(new Date(this.x),"MMM yyyy"):this.series.xAxis.tickInterval===c.WEEK||this.series.xAxis.tickInterval===c.WEEK_THREE?moment.utc(this.x).startOf("week").format("DD MMM YYYY")+" <br /> - <br />"+moment.utc(this.x).endOf("week").format("DD MMM YYYY"):b("date")(new Date(this.x),"dd MMM yyyy");var e='<div style="position:relative;"><div style="background-color: #1576B7; border-radius: 5px; color:#fff;font-family:\'Co Text W01 Light\'; text-align:center; padding:18px 8px;">'+d,f=1==this.y&&"s"===a.tooltipText[a.tooltipText.length-1].toLowerCase()?a.tooltipText.slice(0,-1):a.tooltipText;return e+="<b style=\"color:#fff;font-size:160%;font-weight:bold;font-family:'Co Text W01 Bold';text-align:center;display:block;margin-top:8px;\">",e+=a.currency?f+""+this.y.toFixed(2)+"</b></div>":this.y+""+f+"</b></div>",e+='<span style="position: absolute; left: 42%; bottom: -8px; background:url(/img/arrowBlue.png) left top no-repeat; width: 15px; height: 8px; display: block;" "></span></div>'}}},credits:{enabled:!1},title:{text:""},xAxis:{type:"datetime",tickInterval:a.tickInterval,min:a.minTimestamp,max:a.maxTimestamp,labels:{style:{color:"#b3b6b8",fontSize:"15px"},formatter:function(){var a;return a=this.axis.tickInterval===c.MONTH?b("date")(new Date(moment.utc(this.value).startOf("month")),"MMM"):this.axis.tickInterval===c.WEEK||this.axis.tickInterval===c.WEEK_THREE?b("date")(new Date(moment.utc(this.value).startOf("week").add("days",3)),"dd.MMM"):b("date")(new Date(this.value),"dd.MMM")}}},yAxis:{gridLineWidth:1,gridLineColor:"#C0C0C0",gridLineDashStyle:"dot",minorGridLineWidth:0,title:{text:""},labels:{style:{color:"#b3b6b8",fontSize:"15px"}},min:0,minRange:1},series:[{showInLegend:!1,name:"",data:a.data,marker:{symbol:"url(/img/marker.png)"}}]}},f=function(a){return{options:{chart:{type:"pie",height:"250",events:{load:function(){setTimeout(function(){$(".highcharts-legend-item rect").attr("rx","20").attr("ry","20").attr("width","16").attr("height","16").css({cursor:"pointer"})},100)}}},tooltip:{hideDelay:0,borderWidth:0,backgroundColor:"#DBDBD9",shadow:!1,useHTML:!0,positioner:function(a,b,c){return{x:c.plotX-a/2+10,y:c.plotY-b-5}},formatter:function(){return'<div style="position:relative;"><div class="tooltipPie" style="font-size: 14px; font-weight: 600; padding: 5px 7px">'+Highcharts.numberFormat(this.y,this.y%1===0?0:1)+'</div> <span style="position: absolute; left: 33%; bottom: -15px; background:url(/img/arrowPie.png) left top no-repeat; width: 15px; height: 9px; display: block;" "></span> </div>'}},exporting:{enabled:!1},plotOptions:{pie:{center:["20%","55%"],borderWidth:0}},legend:{width:50,enabled:!0,layout:"vertical",verticalAlign:"middle",align:"center",borderWidth:0,itemMarginTop:5,itemMarginBottom:5,itemStyle:{width:210,lineHeight:20,fontSize:13},useHTML:!1,labelFormatter:function(){var a="font-family:Co Text W01 Light;";return a+="color:#46545d;",'<div style="'+a+'">'+this.name+"</div>"}}},title:{text:""},yAxis:{title:{text:""}},series:[{data:a.data,size:"80%",innerSize:"65%",showInLegend:!0,dataLabels:{enabled:!1}}]}},g=function(a){return{options:{chart:{height:"250",type:"column"},exporting:{enabled:!1},plotOptions:{column:{borderRadius:5},series:{borderWidth:0,dataLabels:{enabled:!1,format:"{point.y:.1f}"}}},tooltip:{hideDelay:.1,crosshairs:!1,shared:!0,followPointer:!0,borderWidth:0,backgroundColor:"#DBDBD9",shadow:!1,useHTML:!0,positioner:function(a,b,c){return{x:c.plotX-a/2+10,y:c.plotY-b-5}},formatter:function(){return'<div style="position:relative;"><div class="tooltipPie" style="font-size: 14px; font-weight: 600; padding: 5px 7px">'+Highcharts.numberFormat(this.y,this.y%1===0?0:1)+'</div> <span style="position: absolute; left: 33%; bottom: -15px; background:url(/img/arrowPie.png) left top no-repeat; width: 15px; height: 9px; display: block;" "></span> </div>'}}},title:{text:""},xAxis:{type:"category",lineWidth:0,tickWidth:0},yAxis:{gridLineWidth:0,minorGridLineWidth:0,title:{text:""},labels:{enabled:!1}},series:[{pointWidth:200,name:"Customers",showInLegend:!1,colorByPoint:!1,color:{linearGradient:{x1:1,y1:1,x2:0,y2:1},stops:[[0,"#523E8A"],[1,"#1AA1DB"]]},data:a.data}]}},h=function(b,c){switch(b){case a.AREA:return d(c);case a.AREA_MODAL:return e(c);case a.PIE:return f(c);case a.COLUMN:return g(c)}};return{area:d,areaModal:e,pie:f,column:g,getChart:h}}]),angular.module("kyc.services").service("$grid",["ChartType",function(a){var b=function(b){var c=[],d=1,e=8,f=1,g=1,h=window.sessionStorage.getItem("widgets");return h&&(h=angular.fromJson(h)),angular.forEach(b,function(b){var i={};i.display=!0,i.title=b.title,i.num=d,b.type===a.NUMBER?(i.showChart=!1,i.size_x=2,i.size_y=1,i.value=b.data,i.currency=b.currency):(i.showChart=!0,i.size_x=4,i.size_y=2,i.value=b,i.currency=b.currency),h&&(i.order=h[d].order,i.display=h[d].display),i.row=g,i.col=f,f+i.size_x>e?(f=1,++g):f+=i.size_x,++d,c.push(i)}),h&&c.sort(function(a,b){return a.order<b.order?-1:a.order>b.order?1:0}),c};return{populateItems:b}}]),angular.module("loaders",[]).service("$AjaxInterceptor",["$rootScope","$timeout",function(a,b){function c(){var a=document.getElementsByClassName(".loading-content");if(a.length>0){(new Spinner).spin(a[0])}}return{start:function(){++a.requests,c()},complete:function(){b(function(){a.requests>0&&--a.requests},100)},isRequesting:function(){return a.requests>0}}}]),angular.module("kyc.services").service("OutletService",["ACCOUNT_ID","VENUE_ID","Outlet","$q",function(a,b,c,d){var e=null,f=null;this.init=function(d){e=c.query({accountId:a,venueId:b},function(a){d(a),f&&f.resolve()},function(){f.reject()})},this.getOutlets=function(){return e?d.when(e):(f||(f=d.defer()),f.promise)},this.getOutletName=function(a){var b=!1;return angular.forEach(e,function(c){c.id==a&&(b=c.name)}),b}}]),angular.module("kyc.services").factory("pusher",["PUSHER_KEY",function(a){Pusher.log=function(a){window.console&&window.console.log&&window.console.log(a)};var b,c;return{bind:function(a,d,e){d.length>0?angular.forEach(d,function(a){c=b.subscribe("preoday.order.outlet."+a),c.bind("update",e)}):(c=b.subscribe("preoday.order.venue."+a),c.bind("update",e))},reset:function(){if(b){var c=b.allChannels();angular.forEach(c,function(a){a.unbind(),b.unsubscribe(a.name)})}else b=new Pusher(a)},bindConnection:function(a,c){b.connection.bind(a,c)}}}]),angular.module("kyc.services").service("OrderService",["ACCOUNT_ID","Order","INITIAL_DATES","VENUE_ID",function(a,b,c,d){function e(){return k}function f(a){return void 0===a||a.valueOf()>moment.utc().subtract("year",2).valueOf()?moment.utc().subtract("year",2).valueOf():a.startOf("day").valueOf()}function g(b,c,e){var g={};return b=f(b),e&&e.length&&(e=e.join(",")),c=moment.utc().valueOf(),g={accountId:a,venueId:d,maxPaid:c,minPaid:b,outletIds:e},j(g,function(a){k=a})}function h(a,b){var c={};return b&&b.length&&(b=b.join(",")),c={since:a,outletIds:b,orderBy:"updated"},j(c,function(a){k=a})}function i(a,b,c){var d={};return a=f(a),c&&c.length&&(c=c.join(",")),b=moment.utc().valueOf(),d={maxPaid:b,minPaid:a,eventIds:c},j(d)}function j(c,e){var f=c,g=e||function(){};return f.accountId=a,f.venueId=d,f.status="NOT_CANCELLED",b.query(f,g).$promise}var k;return{load:g,loadSince:h,getOrders:e,getOrdersByEvents:i}}]),angular.module("kyc.services").service("VenueService",["ACCOUNT_ID","VENUE_ID","Venue","$q",function(a,b,c,d){function e(){{var a=d.defer();new c.query({venueId:b},function(b){b&&b.length>0&&(h=b[0]),a.resolve(h)})}return a.promise}function f(a,b){return a=a.startOf("day").format("YYYY/M/D HH:mm:ss"),b=b.endOf("day").format("YYYY/M/D HH:mm:ss"),c.getEvents({id:h.id,after:a,before:b}).$promise}function g(){return h?i[h.ccy]:i.GBP}var h,i={GBP:{symbol:"%C2%A3",name:"Pound Sterling",symbol_native:"£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},EUR:{symbol:"%E2%82%AC",name:"Euro",symbol_native:"€",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},NOK:{symbol:"Kr",name:"Norwegian Krone",symbol_native:"Kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian Krone"},GIP:{symbol:"£",name:"Gibraltar Pound",symbol_native:"£",decimal_digits:2,rounding:0,code:"GIP",name_plural:"Gibraltar Pounds"}};return{getCurrency:g,init:e,getEvents:f}}]),angular.module("kyc.services").service("UtilsService",["$timeout",function(a){var b=[],c=function(a,b,c){var d=0,e={},f=Object.keys(a);f.length<c&&(c=f.length);for(var d=b;c>d;d++){var g=f[d];e[g]=a[g]}return e},d=function(a){b=a},e=function(){return b},f=function(b){for(var c=$(b).children().find(".flip-container"),d={},e=c.length-1;e>=0;e--){var f=$(c[e]),g=c.index(f),h=f.scope();d[h.value.num]={order:g,display:h.value.display},h.value.order=g}window.sessionStorage.setItem("widgets",angular.toJson(d)),a(function(){angular.element("#sscontainer").trigger("ss-rearrange")})},g=function(a,b){var c=1;return b&&(c=-1),function(b,d){var e=b[a]<d[a]?-1:b[a]>d[a]?1:0;return e*c}},h=function(a,b,c){var d=1;c&&(d=-1);var e=[];return angular.forEach(a,function(a){e.push(a)}),e.sort(function(a,c){var e=a[b]<c[b]?-1:a[b]>c[b]?1:0;return e*d}),e},i=function(a,b){for(var c=b.map(function(a){return a.id}),d=a.length-1;d>=0;d--){var e=a[d],f=c.indexOf(e.id);-1!==f&&(b.splice(f,1),c.splice(f,1))}return a.concat(b)};return{sliceObject:c,reOrderWidgets:f,dynamicSort:g,dynamicSortObject:h,mergeArraysUnique:i,setItems:d,getItems:e}}]),angular.module("kyc.controllers").controller("DashboardCtrl",["$scope","$http","$compile","ChartType","$grid","AllCharts","$AjaxInterceptor","$timeout","$notification","UtilsService",function(a,b,c,d,e,f,g,h,i,j){function k(){a.values=e.populateItems(l),h(function(){var a="1"===window.sessionStorage.getItem("firsttime_feature_4");a&&(window.sessionStorage.setItem("firsttime_feature_4",0),i.confirm({title:_tr("Welcome to Know Your Customer"),content:_tr("From here you can view detailed reports and analytics about your customers and the transactions they make."),showTerm:!1,btnOk:!1,btnCancel:_tr("GET STARTED"),windowClass:"medium"})),$(window).trigger("resize"),angular.element("#sscontainer").trigger("ss-rearrange"),g.complete()},1e3)}a.setLocation("dashboard"),a.$parent.showDateFilter=!0,a.disableEventFilter();var l=f.getPreparedCharts();a.$on("KYC_RELOAD",function(){l=f.getPreparedCharts(),a.values=e.populateItems(l),k()}),a.changeVisibility=function(a){a.display?(angular.element("#removable_"+a.num).closest(".flip-container").parent().show(),j.reOrderWidgets(angular.element("#sscontainer"))):setTimeout(function(){angular.element("#removable_"+a.num).triggerHandler("click")},0)},a.isFirstElementInRow=function(a){return 0==a||5==a||10==a},a.isLastElementInRow=function(a){return 4==a||9==a},a.shapeshifterConfig={gutterX:20,gutterY:20,paddingX:0,paddingY:0,minColumns:2},k()}]),angular.module("kyc.controllers").controller("CustomersCtrl",["$scope","OrderService","$AjaxInterceptor","Export","ACCOUNT_ID","UtilsService",function(a,b,c,d,e,f){function g(){var b=[[a.getExportDate()],[j]];return angular.forEach(a.customers,function(c){("1"===a.exportAll||c.selected===!0)&&b.push([c.name,c.totalSpent.toFixed(2),c.emailAddress,c.loyalty,c.offers,c.other])}),{data:b}}function h(){var b={Name:[],"Total Spent":[],"Email Address":[],Loyalty:[],Offers:[],Other:[]};return angular.forEach(a.customers,function(c){("1"===a.exportAll||c.selected===!0)&&(b.Name.push(c.name),b["Total Spent"].push(c.totalSpent.toFixed(2)),b["Email Address"].push(c.emailAddress),b.Loyalty.push(c.loyalty),b.Offers.push(c.offers),b.Other.push(c.other))}),{title:"Customers",startDate:a.form.start_date.valueOf(),endDate:a.form.end_date.valueOf(),dataJson:JSON.stringify(b)}}function i(){if(a.customers={},k){var b=moment.utc(a.$parent.form.start_date),d=moment.utc(a.$parent.form.end_date);angular.forEach(k,function(c){var e=moment.utc("CASH"===c.paymentType?c.created:c.paid);if((0===a.$parent.getSelectedOutlets().length||a.$parent.findOutlet(c.outletId).length>=1)&&e>=b&&d>=e){var f=c.userId;void 0===a.customers[f]?a.customers[f]={name:c.user.firstName+" "+c.user.lastName,totalSpent:Number(c.total.toFixed(2)),emailAddress:c.user.username,loyalty:c.user.optinLoyalty,offers:c.user.optinOffers,other:c.user.optinOther}:a.customers[f].totalSpent=Number((a.customers[f].totalSpent+c.total).toFixed(2))}})}a.customers=f.dynamicSortObject(a.customers,a.orderBy,a.direction),a.customersList=a.customers,a.totalItems=Object.keys(a.customers).length,a.numPerPage=20,a.currentPage=1,a.setOrderBy("totalSpent",!0),c.complete()}a.setLocation("customers"),a.$parent.showDateFilter=!0,a.disableEventFilter();var j=_tr("Customers"),k=b.getOrders();a.exportAll="1",a.$on("KYC_RELOAD",function(){k=b.getOrders(),i()}),a.selectAll=function(){angular.forEach(a.customers,function(b){b.selected=a.all_options})},a.exportPdf=function(){a.pdfData=h()},a.exportCsv=function(){a.csvData=g()},a.setOrderBy=function(b,c){a.direction=void 0!==c?c:!a.direction,a.customers=f.dynamicSortObject(a.customers,b,a.direction),l()};var l=function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.customersList=a.customers.slice(b,c)};i(),a.$watch("currentPage + numPerPage",function(){l()}),a.showOptions=function(){angular.element(".flip-container").addClass("active"),setTimeout(function(){$(".invisibleBack").addClass("visible")},200)},a.hideOptions=function(){angular.element(".flip-container").removeClass("active"),setTimeout(function(){$(".invisibleBack").removeClass("visible")},200)}}]),angular.module("kyc.controllers").controller("ReportsCtrl",["$scope","$AjaxInterceptor","OrderService","Export","ACCOUNT_ID","AllReports","UtilsService","$filter",function(a,b,c,d,e,f,g,h){function i(){a.reports=f.getReportsList(),a.selectReport(a.reports[0]),a.selectedReport&&a.selectedReport.data?(a.reportsList=a.selectedReport.data,a.totalItems=Object.keys(a.selectedReport.data).length):(a.reportsList=[],a.totalItems=0),a.selectedReport.data=g.dynamicSortObject(a.selectedReport.data,a.orderBy,a.direction),a.numPerPage=20,a.currentPage=1,b.complete(),m=!0}function j(){var b={};return angular.forEach(a.selectedReport.data,function(c){("1"===a.exportAll||c.$selected===!0)&&angular.forEach(c,function(c,d){if("$"!==d[0]){var e=a.getTitle(d);void 0===b[e]&&(b[e]=[]),b[e].push(l(c,d))}})}),{title:a.selectedReport.title,startDate:a.$parent.form.start_date.valueOf(),endDate:a.$parent.form.end_date.valueOf(),dataJson:angular.toJson(b)}}function k(){var b=[[a.getExportDate()],[a.selectedReport.title],a.selectedReport.titles];return angular.forEach(a.selectedReport.data,function(c){if("1"===a.exportAll||c.$selected===!0){var d=[];angular.forEach(c,function(a,b){"$"!==b[0]&&d.push(l(a,b))}),b.push(d)}}),{data:b}}function l(a,b){switch(b){case"day":case"lastOrder":case"dateJoined":case"dateOfOrder":case"date":return h("date")(a,"dd/MM/yyyy");case"valueSold":case"totalSpent":case"percentDecrease":case"percentIncrease":return a.toFixed(2);default:return a}}_tr("Reports");a.setLocation("reports"),a.exportAll="1",a.direction=!0;var m=!1;a.disableEventFilter(),a.selectAll=function(){for(var b=a.selectedReport.data.length;b--;)a.selectedReport.data[b].$selected=a.all_options},a.isMarketingTitle=function(a){var b="loyalty"===a||"offers"===a||"other"===a;return b?a:b},a.$watch("currentPage + numPerPage",function(){n()});var n=function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.selectedReport&&a.selectedReport.data&&(a.reportsList=a.selectedReport.data.slice(b,c))};a.setOrderBy=function(b,c){a.direction=void 0!==c?c:!a.direction,a.orderBy=b,a.selectedReport.data=g.dynamicSortObject(a.selectedReport.data,b,a.direction),n()},a.selectReport=function(b){if(b)var c=b;else{var c=a.reports.filter(function(a){return a.selected===!0});c.length&&(c=c[0])}a.selectedReport={data:c.getData(),title:c.getTitle(),titles:c.getTitles(),description:c.description},a.totalItems=Object.keys(a.selectedReport.data).length,a.reportsList=g.sliceObject(a.selectedReport.data,0,a.numPerPage),a.currentPage=1,a.direction=void 0!==c.direction?c.direction:a.direction;var d=void 0!==c.orderBy?c.orderBy:a.selectedReport.titles[0];a.setOrderBy(d)},a.getTitle=function(a){return f.getTitle(a)},a.exportPdf=function(){a.pdfData=j()},a.exportCsv=function(){a.csvData=k()},a.showOptions=function(){angular.element(".flip-container").addClass("active"),setTimeout(function(){$(".invisibleBack").addClass("visible")},200)},a.hideOptions=function(){angular.element(".flip-container").removeClass("active"),setTimeout(function(){$(".invisibleBack").removeClass("visible")},200)},m||i()}]),angular.module("kyc.controllers").controller("StockCtrl",["$scope","$AjaxInterceptor","OrderService","Export","ACCOUNT_ID","UtilsService",function(a,b,c,d,e,f){function g(){var b=[[a.getExportDate()],[j]];return angular.forEach(a.stock,function(c){("1"===a.exportAll||c.selected===!0)&&b.push([c.name,c.quantity])}),{data:b}}function h(){var b={Item:[],"Quantity Ordered":[]};return angular.forEach(a.stock,function(c){("1"===a.exportAll||c.selected===!0)&&(b.Item.push(c.name),b["Quantity Ordered"].push(c.quantity))}),{title:"Stock",startDate:a.form.start_date.valueOf(),endDate:a.form.end_date.valueOf(),dataJson:JSON.stringify(b)}}function i(){if(a.stock={},k){var c=a.$parent.form.start_date,d=a.$parent.form.end_date;angular.forEach(k,function(b){var e=moment.utc(b.paid);(0===a.$parent.getSelectedOutlets().length||a.$parent.findOutlet(b.outletId).length>=1)&&e>=c&&d>=e&&angular.forEach(b.items,function(b){var c=b.menuItemId;void 0===a.stock[c]?a.stock[c]={name:b.name,quantity:b.qty}:a.stock[c].quantity+=b.qty})})}a.stock=f.dynamicSortObject(a.stock,a.orderBy,a.direction),a.stocks=a.stock,a.totalItems=Object.keys(a.stock).length,a.currentPage=1,a.setOrderBy("quantity",!0),b.complete()}var j=_tr("Stock");a.setLocation("stock"),a.$parent.showDateFilter=!0,a.disableEventFilter(),a.exportAll="1",a.numPerPage=20,a.$on("KYC_RELOAD",function(){k=c.getOrders(),i()});var k=c.getOrders();a.selectAll=function(){angular.forEach(a.stock,function(b){b.selected=a.all_options})},a.exportPdf=function(){a.pdfData=h()},a.exportCsv=function(){a.csvData=g()},a.setOrderBy=function(b,c){void 0!==c&&(a.direction=c),a.stock=f.dynamicSortObject(a.stock,b,a.direction),l()};var l=function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.stocks=a.stock.slice(b,c)};a.$watch("currentPage + numPerPage",function(){l()}),i(),a.setPage=function(b){a.currentPage=b},a.showOptions=function(){angular.element(".flip-container").addClass("active"),setTimeout(function(){$(".invisibleBack").addClass("visible")},200)},a.hideOptions=function(){angular.element(".flip-container").removeClass("active"),setTimeout(function(){$(".invisibleBack").removeClass("visible")},100)}}]),angular.module("kyc.controllers").controller("StreamCtrl",["$scope","OrderService","pusher","$AjaxInterceptor","$interval","VENUE_ID","UtilsService",function(a,b,c,d,e,f,g){a.$parent.showDateFilter=!1,a.disableEventFilter(),a.setLocation("stream"),a.orders=b.getOrders();var h=moment().valueOf();a.orders.$promise.then(function(){a.orders=a.orders.sort(g.dynamicSort("updated",!0)),a.orders.length&&(h=moment(a.orders[0].updated).valueOf())});var i=!1,j=0,k=function(){++j,i||(i=!0,j=0,b.loadSince(h,n).then(function(b){b.length&&(h=moment(b[0].updated).valueOf(),a.orders=g.mergeArraysUnique(b,angular.copy(a.orders))),i=!1,j&&k()}))};a.$on("KYC_RELOAD",function(){o(),d.complete()});var l=f,m=null,n=[],o=function(){n=[],c.reset(),m=a.getSelectedOutlets(),angular.forEach(m,function(a){n.push(a.id)}),c.bind(l,n,k)};o(),a.getStatusName=function(a){var b={PAYMENT_FAILED:"FAILED",NOSHOW:"NO SHOW"};return b[a]?b[a]:a},a.getStatusColor=function(a){switch(a){case"PENDING":case"ACCEPTED":case"PREPARING":case"READY":case"DELIVERING":case"COMPLETED":return"good";case"NOSHOW":case"REJECTED":case"CANCELLED":case"PAYMENT_FAILED":default:return"bad"}},a.outletFilter=function(a){return n&&0===n.length||-1!==n.indexOf(a.outletId)},a.showOptions=function(){angular.element(".flip-container").addClass("active")},a.hideOptions=function(){angular.element(".flip-container").removeClass("active")},a.activeStream=function(b){var c=a.orders.filter(function(a){return a.active===!0});c&&c[0]&&c[0].code!=b.code&&(c[0].active=!1),b.active=!b.active},a.getOrderItems=function(a){var b=[];return angular.forEach(a.items,function(a){b.push(a.qty+" x "+a.name)}),b},d.complete()}]),angular.module("kyc.controllers").controller("EventsCtrl",["$scope","$location","OrderService","pusher","$AjaxInterceptor","$interval","UtilsService",function(a,b,c,d,e){function f(){var b=a.getEventsSelected();h=1==b.length?b[0].name:"";var c=["Order ID"];b.length>1&&c.push("Event"),c.push("Outlet"),c.push("Customer"),c.push("Email"),c.push("Order Time"),c.push("Items"),c.push("Special Request"),c.push("Discounts and Fees"),c.push("Order Total"),c.push("Order Status"),c.push("Loyalty"),c.push("Offers"),c.push("Other"),c.push("Collection");var d=["NOSHOW","REJECTED","CANCELLED","PAYMENT_FAILED"],e=a.allOrders.filter(function(a){return-1===d.indexOf(a.status)}),f=[[a.getExportDateForEvent(e)],[h],c],g=0;angular.forEach(e,function(c){if("1"===a.exportAll||c.selected===!0){var d=[c.id],e=k(c);b.length>1&&d.push('"'+a.getEventById(c.eventId).fullName+'"'),console.log("each",c),d.push(a.getOutletById(c.outletId).name||c.outletId),d.push(c.user.name),d.push(c.user.email),d.push(moment(c.created).format("DD/MM/YYYY HH:mm")),d.push('"'+e.join(";").replaceAll('"',"")+'"'),d.push(c.notes),d.push('"'+l(c).join(";").replaceAll('"',"")+'"'),d.push(a.getCurrency()+c.total.toFixed(2)),d.push(c.status),d.push(c.user.optinLoyalty),d.push(c.user.optinOffers),d.push(c.user.optinOther),d.push(c.pickupSlot),f.push(d),g+=c.total}});var i=["","","","","","","","Total",a.getCurrency()+g.toFixed(2),"",""];b.length>1&&i.unshift(""),f.push(i);var j={data:f};return j.nameOfFile=b.length>1?_tr("Orders Report")+" ("+a.form.start_date.format("DD-MM-YY")+"-"+a.form.end_date.format("DD-MM-YY")+")":b[0].name,j}function g(){var b={"Order ID":[]},c=a.getEventsSelected();c.length>1&&(b.Event=[]),angular.extend(b,{Outlet:[],Collection:[],Customer:[],Items:[],"Discounts and Fees":[],"Order Total":[]});var d=0,e=["NOSHOW","REJECTED","CANCELLED","PAYMENT_FAILED"],f=a.allOrders.filter(function(a){return-1===e.indexOf(a.status)});console.log("before for each"),angular.forEach(f,function(e){if(console.log("in for each"),"1"===a.exportAll||e.selected===!0){b["Order ID"].push(e.id),b.Outlet.push(e.address?e.address:a.getOutletById(e.outletId).name||e.outletId);var f=[e.user.name,e.user.email];b.Customer.push(f.join("___BR___"));var g=k(e);c.length>1&&b.Event.push(a.getEventById(e.eventId).fullName);var h=e.notes?"___BR______BR___  ----- Special Requests -----  ___BR______BR___"+e.notes:"";console.log("notes",e.notes),b.Items.push(g.join("___BR___")+h),b["Discounts and Fees"].push(l(e).join("___BR___")),b["Order Total"].push(a.getCurrencyByAscii()+e.total.toFixed(2)),b.Collection.push(e.pickupSlot),d+=e.total}}),b["Order ID"].push(""),b.Outlet.push(""),b.Customer.push(""),c.length>1&&b.Event.push(""),b.Items.push(" "),b["Discounts and Fees"].push("Total"),b["Order Total"].push(a.getCurrencyByAscii()+d.toFixed(2)),b.Collection.push(""),console.log("pushing ",JSON.stringify(b));var g={startDate:a.form.start_date.valueOf(),endDate:a.form.end_date.valueOf(),dataJson:JSON.stringify(b),orientation:"LANDSCAPE",type:"kyc-table-event"};return g.title=c.length>1?_tr("Orders By Events"):c[0].name,a.currentAction="",g}if(!a.venue.eventFlag)return b.path("/dashboard"),void e.complete();a.$parent.showDateFilter=!0,a.enableEventFilter(),a.setLocation("events"),a.exportAll="1";var h="",i=function(b){a.allOrders=b.orders,a.orders=b.orders,a.totalItems=a.orders.length,e.complete()};a.$on("ORDERS_EVENTS_LOADED",function(b,c){a.ordersLoaded=c.orders,i(c)}),a.$on("SELECT_EVENT",function(){for(var b=a.getEventsSelectedIds(),c=[],d=0,e=a.ordersLoaded.length;e>d;d++){var f=a.ordersLoaded[d];-1!==b.indexOf(f.eventId)&&c.push(f)}i({orders:c})}),a.loadEvents(),a.$watch("currentPage + numPerPage",function(){j()});var j=function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.allOrders&&a.allOrders.length&&(a.orders=a.allOrders.slice(b,c))};a.exportPdf=function(){a.currentAction="pdf",a.pdfData=g()},a.exportCsv=function(){a.currentAction="csv;",a.csvData=f()},a.getExportDateForEvent=function(b){var c=a.getEventsSelected();return c.length>1?moment(a.getEventById(b[b.length-1].eventId).schedules[0].startDate).format("DD-MMM-YYYY")+" - "+moment(a.getEventById(b[0].eventId).schedules[0].endDate).format("DD-MMM-YYYY"):a.form.start_date.format("DD-MMM-YYYY")+" - "+a.form.end_date.format("DD-MMM-YYYY")};var k=function(b){for(var c=[],d=b.items,e=0,f=0,g=d.length;g>f;f++){var h=d[f];e+=h.total;var i="";angular.forEach(h.modifiers,function(a,b){i+=b==h.modifiers.length-1?a.name:a.name+", "});var j=null;j="pdf"==a.currentAction?a.getCurrencyByAscii():a.getCurrency();var k=h.qty;k+="x ",k+=h.name,k+=h.modifiers.length?" ("+i+") ":" ",k+=j,k+=h.total.toFixed(2),c.push(k)}return b.total=e,c},l=function(b){var c=[],d=b.discounts,e=b.fees,f=null;f="pdf"==a.currentAction?a.getCurrencyByAscii():a.getCurrency();for(var g=0,h=d.length;h>g;g++){var i=d[g];c.push(i.name+" -"+f+i.discount.toFixed(2))}for(var g=0,h=e.length;h>g;g++){var j=e[g];c.push(j.name+" "+f+j.amount.toFixed(2))}return c};a.getItemsAsString=function(a){return a.itemString||(a.itemString=k(a).join("<br />")),a.itemString},a.getDiscountsAndFees=function(a){return a.discountsAndFees||(a.discountsAndFees=l(a).join("<br />")),a.discountsAndFees},a.selectAll=function(){angular.forEach(a.orders,function(b){b.selected=a.all_options})},a.showOptions=function(){angular.element(".flip-container").addClass("active"),setTimeout(function(){$(".invisibleBack").addClass("visible")},200)},a.hideOptions=function(){angular.element(".flip-container").removeClass("active"),setTimeout(function(){$(".invisibleBack").removeClass("visible")},200)},a.getOrderItems=function(a){var b=[];return angular.forEach(a.items,function(a){b.push(a.qty+" x "+a.name)}),b},a.numPerPage=20,a.currentPage=1,e.complete()}]),angular.module("kyc.controllers").controller("OrdersCtrl",["$scope","$location","OrderService","$AjaxInterceptor","UtilsService","OutletService",function(a,b,c,d,e,f){function g(b){if(console.log("ORDERS === ",b),b.length){a.allOrders=[],a.orders=[];var c=a.$parent.form.start_date;console.log("minDate === ",c);var e=a.$parent.form.end_date;console.log("maxDate === ",e);for(var f=b.length-1;f>=0;f--){var g=b[f],h=moment.utc(g.created);h>=c&&e>=h&&(g.outletName=a.getOutletById(g.outletId).name,g.dateTimeStamp=moment.utc(g.created).valueOf(),g.dateTime=moment.utc(g.created).format("DD/MM/YYYY HH:mm"),a.allOrders.push(g))}a.orders=a.allOrders,console.log("orders view here",a.allOrders),a.currentPage=1,a.direction=!0,a.totalItems=a.orders.length,a.setOrderBy("dateTimeStamp")}d.complete()}function h(){var b={"Order ID":[]},c=a.getOrdersSelected();c.length>1&&(b.Outlet=[]),angular.extend(b,{"Order ID":[],"Order Time":[],Customer:[],Items:[],"Discounts and Fees":[],"Order Total":[],"Order Status":[]});var d=0;angular.forEach(a.allOrders,function(c){if("1"===a.exportAll||c.selected===!0){(a.getSelectedOutlets().length>1||0==a.getSelectedOutlets().length)&&b.Outlet.push(c.outletName||c.outletId),b["Order ID"].push(c.id),b["Order Time"].push(c.dateTime);var e=[c.user.name,c.user.email];b.Customer.push(e.join("___BR___"));var f=l(c);b.Items.push(f.join("___BR___")),b["Discounts and Fees"].push(m(c).join("___BR___")),b["Order Total"].push(a.getCurrencyByAscii()+c.total.toFixed(2)),b["Order Status"].push(c.status),d+=c.total}}),b.Outlet.push(""),b["Order ID"].push(""),b["Order Time"].push(""),b.Customer.push(""),b.Items.push(""),b["Discounts and Fees"].push("Total"),b["Order Total"].push(a.getCurrencyByAscii()+d.toFixed(2)),b["Order Status"].push("");var e={startDate:a.form.start_date.valueOf(),endDate:a.form.end_date.valueOf(),dataJson:JSON.stringify(b),orientation:"LANDSCAPE",type:"kyc-table-order"};
return e.title=c.length>1?_tr("Orders By Outlets"):c[0].outletName,a.currentAction="",e}function i(){var b=a.getOrdersSelected();j=1==b.length?b[0].outletName:"";var c=["Order ID"];(a.getSelectedOutlets().length>1||0==a.getSelectedOutlets().length)&&c.push("Outlet"),c.push("Customer"),c.push("Email"),c.push("Order Time"),c.push("Items"),c.push("Discounts and Fees"),c.push("Order Total"),c.push("Order Status"),c.push("Loyalty"),c.push("Offers"),c.push("Other");var d=["NOSHOW","REJECTED","CANCELLED","PAYMENT_FAILED"],e=a.allOrders.filter(function(a){return-1===d.indexOf(a.status)}),f=[[a.getExportDate()],[j],c],g=0;angular.forEach(e,function(b){if("1"===a.exportAll||b.selected===!0){var c=[b.id],d=l(b);(a.getSelectedOutlets().length>1||0==a.getSelectedOutlets().length)&&c.push('"'+b.outletName+'"'),console.log("each",b),c.push(b.user.name),c.push(b.user.email),c.push(moment(b.created).format("DD/MM/YYYY HH:mm")),c.push('"'+d.join(";").replaceAll('"',"")+'"'),c.push('"'+m(b).join(";").replaceAll('"',"")+'"'),c.push(a.getCurrency()+b.total.toFixed(2)),c.push(b.status),c.push(b.user.optinLoyalty),c.push(b.user.optinOffers),c.push(b.user.optinOther),f.push(c),g+=b.total}});var h=["","","","","","Total",a.getCurrency()+g.toFixed(2),"","","","",""];b.length>1&&h.unshift(""),f.push(h);var i={data:f};return i.nameOfFile=b.length>1?_tr("Orders Report")+" ("+a.getExportDate()+")":b[0].outletName,i}if(a.venue.eventFlag)return b.path("/dashboard"),void d.complete();a.$parent.showDateFilter=!0,a.setLocation("orders");var j="";a.numPerPage=20,a.currentPage=1,a.exportAll="1",a.$on("KYC_RELOAD",function(){g(c.getOrders())}),a.$watch("currentPage + numPerPage",function(){k()}),a.setOrderBy=function(b,c){void 0!==c&&(a.direction=c),a.allOrders=e.dynamicSortObject(a.allOrders,b,a.direction),k()};var k=function(){var b=(a.currentPage-1)*a.numPerPage,c=b+a.numPerPage;a.allOrders&&a.allOrders.length&&(a.orders=a.allOrders.slice(b,c))},l=function(b){for(var c=[],d=b.items,e=0,f=0,g=d.length;g>f;f++){var h=d[f];e+=h.total;var i="";angular.forEach(h.modifiers,function(a,b){i+=b==h.modifiers.length-1?a.name:a.name+", "});var j=null;j="pdf"==a.currentAction?a.getCurrencyByAscii():a.getCurrency();var k=h.qty;k+="x ",k+=h.name,k+=h.modifiers.length?" ("+i+") ":" ",k+=j,k+=h.total.toFixed(2),c.push(k)}return c},m=function(b){var c=[],d=b.discounts,e=b.fees,f=null;f="pdf"==a.currentAction?a.getCurrencyByAscii():a.getCurrency();for(var g=0,h=d.length;h>g;g++){var i=d[g];c.push(i.name+" -"+f+i.discount.toFixed(2))}for(var g=0,h=e.length;h>g;g++){var j=e[g];c.push(j.name+" "+f+j.amount.toFixed(2))}return c};a.getItemsAsString=function(a){return a.itemString||(a.itemString=l(a).join("<br />")),a.itemString},a.getDiscountsAndFees=function(a){return a.discountsAndFees||(a.discountsAndFees=m(a).join("<br />")),a.discountsAndFees},a.selectAll=function(){angular.forEach(a.orders,function(b){b.selected=a.all_options})},a.showOptions=function(){angular.element(".flip-container").addClass("active"),setTimeout(function(){$(".invisibleBack").addClass("visible")},200)},a.hideOptions=function(){angular.element(".flip-container").removeClass("active"),setTimeout(function(){$(".invisibleBack").removeClass("visible")},200)},a.getOrderItems=function(a){var b=[];return angular.forEach(a.items,function(a){b.push(a.qty+" x "+a.name)}),b},a.getOrdersSelected=function(){for(var b=[],c=0,d=a.orders.length;d>c;c++){var e=a.orders[c];e.selected&&b.push(e)}return b.length?b:a.orders},a.exportPdf=function(){a.currentAction="pdf",a.pdfData=h()},a.exportCsv=function(){a.currentAction="csv;",a.csvData=i()},f.getOutlets().then(function(){g(c.getOrders()),d.complete()})}]),angular.module("kyc.controllers").controller("MenuCtrl",["$scope","OutletService","OrderService","AllCharts","$route","VenueService","$AjaxInterceptor","$location","INITIAL_DATES","UtilsService","Venue","VENUE_ID","$filter",function(a,b,c,d,e,f,g,h,i,j,k,l,m){a.currencySymbol="",a.outlets=[],a.defaultLabelEvents=_tr("Select Events..."),a.form={start_date:moment.utc(i.start).startOf("day"),end_date:moment.utc(i.end).endOf("day")},a.enableEventFilter=function(){a.showEventsFilter=!0},a.disableEventFilter=function(){a.showEventsFilter=!1},a.isEventFilter=function(){return a.showEventsFilter},a.getCurrency=function(){return""},a.getCurrencyByAscii=function(){return""},k.getItems({id:l}).$promise.then(function(a){j.setItems(a)}),f.init().then(function(c){a.venue=c,console.log(c),a.currencySymbol="",b.init(function(){b.getOutlets().then(function(b){a.outlets=b}),d.init(a.form.start_date,a.form.end_date,a.currencySymbol)})}),a.update=function(){g.start(),setTimeout(function(){a.isEventFilter()?a.loadEvents():d.reloadCharts(a.form.start_date,a.form.end_date,a.currencySymbol,a.getSelectedOutlets()).then(function(){a.$broadcast("KYC_RELOAD")})},500)};var n=[],o=function(){n=[];for(var b=0,c=a.events.length;c>b;b++)n.push(a.events[b].id);return n};a.eventsSelected=[],a.getEventsSelected=function(){for(var b=[],c=0,d=a.events.length;d>c;c++){var e=a.events[c];e.selected&&b.push(e)}return b.length?b:a.events},a.getEventsSelectedIds=function(){for(var b=a.eventsSelected,c=[],d=0,e=b.length;e>d;d++)c.push(b[d].id);return c},a.getEventById=function(b){var c=a.eventsSelected,d=c.filter(function(a){return a.id===b});return d.length?d[0]:{}},a.loadEvents=function(){f.getEvents(a.form.start_date,a.form.end_date).then(function(b){if(b.length){a.defaultLabelEvents=_tr("Select Events...");for(var c=b.length-1;c>=0;c--){var d=b[c],e=moment(d.schedules[0].startDate);d.startDateTimeStamp=e.valueOf(),d.fullName=e.format("DD/MM/YYYY HH:mm")+" - "+d.name}}else a.defaultLabelEvents=_tr("No events in this period");a.eventsSelected=b,a.events=m("orderBy")(b,"startDateTimeStamp",!0),p(o())})};var p=function(b){b.length?c.getOrdersByEvents(a.form.start_date,a.form.end_date,b).then(function(b){for(var c=b.length-1;c>=0;c--){var d=b[c];d.eventName=a.getEventById(d.eventId).fullName,d.startDateTimeStampEvent=a.getEventById(d.eventId).startDateTimeStamp}b=m("orderBy")(b,"startDateTimeStampEvent",!0),a.$broadcast("ORDERS_EVENTS_LOADED",{orders:b}),g.complete()},function(){}):(a.$broadcast("ORDERS_EVENTS_LOADED",{orders:[]}),g.complete())};a.updateDataWithEvents=function(){g.start(),a.eventsSelected=a.getEventsSelected(),a.$broadcast("SELECT_EVENT")},a.setLocation=function(b){a.currentLocation=b,h.path()!=="/"+b&&h.path(b)},a.getSelectedOutlets=function(){return a.outlets.filter(function(a){return a.selected===!0})},a.getOutletById=function(b){var c=a.outlets.filter(function(a){return a.id===b});return c.length?c[0]:{}},a.findOutlet=function(b){return a.outlets.filter(function(a){return a.selected===!0&&a.id===b})},a.getExportDate=function(){return a.form.start_date.format("DD-MMM-YYYY")+" - "+a.form.end_date.format("DD-MMM-YYYY")}}]),angular.module("kyc.resources").factory("Export",["$resource",function(a){var b=a("/api/accounts/:accountId/exports/pdf",{accountId:"@accountId"},{table:{method:"POST",url:"/api/accounts/:accountId/exports/pdf/table"},chart:{method:"POST",url:"/api/accounts/:accountId/exports/pdf/table"}}),c=a("/api/accounts/:accountId/exports/csv",{accountId:"@accountId"},{}),d=a("/api/accounts/:accountId/exports/table/pdf",{accountId:"@accountId"},{});return{Pdf:b,Csv:c,TablePdf:d}}]),angular.module("kyc.resources").factory("Outlet",["$resource",function(a){var b=a("/api/outlets",{},{});return b}]),angular.module("kyc.resources").factory("Order",["$resource",function(a){var b=a("/api/orders",{},{});return b}]),angular.module("kyc.resources").factory("Venue",["$resource",function(a){var b=a("/api/venues/:id",{},{query:{method:"GET",isArray:!0},getItems:{method:"GET",url:"/api/venues/:id/order-items",isArray:!0},getEvents:{method:"GET",url:"/api/venues/:id/events",isArray:!0}});return b}]),angular.module("kyc.resources").factory("VenueCustomers",["$resource",function(a){var b=a("/api/venues/:id/customers",{id:"@id"},{});return b}]),angular.module("kyc.resources").factory("Report",["$resource",function(a){var b=a("/api/reports/:venueId",{venueId:"@venueId"},{items:{method:"GET",isArray:!0,url:"/api/reports/:venueId/items"},orders:{method:"GET",isArray:!0,url:"/api/reports/:venueId/orders"},customerOrders:{method:"GET",isArray:!0,url:"/api/reports/:venueId/customerOrders"}});return b}]),angular.module("kyc").constant("ChartType",{NUMBER:"NUMBER",COLUMN:"COLUMN",PIE:"PIE",AREA:"AREA",AREA_MODAL:"AREA_MODAL"}),angular.module("kyc").constant("Colors",["#18a4dd","#1576b7","#543b87","#392654","#f5b23e","#8bbf4f","#c0392b","#46545d","#b4b6b8","#dcdddf"]),angular.module("kyc").constant("TickInterval",{DAY:864e5,WEEK:6048e5,WEEK_THREE:18144e5,MONTH:2592e6}),angular.module("kyc").constant("PaymentType",{CARD:"CARD",CASH:"CASH"}),angular.module("kyc.directives").directive("chart",["$modal","ChartType","$chartService","Export","ACCOUNT_ID","UtilsService","ChartHelper","$timeout",function(a,b,c,d,e,f,g,h){return{templateUrl:"/code/kyc/js/directives/chart/chart.php",restrict:"E",replace:!0,scope:{chart:"=element"},link:function(d,i){function j(){if(d.chart.showChart)switch(d.chart.value.type){case b.PIE:case b.COLUMN:if(0===d.chart.value.data.length)d.noData=!0;else{var a=!0;angular.forEach(d.chart.value.data,function(b){b.y>0&&(a=!1)}),d.noData=a}break;case b.AREA:d.chart.value.data.length<1&&(d.noData=!0)}else(0===d.chart.value||"NaN"===d.chart.value||0/0==d.chart.value)&&(d.noData=!0)}function k(){if(d.chart.value.modal){var b=Math.max(document.documentElement.clientWidth,window.innerWidth||0),f=b>1300?"large":"xlarge",i=a.open({templateUrl:modal_url("chart"),windowClass:f+" modal-preoday modal-chart",controller:["$scope",function(a){if(a.optionHasData=function(a){return a.data.length>1?1:0},a.noData=!1,a.displayChart=!1,a.ACCOUNT_ID=e,a.chart=angular.copy(d.chart),d.chart.value.modal.highcharts){var b=d.chart.value.modal.options[0];d.chart.value.tickInterval=b.tickInterval,d.chart.value.minTimestamp=moment.utc(b.minTimestamp).valueOf(),d.chart.value.maxTimestamp=moment.utc(b.maxTimestamp).valueOf();var f=angular.copy(d.chart.value);f.data=b.data,a.selectedData=f,a.chart.highcharts=c.getChart(d.chart.value.modal.highcharts.type,f),h(function(){a.displayChart=!0},100)}a.exportPdf=function(){var b=d.chart.value.getPdf();b.startDate=a.selectedData.minTimestamp,b.endDate=a.selectedData.maxTimestamp,b.dataJson=JSON.stringify(a.selectedData.data),a.pdfData=b},a.exportCsv=function(){var b=a.selectedData.data,c=[[moment.utc(a.selectedData.minTimestamp).format("DD-MMM-YYYY")+" - "+moment.utc(a.selectedData.maxTimestamp).format("DD-MMM-YYYY")],["Revenue"]];angular.forEach(b,function(a){c.push([g.formatDate(a[0]),a[1]])}),a.csvData={data:c}},a.showOptions=function(){$(".modal-chart .flip-container").addClass("active"),setTimeout(function(){$(".modal-chart .invisibleBack").addClass("visible")},200)},a.hideOptions=function(){$(".modal-chart .flip-container").removeClass("active"),setTimeout(function(){$(".modal-chart .invisibleBack").removeClass("visible")},200)},a.cancel=function(){i.close()},a.title=d.chart.title,a.selectOption=function(b){a.noData=!1;var e=a.chart.value.modal.options.filter(function(a){return 1==a.active});e&&(e[0].active=!1),b.active=!0,a.selectedData=angular.copy(b),a.selectedData.minTimestamp=moment.utc(b.minTimestamp).valueOf(),a.selectedData.maxTimestamp=moment.utc(b.maxTimestamp).valueOf(),a.chart.highcharts=c.getChart(d.chart.value.modal.highcharts.type,{tooltipText:d.chart.value.tooltipText,data:b.data,currency:d.chart.value.currency,tickInterval:b.tickInterval,minTimestamp:moment.utc(b.minTimestamp).valueOf(),maxTimestamp:moment.utc(b.maxTimestamp).valueOf()}),console.log(a.chart.highcharts.options.chart)},a.setNoData=function(b){a.noData=!0;var c=a.chart.value.modal.options.filter(function(a){return 1==a.active});c&&(c[0].active=!1),b.active=!0}}]});i.opened.then(function(){setTimeout(function(){$(".modal-preoday").addClass("active")},1)})}}function l(){var a=c.getChart(d.chart.value.type,d.chart.value);d.chart.value.items&&(a.options.chart.height=205,i.parent().addClass("highchartsItem")),d.chart.value.type===b.AREA&&(a.options.chart.events={click:k}),d.chart.highcharts=a}d.chart.display||i.parent().hide(),d.ACCOUNT_ID=e,d.noData=!1,j(),d.ChartType=b;var m=(i.find(".actions-chart"),i.find(".chart"),i.closest(".flip-container"));l(),d.showOptions=function(){console.log("show options"),m.addClass("active"),setTimeout(function(){i.find(".invisibleBack").addClass("visible")},200)},d.hideOptions=function(){m.removeClass("active"),setTimeout(function(){i.find(".invisibleBack").removeClass("visible")},100)},d.removeGrid=function(a){a.display=!1,i.parent().hide(),f.reOrderWidgets(i.closest(".sscontainer"))},d.changeItem=function(){d.chart.value.selectItem(d.chart.value.selectedItemId,function(a){d.chart.value=a,l()})},d.exportPdf=function(){d.pdfData=d.chart.value.getPdf()},d.exportCsv=function(){d.csvData=d.chart.value.getCsv()},d.getText=function(a){if("object"==typeof a.value)var b=a.value.numberLeft;else var b=a.value.toLocaleString();return a.currency?decodeURI(a.currency)+b:b}}}}]),angular.module("kyc.directives").factory("highchartsNGUtils",function(){return{indexOf:function(a,b,c){void 0===c&&(c=0),0>c&&(c+=a.length),0>c&&(c=0);for(var d=a.length;d>c;c++)if(c in a&&a[c]===b)return c;return-1},prependMethod:function(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);return c.apply(this,a),d?d.apply(this,a):void 0}},deepExtend:function a(b,c){if(angular.isArray(c)){b=angular.isArray(b)?b:[];for(var d=0;d<c.length;d++)b[d]=a(b[d]||{},c[d])}else if(angular.isObject(c))for(var e in c)b[e]=a(b[e]||{},c[e]);else b=c;return b}}}).directive("highchart",["highchartsNGUtils","$timeout",function(a,b){var c=0,d=function(a){var b=!1;return angular.forEach(a,function(a){angular.isDefined(a.id)||(a.id="series-"+c++,b=!0)}),b},e=["xAxis","yAxis"],f=function(b,c,d){var f={},g={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1}};return f=d.options?a.deepExtend(g,d.options):g,f.chart.renderTo=c[0],angular.forEach(e,function(c){angular.isDefined(d[c])&&(f[c]=angular.copy(d[c]),(angular.isDefined(d[c].currentMin)||angular.isDefined(d[c].currentMax))&&(a.prependMethod(f.chart.events,"selection",function(a){var d=this;b.$apply(a[c]?function(){b.config[c].currentMin=a[c][0].min,b.config[c].currentMax=a[c][0].max}:function(){b.config[c].currentMin=d[c][0].dataMin,b.config[c].currentMax=d[c][0].dataMax})}),a.prependMethod(f.chart.events,"addSeries",function(){b.config[c].currentMin=this[c][0].min||b.config[c].currentMin,b.config[c].currentMax=this[c][0].max||b.config[c].currentMax})))}),d.title&&(f.title=d.title),d.subtitle&&(f.subtitle=d.subtitle),d.credits&&(f.credits=d.credits),d.size&&(d.size.width&&(f.chart.width=d.size.width),d.size.height&&(f.chart.height=d.size.height)),f},g=function(a,b){var c=a.getExtremes();(b.currentMin!==c.dataMin||b.currentMax!==c.dataMax)&&a.setExtremes(b.currentMin,b.currentMax,!1)},h=function(a,b,c){(b.currentMin||b.currentMax)&&a[c][0].setExtremes(b.currentMin,b.currentMax,!0)},i=function(a){return angular.extend({},a,{data:null,visible:null})};return{restrict:"EAC",replace:!0,template:"<div></div>",scope:{config:"="},link:function(c,j){var k={},l=function(b){var e,f=[];if(b){var g=d(b);if(g)return!1;if(angular.forEach(b,function(a){f.push(a.id);var b=m.get(a.id);b?angular.equals(k[a.id],i(a))?(void 0!==a.visible&&b.visible!==a.visible&&b.setVisible(a.visible,!1),b.setData(angular.copy(a.data),!1)):b.update(angular.copy(a),!1):m.addSeries(angular.copy(a),!1),k[a.id]=i(a)}),c.config.noData){var h=!1;for(e=0;e<b.length;e++)if(b[e].data&&b[e].data.length>0){h=!0;break}h?m.hideLoading():m.showLoading(c.config.noData)}}for(e=m.series.length-1;e>=0;e--){var j=m.series[e];a.indexOf(f,j.options.id)<0&&j.remove(!1)}return!0},m=!1,n=function(){m&&m.destroy(),k={};var a=c.config||{},d=f(c,j,a);m=a.useHighStocks?new Highcharts.StockChart(d):new Highcharts.Chart(d);for(var g=0;g<e.length;g++)a[e[g]]&&h(m,a[e[g]],e[g]);a.loading&&m.showLoading(),b(function(){m.reflow()})};n(),c.$watch("config.series",function(a){var b=l(a);b&&m.redraw()},!0),c.$watch("config.title",function(a){m.setTitle(a,!0)},!0),c.$watch("config.subtitle",function(a){m.setTitle(!0,a)},!0),c.$watch("config.loading",function(a){a?m.showLoading():m.hideLoading()}),c.$watch("config.credits.enabled",function(a){a?m.credits.show():m.credits&&m.credits.hide()}),c.$watch("config.useHighStocks",function(a,b){a!==b&&n()}),angular.forEach(e,function(a){c.$watch("config."+a,function(b,c){b!==c&&b&&(m[a][0].update(b,!1),g(m[a][0],angular.copy(b)),m.redraw())},!0)}),c.$watch("config.options",function(a,b,c){a!==b&&(n(),l(c.config.series),m.redraw())},!0),c.$watch("config.size",function(a,b){a!==b&&a&&m.setSize(a.width||void 0,a.height||void 0)},!0),c.$on("highchartsng.reflow",function(){m.reflow()}),c.$on("$destroy",function(){m&&m.destroy(),j.remove()})}}}]),angular.module("kyc.directives").directive("datepicker",["$parse","$filter",function(){return{restrict:"A",require:"ngModel",scope:{compareStart:"=start",compareEnd:"=end"},link:function(a,b,c,d){b.fdatepicker({format:"dd/mm/yyyy",onRender:function(b){if(a.compareStart){var c=b.valueOf()<a.compareStart.valueOf()||b.valueOf()>=moment.utc().endOf("day").valueOf();return c?"disabled":""}if(a.compareEnd){var d=b.valueOf()>moment.utc(a.compareEnd).endOf("day").valueOf();return d?"disabled":""}}}).on("changeDate",function(c){a.$apply(function(){d.$setViewValue(c.date),b.fdatepicker("setDate",c.date)})}),d.$parsers.push(function(a){var b;if("string"==typeof a){var d=a.split("/");b=moment.utc([d[2],+d[1]-1,+d[0]])}else b=moment.utc(a);return void 0!==c.start?b.endOf("day"):b.startOf("day")}),d.$formatters.push(function(a){return a.format("DD/MM/YYYY")})}}}]),angular.module("webapp.components",[]).directive("multiSelect",["$sce","$filter","$timeout",function(a,b,c){return{restrict:"AE",replace:!0,scope:{inputModel:"=",outputModel:"=",buttonLabel:"@",selectionMode:"@",itemLabel:"@",tickProperty:"@",disableProperty:"@",orientation:"@",defaultLabel:"@",maxLabels:"@",enableSearch:"@",isDisabled:"=",directiveId:"@",helperElements:"@",onOpen:"&",onClose:"&",onBlur:"&",onFocus:"&",onChange:"&"},templateUrl:directive_url("multiselect/multiselect.htm"),link:function(b,d,e){b.selectedItems=[],b.backUp=[],b.varButtonLabel="",b.currentButton=null,b.scrolled=!1,b.enableSearch="true"===b.enableSearch,b.filteredModel=[],b.inputLabel={labelFilter:""},b.displayHelper=function(a){if("undefined"==typeof e.helperElements)return!0;switch(a.toUpperCase()){case"ALL":if(e.selectionMode&&"SINGLE"===b.selectionMode.toUpperCase())return!1;if(e.helperElements&&b.helperElements.toUpperCase().indexOf("ALL")>=0)return!0;break;case"NONE":if(e.selectionMode&&"SINGLE"===b.selectionMode.toUpperCase())return!1;if(e.helperElements&&b.helperElements.toUpperCase().indexOf("NONE")>=0)return!0;break;case"RESET":if(e.helperElements&&b.helperElements.toUpperCase().indexOf("RESET")>=0)return!0;break;case"FILTER":if(e.helperElements&&b.helperElements.toUpperCase().indexOf("FILTER")>=0)return!0}},b.updateFilter=function(){b.filteredModel=[];var a=0;if("undefined"==typeof b.inputModel)return[];if(""===b.inputLabel.labelFilter)return void(b.filteredModel=b.inputModel);for(a=b.inputModel.length-1;a>=0;a--){"undefined"!=typeof b.inputModel[a][b.groupProperty]&&b.inputModel[a][b.groupProperty]===!1&&b.filteredModel.push(b.inputModel[a]);var d=!1;if("undefined"==typeof b.inputModel[a][b.groupProperty]){for(var e in b.inputModel[a])if("boolean"!=typeof b.inputModel[a][e]&&String(b.inputModel[a][e]).toUpperCase().indexOf(b.inputLabel.labelFilter.toUpperCase())>=0){d=!0;break}d===!0&&b.filteredModel.push(b.inputModel[a])}"undefined"!=typeof b.inputModel[a][b.groupProperty]&&b.inputModel[a][b.groupProperty]===!0&&("undefined"!=typeof b.filteredModel[b.filteredModel.length-1][b.groupProperty]&&b.filteredModel[b.filteredModel.length-1][b.groupProperty]===!1?b.filteredModel.pop():b.filteredModel.push(b.inputModel[a]))}b.filteredModel.reverse(),c(function(){b.getFormElements()},0)},b.getFormElements=function(){b.formElements=[];for(var a=0;a<d[0].getElementsByTagName("FORM")[0].elements.length;a++)b.formElements.push(d[0].getElementsByTagName("FORM")[0].elements[a])},b.syncItems=function(a,c){var d=b.filteredModel.indexOf(a);if(b.filteredModel[d][b.tickProperty]=!b.filteredModel[d][b.tickProperty],e.selectionMode&&"SINGLE"===b.selectionMode.toUpperCase()){b.filteredModel[d][b.tickProperty]=!0;for(var f=0;f<b.filteredModel.length;f++)f!==d&&(b.filteredModel[f][b.tickProperty]=!1);b.toggleCheckboxes(c)}b.refreshSelectedItems(),b.onChange()},b.refreshSelectedItems=function(){b.varButtonLabel="",b.selectedItems=[];var a=0;if(angular.forEach(b.filteredModel,function(a){"undefined"!=typeof a&&(a[b.tickProperty]===!0||"true"===a[b.tickProperty])&&b.selectedItems.push(a)}),"undefined"!=typeof e.outputModel&&(b.outputModel=angular.copy(b.selectedItems)),0===b.selectedItems.length)b.varButtonLabel=b.defaultLabel?b.defaultLabel:"None selected";else{var c=b.selectedItems.length;"undefined"!=typeof b.maxLabels&&""!==b.maxLabels&&(c=b.maxLabels),b.more=b.selectedItems.length>c?!0:!1,angular.forEach(b.selectedItems,function(d){"undefined"!=typeof d&&(c>a&&(b.varButtonLabel+=(b.varButtonLabel.length>0?", ":"")+b.writeLabel(d,"buttonLabel")),a++)}),b.more===!0&&(c>0&&(b.varButtonLabel+=", ... "),b.varButtonLabel+="(Total: "+b.selectedItems.length+")")}},b.itemIsDisabled=function(a){return a[b.disableProperty]===!0?!0:b.isDisabled===!0?!0:!1},b.writeLabel=function(c,d){var e="",f=b[d].split(" ");return angular.forEach(f,function(a){"undefined"!=typeof a&&angular.forEach(c,function(b,c){c==a&&(e+=" "+b)})}),a.trustAsHtml(e)},b.prepareIndex=function(){var a=0;angular.forEach(b.filteredModel,function(c){c[b.indexProperty]=a,a++})},b.keyboardListener=function(a){var c=a.keyCode?a.keyCode:a.which,d=!1;if(27===c)b.toggleCheckboxes(a);else if(40===c||39===c||!a.shiftKey&&9==c)for(d=!0,prevTabIndex=b.tabIndex,b.tabIndex++,b.tabIndex>b.formElements.length-1&&(b.tabIndex=0,prevTabIndex=b.formElements.length-1);b.formElements[b.tabIndex].disabled===!0;)b.tabIndex++,b.tabIndex>b.formElements.length-1&&(b.tabIndex=0);else if(38===c||37===c||a.shiftKey&&9==c)for(d=!0,prevTabIndex=b.tabIndex,b.tabIndex--,b.tabIndex<0&&(b.tabIndex=b.formElements.length-1,prevTabIndex=0);b.formElements[b.tabIndex].disabled===!0;)b.tabIndex--,b.tabIndex<0&&(b.tabIndex=b.formElements.length-1);if(d===!0){a.preventDefault(),a.stopPropagation(),b.formElements[b.tabIndex].focus();var e=document.activeElement;"CHECKBOX"===e.type.toUpperCase()?(b.setFocusStyle(b.tabIndex),b.removeFocusStyle(prevTabIndex)):(b.removeFocusStyle(prevTabIndex),b.removeFocusStyle(helperItemsLength),b.removeFocusStyle(b.formElements.length-1))}d=!1},b.toggleCheckboxes=function(a){a.target&&("BUTTON"!==a.target.tagName.toUpperCase()&&a.target.className.indexOf("multiSelectButton")<0?e.selectionMode&&"SINGLE"===b.selectionMode.toUpperCase()?"INPUT"===a.target.tagName.toUpperCase()&&(a=b.findUpTag(a.target,"div","checkboxLayer"),a=a.previousSibling.previousSibling):a=b.findUpTag(a.target,"button","multiSelectButton"):a=a.target),b.inputLabel.labelFilter="",b.updateFilter();for(var c=-1,d=document.querySelectorAll(".checkboxLayer"),f=document.querySelectorAll(".multiSelectButton"),g=0;g<f.length;g++)if(a===f[g]){c=g;break}if(c>-1){for(var g=0;g<d.length;g++)g!=c&&(d[g].className="multiSelect checkboxLayer select2-drop-active hide");"multiSelect checkboxLayer select2-drop-active hide"==d[c].className?(b.currentButton=f[c],d[c].className="multiSelect checkboxLayer dropdown pdDropdown select2-drop-active show",b.onOpen()):"multiSelect checkboxLayer dropdown pdDropdown select2-drop-active show"==d[c].className&&(d[c].className="multiSelect checkboxLayer select2-drop-active hide",b.onClose())}},b.findUpTag=function(a,b,c){for(;a.parentNode;)if(a=a.parentNode,"undefined"!=typeof a.tagName&&a.tagName.toUpperCase()===b.toUpperCase()&&a.className.indexOf(c)>-1)return a;return null},b.select=function(a){switch(a.toUpperCase()){case"ALL":angular.forEach(b.filteredModel,function(a){"undefined"!=typeof a&&a[b.disableProperty]!==!0&&(a[b.tickProperty]=!0)});break;case"NONE":angular.forEach(b.filteredModel,function(a){"undefined"!=typeof a&&a[b.disableProperty]!==!0&&(a[b.tickProperty]=!1)});break;case"RESET":b.filteredModel=angular.copy(b.backUp)}b.refreshSelectedItems()};var f=function(){"inputModel"in e||console.log("Multi-select error: input-model is not defined! (ID: "+b.directiveId+")"),"buttonLabel"in e||console.log("Multi-select error: button-label is not defined! (ID: "+b.directiveId+")"),"itemLabel"in e||console.log("Multi-select error: item-label is not defined! (ID: "+b.directiveId+")"),"tickProperty"in e||console.log("Multi-select error: tick-property is not defined! (ID: "+b.directiveId+")")},g=function(a,b){var c=!1;angular.forEach(a,function(a){if("undefined"!=typeof a){var d=!0;angular.forEach(b,function(b){if("undefined"!=typeof b&&d&&!(a in b)){c=!0,d=!1}})}})};f(),b.refreshSelectedItems(),b.$watch("inputModel",function(){"undefined"!==b.newVal&&(g(b.itemLabel.split(" "),b.inputModel),g(new Array(b.tickProperty),b.inputModel)),b.updateFilter(),b.refreshSelectedItems()},!0),b.$watch("inputModel",function(){"undefined"!==b.newVal&&(g(b.itemLabel.split(" "),b.inputModel),g(new Array(b.tickProperty),b.inputModel)),b.backUp=angular.copy(b.inputModel),b.refreshSelectedItems()}),b.$watch("isDisabled",function(a){b.isDisabled=a}),angular.element(document).bind("touchstart",function(){b.$apply(function(){b.scrolled=!1})}),angular.element(document).bind("touchmove",function(){b.$apply(function(){b.scrolled=!0})}),angular.element(document).bind("click touchend",function(a){if("click"===a.type||"touchend"===a.type&&b.scrolled===!1){var c=document.querySelectorAll(".checkboxLayer");if(void 0===a.target.className.indexOf||-1===a.target.className.indexOf("multiSelect")&&-1===a.target.className.indexOf("inputFilter")&&-1===a.target.className.indexOf("clearButton")){for(var d=0;d<c.length;d++)c[d].className="multiSelect checkboxLayer select2-drop-active hide";a.stopPropagation()}}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){b=b||0;for(var c=this.length;c>b;){if(this[b]===a)return b;++b}return-1})}}}]),angular.module("kyc.directives").directive("shapeshift",["UtilsService","$timeout",function(a,b){return{restrict:"A",link:function(c,d,e){b(function(){var b=$(d).shapeshift(c.$eval(e.shapeshift));b.on("ss-rearranged",function(){a.reOrderWidgets(d)})})}}}]),angular.module("kyc.directives").directive("dotdotdot",function(){return{restrict:"A",link:function(a,b){a.$watch(function(){b.dotdotdot({watch:!0})})}}}),angular.module("kyc.directives").directive("marketing",["MarketingResources",function(a){return{restrict:"A",replace:"true",templateUrl:"/code/kyc/js/directives/marketing/header.php",scope:{chart:"=element"},link:function(b,c,d){var e=c[0].tagName.toLowerCase();b.which=d.marketing,b.marketing=a[b.which],"th"===e&&(b.setOrderBy=function(a){b.$parent.setOrderBy(a)})}}}]),angular.module("kyc.charts").factory("AllCharts",["$q","OrderService","UtilsService","Venue","VENUE_ID","PayingCustomers","OrdersPerCustomer","AverageOrderValue","ItemsOrdered","OrdersByOutlet","MostPopularItems","TimeOfOrdersPlaced","CustomersPie","CustomersBar","Revenue","NumberOfOrders","MenuItemPopularity","AverageOrderValueArea","OrdersPerChannel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(a,c,d,e){y=d,b.load(a,c).then(function(b){w(b,a,c,e)})}function u(f,g,h,i){var j=a.defer();y=h;var k=[];return i.length&&(k=i.map(function(a){return a.id})),d.getItems({id:e,outletIds:k.join(",")}).$promise.then(function(a){c.setItems(a)}),b.load(f,g,k).then(function(a){w(a,f,g,i),j.resolve(A)}),j.promise}function v(a,b){var c=!1;return angular.forEach(a,function(a){c||a.id!=b||(c=a)}),c}function w(a,b,c,d){b=moment.utc(b),c=moment.utc(c),d||(d=[]),angular.forEach(A,function(a){a.clearData()}),angular.forEach(a,function(a){(0===d.length||v(d,a.outletId))&&angular.forEach(A,function(d){d.setData(a,b,c,y)})}),angular.forEach(A,function(a){a.onSetDataComplete&&a.onSetDataComplete(b,c,y)}),z.resolve(A)}function x(){var a=[];return angular.forEach(A,function(b){a.push(b.getHighChart?b.getHighChart():b)}),a}var y,z=a.defer(),A={payingCustomers:f,ordersPerCustomer:g,averageOrderValue:h,itemsOrdered:i,revenue:o,numberOfOrders:p,odersPerChannel:s,mostPopularItems:k,menuItemPopularity:q,averageOrderValueArea:r,customersBar:n,timeOfOrdersPlaced:l,ordersByOutlet:j};return{init:t,promise:z.promise,getPreparedCharts:x,prepareCharts:w,reloadCharts:u}}]),angular.module("kyc.charts").factory("ChartHelper",["$filter","TickInterval",function(a,b){function c(b){var c=new Date(b);return a("date")(c,"dd-MMM-yyyy")}function d(a,b){var c=e(a),d=e(b),f=100*c/d;return 1/0===f?"":f.toFixed(2)}function e(a){var b=0;return angular.forEach(a,function(a){b+=+a[1]}),(+b).toFixed(0)}function f(a,b,c,d){d=d?d:!1;var e=moment.utc(b-(c-b)),f=moment.utc().startOf("day").subtract("week",1),g=moment.utc().subtract("week",2),j=moment.utc().subtract("month",1),n=moment.utc().subtract("month",2),o=moment.utc().subtract("month",3),p=moment.utc().subtract("month",6),q=moment.utc().subtract("month",6),r=moment.utc().subtract("month",12),s=moment.utc().subtract("year",1),t=moment.utc().subtract("year",2),u=[],v=[],w=[],x=[],y=[],z=[],A=[],B=[],C=[],D=[],E=[],F=[],G=0,H=[],I=h({maxTimestamp:c,minTimestamp:b}),J=null;switch(I){case"day":J=m.day;break;case"week":J=m.week;break;case"month":J=m.month}return angular.forEach(a,function(a,d){var h=Number(d),i=[Number(d),Number(a.toFixed(2))];h>=b&&c>=h?(J(v,i),u.push(i),G+=a):b>h&&h>=e&&w.push(i),h>=f&&m.day(x,i),h>=g&&f>h&&y.push(i),h>=j&&m.day(z,i),h>=n&&j>h&&A.push(i),h>=o&&m.week(B,i),h>=p&&o>h&&C.push(i),h>=q&&m.week(D,i),h>=r&&q>h&&E.push(i),h>=s&&m.month(H,i),h>=t&&s>h&&F.push(i)}),u.sort(k),v.sort(k),x.sort(k),y.sort(k),z.sort(k),A.sort(k),B.sort(k),C.sort(k),D.sort(k),E.sort(k),H.sort(k),F.sort(k),d&&(G=G.toFixed(2)),{data:i({max:moment.utc(c).startOf("day"),min:moment.utc(b).startOf("day").valueOf(),value:v,dateType:h({maxTimestamp:c,minTimestamp:b}),filterData:function(a,b){switch(this.dateType){case"day":return l.day(a,b);case"week":return l.week(a,b);case"month":return l.month(a,b)}}}),dataModal:v,previousSpecifiedData:w,weekData:x,previousWeekData:y,monthData:z,previousMonthData:A,threeMonthsData:B,previousThreeMonthsData:C,sixMonthsData:D,previousSixMonthsData:E,yearData:H,previousYearData:F,total:G,minTimestamp:b,maxTimestamp:c}}function g(a){var c=moment.utc(a.maxTimestamp,"X").diff(moment.utc(a.minTimestamp,"X"),"days");switch(!0){case 32>c:return b.DAY;case 92>c:return b.WEEK;case 183>c:return b.WEEK_THREE;default:return b.MONTH}}function h(a){var b=moment.utc(a.maxTimestamp,"X").diff(moment.utc(a.minTimestamp,"X"),"days");switch(!0){case 32>b:return"day";case 183>b:return"week";default:return"month"}}function i(a){for(var b=a.max,c=a.min,d=angular.copy(a.value);;){var e=b.valueOf();if(c>e)break;var f=a.filterData(d,e);if(!f.length){var g=[e,0];d.push(g)}b=b.subtract(a.dateType,1)}return d.sort(k),d}function j(a){return[{name:_tr("Date Range"),value:e(a.data),percent:d(a.data,a.previousSpecifiedData),active:!0,data:i({max:moment.utc(a.maxTimestamp).startOf("day"),min:moment.utc(a.minTimestamp).startOf("day").valueOf(),value:a.dataModal,dateType:h(a),filterData:function(a,b){switch(this.dateType){case"day":return l.day(a,b);case"week":return l.week(a,b);case"month":return l.month(a,b)}}}),tickInterval:g(a),minTimestamp:a.minTimestamp,maxTimestamp:a.maxTimestamp},{name:_tr("Week"),value:e(a.weekData),percent:d(a.weekData,a.previousWeekData),data:i({max:moment.utc().startOf("day"),min:moment.utc().startOf("day").subtract("week",1).valueOf(),value:a.weekData,dateType:"day",filterData:l.day}),tickInterval:b.DAY,minTimestamp:moment.utc().subtract("week",1),maxTimestamp:moment.utc()},{name:_tr("Month"),value:e(a.monthData),percent:d(a.monthData,a.previousMonthData),data:i({max:moment.utc().startOf("day"),min:moment.utc().startOf("day").subtract("month",1).valueOf(),value:a.monthData,dateType:"day",filterData:l.day}),tickInterval:b.DAY,minTimestamp:moment.utc().subtract("month",1),maxTimestamp:moment.utc()},{name:_tr("3 Months"),value:e(a.threeMonthsData),percent:d(a.threeMonthsData,a.previousThreeMonthsData),data:i({max:moment.utc().startOf("day"),min:moment.utc().startOf("day").subtract("month",3).valueOf(),value:a.threeMonthsData,dateType:"week",filterData:l.week}),tickInterval:b.WEEK,minTimestamp:moment.utc().subtract("month",3),maxTimestamp:moment.utc()},{name:_tr("6 Months"),value:e(a.sixMonthsData),percent:d(a.sixMonthsData,a.previousSixMonthsData),data:i({max:moment.utc().startOf("day"),min:moment.utc().startOf("day").subtract("month",6).valueOf(),value:a.sixMonthsData,dateType:"week",filterData:l.week}),tickInterval:b.WEEK_THREE,minTimestamp:moment.utc().subtract("month",6),maxTimestamp:moment.utc()},{name:_tr("Year"),value:e(a.yearData),percent:d(a.yearData,a.previousYearData),data:i({max:moment.utc().startOf("month"),min:moment.utc().startOf("month").subtract("year",1).valueOf(),value:a.yearData,dateType:"month",filterData:l.month}),tickInterval:b.MONTH,minTimestamp:moment.utc().subtract("year",1),maxTimestamp:moment.utc()}]
}function k(a,b){return a[0]-b[0]}var l={day:function(a,b){return a.filter(function(a){return moment.utc(a[0]).valueOf()===moment.utc(b).valueOf()})},week:function(a,b){return a.filter(function(a){return moment.utc(a[0]).week()===moment.utc(b).week()})},month:function(a,b){return a.filter(function(a){return moment.utc(a[0]).month()==moment.utc(b).month()})}},m={day:function(a,b){var c=l.day(a,b[0]),d=angular.copy(b);c.length?(c[1]+=d[1],c[1]=(+c[1]).toFixed(2)/1):(d[0]=moment.utc(d[0]).startOf("day").valueOf(),a.push(d))},week:function(a,b){var c=l.week(a,b[0]),d=angular.copy(b);if(c.length){var e=a.indexOf(c[0]);a[e][1]+=d[1],a[e][1]=(+a[e][1]).toFixed(2)/1}else d[0]=moment.utc(d[0]).startOf("week").valueOf(),a.push(d)},month:function(a,b){var c=l.month(a,b[0]),d=angular.copy(b);if(c.length){var e=a.indexOf(c[0]);a[e][1]+=d[1],a[e][1]=(+a[e][1]).toFixed(2)/1}else d[0]=moment.utc(d[0]).startOf("month").valueOf(),a.push(d)}};return{formatDate:c,getPercentage:d,getPeriodTotal:e,getPreparedAreaData:f,getModalOptions:j}}]),angular.module("kyc.charts").factory("PayingCustomers",["ChartType","PaymentType",function(a,b){function c(){i=[],j=[]}function d(a,c,d){var e=a.paymentType==b.CASH?a.created:a.paid;if(e=moment.utc(e).valueOf(),e>=c.valueOf()&&e<=d.valueOf()){var f=a.userId;-1===i.indexOf(f)?i.push(f):-1===j.indexOf(f)&&j.push(f)}}function e(){return i.length}function f(){return h}function g(){return{type:h,title:k,data:e()}}var h=a.NUMBER,i=[],j=[],k=_tr("Total Customers");return{getData:e,getType:f,setData:d,getHighChart:g,clearData:c}}]),angular.module("kyc.charts").factory("OrdersPerCustomer",["ChartType","PaymentType",function(a,b){function c(){i=[],j=[],k=0}function d(a,c,d){var e=a.paymentType==b.CASH?a.created:a.paid;if(e=moment.utc(e),e>=c&&d>=e){k++;var f=a.userId;-1===i.indexOf(f)?i.push(f):-1===j.indexOf(f)&&j.push(f)}}function e(){return(k/i.length).toFixed(2)}function f(){return h}function g(){return{type:h,title:l,data:e()}}var h=a.NUMBER,i=[],j=[],k=0,l=_tr("Orders per Customer");return{getData:e,getType:f,setData:d,getHighChart:g,clearData:c}}]),angular.module("kyc.charts").factory("AverageOrderValue",["ChartType","PaymentType",function(a,b){function c(a,c,d,e){l=e;var f=a.paymentType==b.CASH?a.created:a.paid;f=moment.utc(f),f>=c&&d>=f&&(j++,i+=a.total)}function d(){i=0,j=0}function e(){return(i/j).toFixed(2)}function f(){return h}function g(){return{type:h,title:k,data:e(),currency:l}}var h=a.NUMBER,i=0,j=0,k=_tr("Average Order Value"),l="";return{getData:e,getType:f,setData:c,getHighChart:g,clearData:d}}]),angular.module("kyc.charts").factory("ItemsOrdered",["ChartType","PaymentType",function(a,b){function c(a,c,d){var e=a.paymentType==b.CASH?a.created:a.paid;e=moment.utc(e),e>=c&&d>=e&&angular.forEach(a.items,function(a){i+=a.qty})}function d(){return i}function e(){return h}function f(){return{type:h,title:j,data:d()}}function g(){i=0}var h=a.NUMBER,i=0,j=_tr("Items Ordered");return{getData:d,getType:e,setData:c,getHighChart:f,clearData:g}}]),angular.module("kyc.charts").factory("OrdersByOutlet",["ChartType","Colors","OutletService","ChartHelper","PaymentType",function(a,b,c,d,e){function f(){p=0,o={}}function g(a,b,c){r=b.valueOf(),s=c.valueOf();var d=a.paymentType==e.CASH?a.created:a.paid;if(d=moment.utc(d),d>=b&&c>=d){var f=a.outletId;void 0===o[f]&&(o[f]={y:0}),o[f].y+=1}}function h(){p=0;var a=[];return angular.forEach(o,function(d,e){a.push({name:c.getOutletName(e),color:b[p],y:d.y}),p++}),a}function i(){return n}function j(){return{type:n,title:q,data:h(),getPdf:l,getCsv:k}}function k(){var a=h(),b=[[moment.utc(r).format("DD-MMM-YYYY")+" - "+moment.utc(s).format("DD-MMM-YYYY")],[q]];return angular.forEach(a,function(a){b.push([a.name,a.y])}),{data:b}}function l(){return{type:n,title:q,startDate:r,endDate:s,dataJson:JSON.stringify(h()),categories:m()}}function m(){var a=[];return angular.forEach(o,function(b,d){a.push(c.getOutletName(d))}),a}var n=a.PIE,o={},p=0,q=_tr("Orders By Outlet"),r=0,s=0;return{getData:h,getType:i,setData:g,getHighChart:j,clearData:f}}]),angular.module("kyc.charts").factory("MostPopularItems",["ChartType","Colors","ChartHelper","UtilsService","PaymentType",function(a,b,c,d,e){function f(){q={},u=[{y:0,color:b[0]},{y:0,color:b[1]},{y:0,color:b[2]},{y:0,color:b[3]},{y:0,color:b[4]}]}function g(a,b,c){s=b.valueOf(),t=c.valueOf();var d=a.paymentType==e.CASH?a.created:a.paid;d=moment.utc(d),d>=b&&c>=d&&angular.forEach(a.items,function(a){void 0!==q[a.menuItemId]?q[a.menuItemId].quantity+=a.qty:q[a.menuItemId]={id:a.menuItemId,name:a.name,quantity:a.qty}})}function h(a){var b=[];return angular.forEach(a,function(a){b.push(a.menuItemId)}),b}function i(){for(var a=h(d.getItems()),b=_.chain(_.values(q)).filter(function(b){return a.indexOf(b.id)>-1}).sortBy(function(a){return-a.quantity}).first(5).value(),c=0;c<b.length;c++)u[c].y=b[c].quantity,u[c].name=b[c].name;var e=b.length,f=u.length;if(f>e){var g=f-e;u.splice(e,g)}}function j(){return u}function k(){return p}function l(){return{type:p,title:r,data:j(),getPdf:n,getCsv:m}}function m(){var a=j(),b=[[moment.utc(s).format("DD-MMM-YYYY")+" - "+moment.utc(t).format("DD-MMM-YYYY")],[r]];return angular.forEach(a,function(a){b.push([a.name,a.y])}),{data:b}}function n(){return{type:p,title:r,startDate:s,endDate:t,dataJson:angular.toJson(j()),categories:o()}}function o(){var a=[];return angular.forEach(u,function(b){a.push(b.name)}),a}var p=a.PIE,q={},r=_tr("Most Popular Items"),s=0,t=0,u=[{y:0,color:b[0]},{y:0,color:b[1]},{y:0,color:b[2]},{y:0,color:b[3]},{y:0,color:b[4]}];return{getData:j,getType:k,setData:g,onSetDataComplete:i,getHighChart:l,clearData:f}}]),angular.module("kyc.charts").factory("TimeOfOrdersPlaced",["ChartType","Colors","ChartHelper","PaymentType",function(a,b,c,d){function e(){m=[{name:_tr("On the day"),y:0,color:b[0]},{name:_tr("In advance"),y:0,color:b[1]}],o=0}function f(a,b,c){q=b.valueOf(),r=c.valueOf();var e=a.paymentType==d.CASH?a.created:a.paid;if(e=moment.utc(e),e>=b&&c>=e&&void 0!==a.paid&&void 0!==a.pickupTime){var f=moment.utc(a.paid).startOf("day").valueOf(),g=moment.utc(a.pickupTime).startOf("day").valueOf();f===g||null==a.paid&&"CASH"==a.paymentType?m[0].y++:m[1].y++}}function g(){}function h(){return m}function i(){return n}function j(){return{type:n,title:p,data:h(),getPdf:l,getCsv:k}}function k(){var a=h(),b=[[moment.utc(q).format("DD-MMM-YYYY")+" - "+moment.utc(r).format("DD-MMM-YYYY")],[p]];return angular.forEach(a,function(a){b.push([a.name,a.y])}),{data:b}}function l(){return{type:n,title:p,startDate:q,endDate:r,dataJson:JSON.stringify(m),categories:[_tr("On the day"),_tr("In advance")]}}var m,n=a.PIE,o=0,p=_tr("Time of Orders Placed"),q=0,r=0;return{getData:h,getType:i,setData:f,onSetDataComplete:g,getHighChart:j,clearData:e}}]),angular.module("kyc.charts").factory("AverageOrderValueArea",["ChartType","ChartHelper","PaymentType",function(a,b,c){function d(a){var b=a.paymentType==c.CASH?a.created:a.paid;b=moment.utc(b).endOf("day").valueOf(),p[b]?(p[b]+=a.total,++q[b]):(p[b]=a.total,q[b]=1)}function e(a,c,d){n=d,v=a.valueOf(),w=c.valueOf(),s=b.getPreparedAreaData(p,a,c,!0),t=b.getPreparedAreaData(q,a,c,!0),u=f(s,t,a,c)}function f(a,b,c,d){var e={};return angular.forEach(a,function(a,c){if(a instanceof Array){for(var d=[],f=0,g=a.length;g>f;f++){var h=a[f],i=0,j=b[c][f][1];h[1]>0&&j>0&&(i=(h[1]/j).toFixed(2)/1),d.push([h[0],i])}e[c]=d}else e[c]=(a/b[c]).toFixed(2)/1}),{data:e.data,dataModal:e.dataModal,previousSpecifiedData:e.previousSpecifiedData,weekData:e.weekData,previousWeekData:e.previousWeekData,monthData:e.monthData,previousMonthData:e.previousMonthData,threeMonthsData:e.threeMonthsData,previousThreeMonthsData:e.previousThreeMonthsData,sixMonthsData:e.sixMonthsData,previousSixMonthsData:e.previousSixMonthsData,yearData:e.yearData,previousYearData:e.previousYearData,total:isNaN(e.total)?0..toFixed(2):e.total.toFixed(2),minTimestamp:c,maxTimestamp:d}}function g(){return u.data}function h(){return o}function i(){return{type:o,title:r,data:g(),currency:n,numberLeft:u.total,modal:m(),getPdf:l,getCsv:j,tooltipText:decodeURI(n)}}function j(){var a=g(),c=[[moment.utc(v).format("DD-MMM-YYYY")+" - "+moment.utc(w).format("DD-MMM-YYYY")],[r]];return angular.forEach(a,function(a){c.push([b.formatDate(a[0]),a[1]])}),{data:c}}function k(){p={},q={},s={},t={},u={}}function l(){return{type:o,title:r,startDate:v,endDate:w,total:u.total,currency:n,percentage:b.getPercentage(u.data,u.previousSpecifiedData),dataJson:JSON.stringify(g())}}function m(){return{highcharts:{type:a.AREA_MODAL},options:b.getModalOptions(u)}}var n,o=a.AREA,p={},q={},r=_tr("Average order value (area)"),s={},t={},u={},v=0,w=0;return{getData:g,getType:h,clearData:k,setData:d,onSetDataComplete:e,getHighChart:i}}]),angular.module("kyc.charts").factory("CustomersPie",["ChartType","Colors","ChartHelper","PaymentType",function(a,b,c,d){function e(){m=0,o=[{name:_tr("New"),y:0,color:b[0]},{name:_tr("Returning"),y:0,color:b[1]}],p=[],q=[]}function f(a,b,c){r=b.valueOf(),s=c.valueOf();var e=a.paymentType==d.CASH?a.created:a.paid;if(e=moment.utc(e),e>=b&&c>=e){var f=a.userId;-1===p.indexOf(f)?(p.push(f),o[0].y++):-1===q.indexOf(f)&&(q.push(f),o[1].y++)}}function g(){return o}function h(){return l}function i(){return{type:l,title:n,data:g(),getPdf:k,getCsv:j}}function j(){var a=g(),b=[[moment.utc(r).format("DD-MMM-YYYY")+" - "+moment.utc(s).format("DD-MMM-YYYY")],[n]];return angular.forEach(a,function(a){b.push([a.name,a.y])}),{data:b}}function k(){return{type:l,title:n,startDate:r,endDate:s,dataJson:JSON.stringify(o),categories:[o[0].name,o[1].name]}}var l=a.PIE,m=0,n=_tr("Customers (Pie)"),o=[{name:_tr("New"),y:0,color:b[0]},{name:_tr("Returning"),y:0,color:b[1]}],p=[],q=[],r=0,s=0;return{getData:g,getType:h,setData:f,getHighChart:i,clearData:e}}]),angular.module("kyc.charts").factory("CustomersBar",["ChartType","ChartHelper","PaymentType",function(a,b,c){function d(a,b,d){p=b.valueOf(),q=d.valueOf();var e=a.paymentType==c.CASH?a.created:a.paid;if(e=moment.utc(e),e>=b&&d>=e){var f=a.userId;-1===n.indexOf(f)?(n.push(f),m[0].y++):-1===o.indexOf(f)&&(o.push(f),m[1].y++)}}function e(){m=[{name:_tr("Total"),y:0},{name:_tr("Returning"),y:0}],n=[],o=[]}function f(){return m}function g(){return k}function h(){return{type:k,title:l,data:f(),getPdf:j,getCsv:i}}function i(){var a=f(),b=[[moment.utc(p).format("DD-MMM-YYYY")+" - "+moment.utc(q).format("DD-MMM-YYYY")],[l]];return angular.forEach(a,function(a){b.push([a.name,a.y])}),{data:b}}function j(){return{type:k,title:l,startDate:p,endDate:q,dataJson:JSON.stringify([m[0].y,m[1].y]),categories:[m[0].name,m[1].name]}}var k=a.COLUMN,l=_tr("Customers (Bar)"),m=[{name:_tr("Total"),y:0},{name:_tr("Returning"),y:0}],n=[],o=[],p=0,q=0;return{getData:f,getType:g,setData:d,getHighChart:h,clearData:e}}]),angular.module("kyc.charts").factory("NumberOfOrders",["ChartType","ChartHelper","PaymentType",function(a,b,c){function d(a){var b=a.paymentType==c.CASH?a.created:a.paid;b=moment.utc(b).startOf("day").valueOf(),n[b]?n[b]++:n[b]=1}function e(a,c){p=a.valueOf(),q=c.valueOf(),r=b.getPreparedAreaData(n,a,c)}function f(){return r.data}function g(){return m}function h(){return{type:m,title:o,data:f(),numberLeft:r.total,numberRight:b.getPercentage(f(),r.previousSpecifiedData),modal:l(),getPdf:i,getCsv:k,tooltipText:_tr(" orders")}}function i(){return{type:m,title:o,startDate:p,endDate:q,total:r.total,currency:"",percentage:b.getPercentage(r.data,r.previousSpecifiedData),dataJson:JSON.stringify(f())}}function j(){r={},n={}}function k(){var a=f(),c=[[moment.utc(p).format("DD-MMM-YYYY")+" - "+moment.utc(q).format("DD-MMM-YYYY")],[o]];return angular.forEach(a,function(a){c.push([b.formatDate(a[0]),a[1]])}),{data:c}}function l(){return{highcharts:{type:a.AREA_MODAL},options:b.getModalOptions(r)}}var m=a.AREA,n={},o=_tr("Number of Orders"),p=0,q=0,r={};return{getData:f,getType:g,clearData:j,setData:d,onSetDataComplete:e,getHighChart:h}}]),angular.module("kyc.charts").factory("OrdersPerChannel",["ChartType","Colors","ChartHelper","gettextCatalog","PaymentType",function(a,b,c,d,e){function f(){n=[{name:d.getString("Mobile app"),y:0,color:b[0]},{name:d.getString("Website"),y:0,color:b[1]}],p=0}function g(a,b,c){var d=a.paymentType==e.CASH?a.created:a.paid;d=moment.utc(d),d>=b&&c>=d&&(1==a.sourceAppId||23==a.sourceAppId?n[1].y++:n[0].y++)}function h(a,b){r=a.valueOf(),s=b.valueOf()}function i(){return n}function j(){return o}function k(){return{type:o,title:q,data:i(),getPdf:m,getCsv:l}}function l(){var a=i(),b=[[moment.utc(r).format("DD-MMM-YYYY")+" - "+moment.utc(s).format("DD-MMM-YYYY")],[q]];return angular.forEach(a,function(a){b.push([a.name,a.y])}),{data:b}}function m(){return{type:o,title:q,startDate:r,endDate:s,dataJson:JSON.stringify(n),categories:[d.getString("Mobile app"),d.getString("Website")]}}var n,o=a.PIE,p=0,q=d.getString("Orders per channel"),r=0,s=0;return{getData:i,getType:j,setData:g,onSetDataComplete:h,getHighChart:k,clearData:f}}]),angular.module("kyc.charts").factory("MenuItemPopularity",["ChartType","ChartHelper","UtilsService","PaymentType",function(a,b,c,d){function e(a){var b=a.paymentType==d.CASH?a.created:a.paid;b=moment.utc(b).startOf("day").valueOf(),angular.forEach(a.items,function(a){void 0===u[a.menuItemId]&&(v=null===v?a.menuItemId:Number(v),u[a.menuItemId]={}),void 0===u[a.menuItemId][b]&&(u[a.menuItemId][b]=0),u[a.menuItemId][b]+=a.qty})}function f(a,b){v=a,window.sessionStorage.setItem("KYC_SELECTED_ITEM",a),g(q,r),b(j())}function g(a,c){q=a,r=c,w=b.getPreparedAreaData(u[v],q,r,!1)}function h(){return w.data}function i(){return s}function j(){return{type:s,title:t,selectedItemId:v,selectedItem:o(v),selectItem:f,data:h(),numberLeft:w.total,modal:p(),items:c.getItems(),getPdf:l,getCsv:k,tooltipText:_tr(" orders")}}function k(){var a=h(),c=[[q.format("DD-MMM-YYYY")+" - "+r.format("DD-MMM-YYYY")],[n(v)]];return angular.forEach(a,function(a){c.push([b.formatDate(a[0]),a[1]])}),{data:c}}function l(){return{type:s,title:t+" - "+n(v),startDate:q.valueOf(),endDate:r.valueOf(),total:w.total,percentage:b.getPercentage(w.data,w.previousSpecifiedData),dataJson:JSON.stringify(h())}}function m(){w={},x=[],u={}}function n(a){var b=!1;return angular.forEach(c.getItems(),function(c){c.id==a&&(b=c.name)}),b}function o(a){var b=!1;return angular.forEach(c.getItems(),function(c){c.id==a&&(b=c)}),b}function p(){return{highcharts:{type:a.AREA_MODAL},options:b.getModalOptions(w)}}var q,r,s=a.AREA,t=_tr("Menu Item Popularity"),u={},v=window.sessionStorage.getItem("KYC_SELECTED_ITEM"),w={},x=[];return x=c.getItems(),{getData:h,getType:i,clearData:m,setData:e,onSetDataComplete:g,getHighChart:j}}]),angular.module("kyc.charts").factory("Revenue",["ChartType","ChartHelper","PaymentType",function(a,b,c){function d(a){var b=a.paymentType==c.CASH?a.created:a.paid;b=moment.utc(b).endOf("day").valueOf(),o[b]?o[b]+=a.total:o[b]=a.total}function e(a,c,d){m=d,r=a.valueOf(),s=c.valueOf(),q=b.getPreparedAreaData(o,a,c,!0)}function f(){return q.data}function g(){return n}function h(){return{type:n,title:p,data:f(),currency:m,numberLeft:q.total,numberRight:b.getPercentage(q.data,q.previousSpecifiedData),modal:l(),getPdf:k,getCsv:i,tooltipText:decodeURI(m)}}function i(){var a=f(),c=[[moment.utc(r).format("DD-MMM-YYYY")+" - "+moment.utc(s).format("DD-MMM-YYYY")],[p]];return angular.forEach(a,function(a){c.push([b.formatDate(a[0]),a[1]])}),{data:c}}function j(){o={},q={}}function k(){return{type:n,title:p,startDate:r,endDate:s,total:q.total,currency:m,percentage:b.getPercentage(q.data,q.previousSpecifiedData),dataJson:JSON.stringify(f())}}function l(){return{highcharts:{type:a.AREA_MODAL},options:b.getModalOptions(q)}}var m,n=a.AREA,o={},p=_tr("Revenue"),q={},r=0,s=0;return{getData:f,getType:g,clearData:j,setData:d,onSetDataComplete:e,getHighChart:h}}]),angular.module("kyc.reports").factory("AllReports",["$q","Report","NewCustomers","ZeroOrdersCustomers","OneTimeBuyers","MostFrequentBuyers","HighestSpendingCustomers","CustomersIncreasingOrders","CustomersIncreasingSpend","CustomersDecreasingOrders","CustomersDecreasingSpend","SleepingCustomers","MostPopularItemsReport","ItemPopularityIncrease","ItemPopularityDecrease","HighestGrossingDays","LowestGrossingDays","HighestOrderDays","LowestOrderDays","HighestOrderHours","HighestGrossingHours","VENUE_ID",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(a){var b=[],c=a.getData();for(var d in c){angular.forEach(c[d],function(a,c){"$"!=String(c[0])&&b.push(c)}),a.setTitles(b);break}}function x(){var c=moment.utc().valueOf(),d=moment.utc().subtract("month",1).valueOf(),e=moment.utc().subtract("month",2).valueOf();return a.all([b.items({venueId:v}).$promise,b.orders({venueId:v}).$promise,b.customerOrders({venueId:v}).$promise,b.customerOrders({venueId:v,maxDate:c,minDate:d}).$promise,b.customerOrders({venueId:v,maxDate:d,minDate:e}).$promise])}function y(b){B.data={items:b[0],orders:z(b[1]),customerOrders:A(b[2],b[3],b[4])};var c=[];return angular.forEach(C,function(a){a.init&&c.push(a.init())}),a.all(c)}function z(a){return angular.forEach(a,function(a){a.day=moment.utc(a.paid).startOf("day").valueOf(),a.hour=moment.utc(a.paid).hour()}),a}function A(a,b,c){return angular.forEach(a,function(a){var d,e;for(var f in b)if(b[f].id===a.id){d=b[f];break}for(var f in c)if(c[f].id===a.id){e=c[f];break}d&&d.orders&&e&&e.orders&&(a.orderPercentage=100*d.orders/e.orders,a.orderPercentage=d.orders>e.orders?a.orderPercentage:-a.orderPercentage,a.totalPercentage=100*d.total/e.total,a.totalPercentage=d.total>e.total?a.totalPercentage:-a.totalPercentage)}),a}var B=function(){},C=[c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u],D={dateJoined:_tr("Date Joined"),name:_tr("Name"),email:_tr("Email Address"),marketing:_tr("Marketing"),dateOfOrder:_tr("Date of Order"),numberOfOrders:_tr("Number of Orders"),totalSpent:_tr("Total Spent"),percentIncrease:_tr("% Increase"),percentDecrease:_tr("% Decrease"),lastOrder:_tr("Last Order"),itemName:_tr("Item Name"),quantitySold:_tr("Quantity Sold"),day:_tr("Day"),date:_tr("Date"),loyalty:_tr("Loyalty"),other:_tr("Other"),offers:_tr("Offers"),valueSold:_tr("Value Sold")};return B.init=function(){var b=a.defer();return x().then(y).then(function(){angular.forEach(C,function(a){a.setData(B.data)}),angular.forEach(C,function(a){a.onSetDataComplete&&a.onSetDataComplete(),w(a),a.title=a.getTitle()}),b.resolve()}),b.promise},B.getTitle=function(a){return D[a]?D[a]:a},B.getReportsList=function(){return C},B}]),angular.module("kyc.reports").factory("NewCustomers",[function(){var a=_tr("New Customers"),b={},c={},d=[],e=moment.utc().subtract("week",2);return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){var b=moment.utc(a.created);(b>e||a.firstOrder>e)&&void 0===c[a.id]&&(c[a.id]={dateJoined:a.created,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderBy="dateJoined",b.direction=!1,b.description=_tr("Displays all new customers who have signed up, or had their first order, in the past two weeks."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("ZeroOrdersCustomers",["VenueCustomers","VENUE_ID",function(){var a=_tr("Customers with zero orders"),b=[],c={},d={};return d.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){0===a.orders&&(c[a.id]={dateJoined:a.created,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},d.orderBy="dateJoined",d.direction=!1,d.description=_tr("Displays all customers who have signed up but have not yet placed any orders."),d.onSetDataComplete=function(){},d.getData=function(){return c},d.setTitles=function(a){b=a},d.getTitles=function(){return b},d.getTitle=function(){return a},d}]),angular.module("kyc.reports").factory("OneTimeBuyers",[function(){var a=_tr("One Time Buyers"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&1===a.orders&&(c[a.id]={dateJoined:a.created,dateOfOrder:a.firstOrder,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderBy="dateOfOrder",b.direction=!1,b.description=_tr("Displays all customers who have placed only one order."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("MostFrequentBuyers",[function(){var a=_tr("Most Frequent Buyers"),b={},c={},d=[];return b.setData=function(a){c={},a.customerOrders.sort(function(a,b){return a.orders-b.orders}),angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&(c[a.id]={numberOfOrders:a.orders,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderBy="numberOfOrders",b.direction=!1,b.description=_tr("Displays top 50 customers who have placed the most number of orders."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("HighestSpendingCustomers",[function(){var a=_tr("Highest Spending Customers"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){moment.utc(a.paid);void 0===c[a.id]&&(c[a.id]={totalSpent:null===a.total?0:a.total,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderBy="totalSpent",b.direction=!1,b.description=_tr("Displays top 50 customers who have the highest transactional spend."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("CustomersIncreasingOrders",[function(){var a=_tr("Customers Increasing Orders"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&!isNaN(a.orderPercentage)&&a.orderPercentage>0&&(c[a.id]={percentIncrease:a.orderPercentage,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderby="percentIncrease",b.direction=!1,b.description=_tr("Displays all customers who placed more orders this month than the previous month."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("CustomersDecreasingOrders",[function(){var a=_tr("Customers Decreasing Orders"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&!isNaN(a.orderPercentage)&&a.orderPercentage<0&&(c[a.id]={percentDecrease:Math.abs(a.orderPercentage),name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderby="percentDecrease",b.direction=!1,b.description=_tr("Displays all customers who placed less orders this month than the previous month."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("CustomersIncreasingSpend",[function(){var a=_tr("Customers Increasing Spend"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&!isNaN(a.totalPercentage)&&a.totalPercentage>0&&(c[a.id]={percentIncrease:a.totalPercentage,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderby="percentIncrease",b.direction=!1,b.description=_tr("Displays all customers who spent more this month than the previous month."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("CustomersDecreasingSpend",[function(){var a=_tr("Customers Decreasing Spend"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&!isNaN(a.totalPercentage)&&a.totalPercentage<0&&(c[a.id]={percentDecrease:Math.abs(a.totalPercentage),name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderby="percentDecrease",b.direction=!1,b.description=_tr("Displays all customers who spent less this month than the previous month."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("SleepingCustomers",[function(){var a=_tr("Sleeping Customers"),b={},c={},d=[],e=moment.utc().subtract("month",3);return b.setData=function(a){c={},angular.forEach(a.customerOrders,function(a){void 0===c[a.id]&&moment.utc(a.lastOrder).valueOf()<e.valueOf()&&(c[a.id]={lastOrder:a.lastOrder,name:a.firstName+" "+a.lastName,email:a.username,loyalty:a.optinLoyalty,offers:a.optinOffers,other:a.optinOther})})},b.orderby="lastOrder",b.direction=!0,b.description=_tr("Displays all customers who have previously made at least one order, but haven't ordered for 3 months."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("MostPopularItemsReport",[function(){var a=_tr("Most Popular Items"),b={},c={},d=[];return b.setData=function(a){c={},angular.forEach(a.items,function(a){void 0===c[a.menuItemId]?c[a.menuItemId]={itemName:a.name,quantitySold:a.qty}:c[a.menuItemId].quantitySold+=a.qty})},b.orderBy="quantitySold",b.direction=!1,b.description=_tr("Displays top 10 most popular items."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("ItemPopularityIncrease",[function(){var a=_tr("Item Popularity Increase"),b={},c={},d={},e=[];return b.setData=function(a){c={},d={};var b=moment.utc().subtract("month",1).valueOf(),e=moment.utc().subtract("month",2).valueOf();angular.forEach(a.items,function(a){void 0===d[a.menuItemId]&&(d[a.menuItemId]={name:a.name,$thisMonthQuantitySold:0,$lastMonthQuantitySold:0});var c=moment.utc(a.paid).valueOf();c>=b?d[a.menuItemId].$thisMonthQuantitySold+=a.qty:c>e&&(d[a.menuItemId].$lastMonthQuantitySold+=a.qty)})},b.onSetDataComplete=function(){angular.forEach(d,function(a,b){if(a.$thisMonthQuantitySold>a.$lastMonthQuantitySold){var d=100*a.$thisMonthQuantitySold/a.$lastMonthQuantitySold;1/0===d&&(d=100),c[b]={itemName:a.name,quantitySold:a.$thisMonthQuantitySold,percentIncrease:d}}})},b.orderBy="percentIncrease",b.direction=!1,b.description=_tr("Displays all items that sold more this month than last month."),b.getData=function(){return c},b.setTitles=function(a){e=a},b.getTitles=function(){return e},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("ItemPopularityDecrease",[function(){var a=_tr("Item Popularity Decrease"),b={},c={},d={},e=[];return b.setData=function(a){c={},d={};var b=moment.utc().subtract("month",1).valueOf(),e=moment.utc().subtract("month",2).valueOf();angular.forEach(a.items,function(a){void 0===d[a.menuItemId]&&(d[a.menuItemId]={name:a.name,$thisMonthQuantitySold:0,$lastMonthQuantitySold:0});var c=moment.utc(a.paid).valueOf();c>=b?d[a.menuItemId].$thisMonthQuantitySold+=a.qty:c>e&&(d[a.menuItemId].$lastMonthQuantitySold+=a.qty)})},b.onSetDataComplete=function(){angular.forEach(d,function(a,b){if(a.$thisMonthQuantitySold<a.$lastMonthQuantitySold){var d=100*a.$thisMonthQuantitySold/a.$lastMonthQuantitySold;c[b]={itemName:a.name,quantitySold:a.$thisMonthQuantitySold,percentDecrease:100-d}}})},b.orderBy="percentDecrease",b.direction=!1,b.description=_tr("Displays all items that sold less this month than last month"),b.getData=function(){return c},b.setTitles=function(a){e=a},b.getTitles=function(){return e},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("HighestGrossingDays",[function(){var a=_tr("Highest Grossing Days"),b={},c=[],d=[],e=moment.utc().subtract("month",1),f=10;return b.setData=function(a){var b={},d=_.groupBy(a.orders,"day");angular.forEach(d,function(a,c){c>e.valueOf()&&angular.forEach(a,function(a){void 0===b[c]?b[c]={day:a.paid,date:a.paid,valueSold:a.total}:b[c].valueSold+=a.total})}),c=_.sortBy(b,function(a){return-a.valueSold}).slice(0,f)},b.orderBy="valueSold",b.direction=!1,b.description=_tr("Display top 10 highest grossing days."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("LowestGrossingDays",[function(){var a=_tr("Lowest Grossing Days"),b={},c=[],d=[],e=moment.utc().subtract("month",1),f=10;return b.setData=function(a){var b={};c=[];var d=_.groupBy(a.orders,"day");angular.forEach(d,function(a,c){c>e.valueOf()&&angular.forEach(a,function(a){void 0===b[c]?b[c]={day:a.paid,date:a.paid,valueSold:a.total}:b[c].valueSold+=a.total})}),c=_.sortBy(b,function(a){return a.valueSold}).slice(0,f)},b.orderBy="valueSold",b.direction=!0,b.description=_tr("Display top 10 lowest grossing days."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports"),angular.module("kyc.reports").factory("HighestOrderDays",[function(){var a=_tr("Highest Order Days"),b={},c=[],d=[],e=moment.utc().subtract("month",1),f=10;return b.setData=function(a){var b={};c=[];var d=_.groupBy(a.orders,"day");angular.forEach(d,function(a,c){c>e.valueOf()&&angular.forEach(a,function(a){void 0===b[c]?b[c]={day:a.paid,date:a.paid,numberOfOrders:1}:b[c].numberOfOrders++})}),c=_.sortBy(b,function(a){return-a.numberOfOrders}).slice(0,f)},b.orderBy="numberOfOrders",b.direction=!1,b.description=_tr("Display top 10 highest order days."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("LowestOrderDays",[function(){var a=_tr("Lowest Order Days"),b={},c=[],d=[],e=moment.utc().subtract("month",1),f=10;return b.setData=function(a){var b={};c=[];var d=_.groupBy(a.orders,"day");angular.forEach(d,function(a,c){c>e.valueOf()&&angular.forEach(a,function(a){void 0===b[c]?b[c]={day:a.paid,date:a.paid,numberOfOrders:1}:b[c].numberOfOrders++})}),c=_.sortBy(b,function(a){return a.numberOfOrders}).slice(0,f)},b.orderBy="numberOfOrders",b.direction=!0,b.description=_tr("Display top 10 lowest order days."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("HighestGrossingHours",[function(){var a=_tr("Highest Grossing Hours"),b={},c=[],d=[],e=10;return b.setData=function(a){c=[],angular.forEach(a.orders,function(a){var b=moment.utc(a.paid).hour();void 0===c[b]&&(c[b]={timeSlot:moment.utc(a.paid).format("HH:00")+" - "+moment.utc(a.paid).format("HH:59"),valueSold:0}),c[b].valueSold+=a.total}),c=_.sortBy(c,function(a){return-a.valueSold}).slice(0,e)},b.orderBy="valueSold",b.direction=!1,b.description=_tr("Displays the accumulative total spent, broken down by 24 x 1 hour time slots."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.reports").factory("HighestOrderHours",[function(){var a=_tr("Highest Order Hours"),b={},c=[],d=[],e=10;return b.setData=function(a){c=[],angular.forEach(a.orders,function(a){var b=moment.utc(a.paid).hour();void 0===c[b]&&(c[b]={timeSlot:moment.utc(a.paid).format("HH:00")+" - "+moment.utc(a.paid).format("HH:59"),numberOfOrders:0}),c[b].numberOfOrders++
}),c=_.sortBy(c,function(a){return-a.numberOfOrders}).slice(0,e)},b.orderBy="numberOfOrders",b.direction=!1,b.description=_tr("Displays the accumulative number of orders, broken down by 24 x 1 hour time slots."),b.getData=function(){return c},b.setTitles=function(a){d=a},b.getTitles=function(){return d},b.getTitle=function(){return a},b}]),angular.module("kyc.filters",[]).filter("interpolate",["version",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}]).filter("orderObjectBy",function(){return function(a,b,c){var d=[];return angular.forEach(a,function(a){d.push(a)}),d.sort(function(a,c){return a[b]>c[b]?1:-1}),c&&d.reverse(),d}}).filter("marketing",function(){return function(a){return 1===a?"/img/marketing-in.png":"/img/marketing-out.png"}}).filter("timeAgo",function(){return function(a){"object"!=typeof a&&(a=moment.utc(a));var b,c=Math.floor((moment.utc()-a).valueOf()/1e3),d=Math.floor(c/31536e3);return d>=1?(b=_tr("years ago"),1>d&&(b=_tr("year ago"))):(d=Math.floor(c/2592e3),d>=1?(b=_tr("months ago"),1>d&&(b=_tr("month ago"))):(d=Math.floor(c/86400),d>=1?(b=_tr("days ago"),1>d&&(d="",b=_tr("yesterday"))):(d=Math.floor(c/3600),d>=1?(b=_tr("hours ago"),1>d&&(b=_tr("hour ago"))):(d=Math.floor(c/60),d>=1?(b=_tr("minutes ago"),1>d&&(b=_tr("minute ago"))):(d=c,b=_tr("seconds ago"),1>d&&(b=_tr("second ago"))))))),d+" "+b}}).filter("characters",function(){return function(a,b,c){if(isNaN(b))return a;if(0>=b)return"";if(a&&a.length>b){if(a=a.substring(0,b),c)for(;" "===a.charAt(a.length-1);)a=a.substr(0,a.length-1);else{var d=a.lastIndexOf(" ");-1!==d&&(a=a.substr(0,d))}return a+"..."}return a}}).filter("words",function(){return function(a,b){if(isNaN(b))return a;if(0>=b)return"";if(a){var c=a.split(/\s+/);c.length>b&&(a=c.slice(0,b).join(" ")+"...")}return a}}),angular.module("kyc").constant("MarketingResources",{loyalty:{img:"/img/marketing-loyalty.png",description:_tr("Contact this customer regarding loyalty programmes")},offers:{img:"/img/marketing-discount.png",description:_tr("Contact this customer with discounts and special offers")},other:{img:"/img/marketing-newsletter.png",description:_tr("Contact this customer with newsletters, research and marketing emails")}});