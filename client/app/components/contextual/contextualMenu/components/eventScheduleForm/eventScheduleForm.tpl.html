<div class="event-schedule-form">
  <md-input-container class="md-block md-input-container-with-no-float md-input-container-frequency" md-no-float>
    <span class="input-label" translate>Frequency:</span>
    <md-select ng-model="eventScheduleFormCtrl.schedule.freq" name="frequency" required>
      <md-option ng-value="schedule.value" ng-repeat="schedule in eventScheduleFormCtrl.schedules">
        {{ schedule.title }}
      </md-option>
    </md-select>

    <div ng-messages="eventScheduleFormCtrl.contextualForm.frequency.$error" ng-show="eventScheduleFormCtrl.contextualForm.frequency.$dirty">
      <div ng-message="required" translate ng-class="{'activated': eventBasicCtrl.contextualForm.frequency.$error.required}">This is required.</div>
    </div>
  </md-input-container>

  <div class="md-block md-block-timepicker">
    <mdp-time-picker mdp-auto-switch="true"
          mdp-open-on-click
          name="timeFormat"
          mdp-placeholder="{{ 'Start time' | translate }}"
          ng-model="eventScheduleFormCtrl.schedule.$startTime"
          mdp-format="LT"
          required></mdp-time-picker>

    <div ng-messages="eventScheduleFormCtrl.contextualForm.timeFormat.$error" ng-show="eventScheduleFormCtrl.contextualForm.$submitted">
      <div ng-message="required" translate ng-class="{'activated': eventBasicCtrl.contextualForm.timeFormat.$error.required}">This is required.</div>
      <div ng-message="format" translate ng-class="{'activated': eventBasicCtrl.contextualForm.timeFormat.$error.format}">Invalid format.</div>
    </div>
  </div>
  <div class="md-block" ng-if="eventScheduleFormCtrl.isOnceFrequency()">

    <mdp-date-picker mdp-placeholder="{{ 'Date' | translate }}"
          ng-model="eventScheduleFormCtrl.schedule.$startDate"
          mdp-open-on-click
          name="startDate"
          required
          mdp-format="DD/MM/YYYY"></mdp-date-picker>

    <div ng-messages="eventScheduleFormCtrl.contextualForm.startDate.$error" ng-show="eventScheduleFormCtrl.contextualForm.$submitted">
      <div ng-message="required" translate ng-class="{'activated': eventBasicCtrl.contextualForm.startDate.$error.required}">This is required.</div>
      <div ng-message="format" translate ng-class="{'activated': eventBasicCtrl.contextualForm.startDate.$error.valid}">Invalid date.</div>
    </div>
  </div>

  <div class="md-block md-block-datepicker-multiple" ng-if="!eventScheduleFormCtrl.isOnceFrequency()">
    <div class="datepicker-wrapper date-picker-block">

      <mdp-date-picker mdp-placeholder="{{ 'Start date' | translate }}"
            ng-model="eventScheduleFormCtrl.schedule.$startDate"
            mdp-open-on-click
            name="startDate"
            mdp-max-date="eventScheduleFormCtrl.schedule.$endDate"
            required
            mdp-format="DD/MM/YYYY"></mdp-date-picker>

      <div ng-messages="eventScheduleFormCtrl.contextualForm.startDate.$error" ng-show="eventScheduleFormCtrl.contextualForm.$submitted">
        <div ng-message="required" translate ng-class="{'activated': eventBasicCtrl.contextualForm.startDate.$error.required}">This is required.</div>
        <div ng-message="maxDate" translate ng-class="{'activated': eventBasicCtrl.contextualForm.startDate.$error.maxdate}">Start date need to be smaller than end date.</div>
        <div ng-message="format" translate ng-class="{'activated': eventBasicCtrl.contextualForm.startDate.$error.valid}">Invalid date.</div>
      </div>
    </div>

    <div class="datepicker-wrapper date-picker-block">
      <mdp-date-picker mdp-placeholder="{{ 'End date' | translate }}"
            ng-model="eventScheduleFormCtrl.schedule.$endDate"
            mdp-open-on-click
            name="endDate"
            mdp-min-date="eventScheduleFormCtrl.schedule.$startDate"
            required
            mdp-format="DD/MM/YYYY"></mdp-date-picker>

      <div ng-messages="eventScheduleFormCtrl.contextualForm.endDate.$error" ng-show="eventScheduleFormCtrl.contextualForm.$submitted">
        <div ng-message="required" translate ng-class="{'activated': eventBasicCtrl.contextualForm.endDate.$error.required}">This is required.</div>
        <div ng-message="minDate" translate ng-class="{'activated': eventBasicCtrl.contextualForm.endDate.$error.mindate}">End date need to be higher than start date.</div>
        <div ng-message="format" translate ng-class="{'activated': eventBasicCtrl.contextualForm.endDate.$error.valid}">Invalid date.</div>
      </div>
    </div>
  </div>

  <div class="collection-slots-select-content" ng-if="eventScheduleFormCtrl.contextualMenuCtrl.isShowing('event') || eventScheduleFormCtrl.contextualMenuCtrl.isShowing('eventSchedule')">
    <div class="error error-required-pickup-slot" ng-if="eventScheduleFormCtrl.contextualForm.$submitted && !eventScheduleFormCtrl.schedule.pickupSlots.length" translate>You must select at least one collection slot.</div>

    <label class="label-title" translate>Choose collection slots:</label>
    <collection-slots-select ng-model="eventScheduleFormCtrl.schedule"></collection-slots-select>
  </div>
</div>