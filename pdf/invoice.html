<html>
<head>
<script src="libs/jquery-1.9.1.min.js"></script>
<script src="libs/moment.min.js"></script>
<script src="libs/shared.js"></script>
<script>

$(function () {

	function formatPrice(price){

		return "&pound;"+price.toFixed(2)
	}

	var vatPercentage = 20;

	var invoice = {"id":308,"dueDate":"July 21, 2014","paidDate":"July 21, 2014","items":[{"name":"Independant","price":517.33,"quantity":1}],"user":["bla","add1","add2","add3"]};

	if(invoice.paidDate !== undefined && invoice.paidDate !== ""){
		console.log(invoice.paidDate===undefined,'here');
		$(".showIfPaid").css({"display":"block"})
	}


	var billToUiStr="";
	$.each(invoice.user,function(index,row){
		billToUiStr+=row+"<br/>";
	})
	$('#billTo').html(billToUiStr);


	$("#invoiceId").html(invoice.id);
	$("#dueDate").html(invoice.dueDate);
	$("#paidDate").html(invoice.paidDate);
	$("#vatPercentage").html(vatPercentage);
	

	var subTotal = 0;
	$.each(invoice.items,function(index,item){
		var itemSubtotal = item.quantity * item.price;
		var ui_str =  "<tr>" +
									"<td>"+item.name+"</td>"+
									"<td>"+formatPrice(item.price)+"</td>"+
									"<td>"+item.quantity+"</td>"+
									"<td>"+formatPrice(itemSubtotal)+"</td>"+
									"</tr>";
		$(".invoice").append(ui_str);
		subTotal+=itemSubtotal;
	});

	var vatTotal = subTotal * (vatPercentage/100);
	var total = subTotal + vatTotal;
	

	$("#subTotal").html(formatPrice(subTotal));
	$("#vatTotal").html(formatPrice(vatTotal));
	$("#total").html(formatPrice(total));

  });
</script>
<style>

@font-face{
font-family:"HelveticaNeueW01-45Ligh";
src:url("fonts/fonts-com/ae1656aa-5f8f-4905-aed0-93e667bd6e4a.eot?#iefix");
src:url("fonts/fonts-com/ae1656aa-5f8f-4905-aed0-93e667bd6e4a.eot?#iefix") format("eot"),url("fonts/fonts-com/530dee22-e3c1-4e9f-bf62-c31d510d9656.woff") format("woff"),url("fonts/fonts-com/688ab72b-4deb-4e15-a088-89166978d469.ttf") format("truetype"),url("fonts/fonts-com/7816f72f-f47e-4715-8cd7-960e3723846a.svg#7816f72f-f47e-4715-8cd7-960e3723846a") format("svg");
}

	body{
			font-family:"HelveticaNeueW01-45Ligh","sans-serif";
			font-size:100%;
	}

	.address{
		position:absolute;
		right:0;
		text-align:left;
		width:auto;
		top:3%;
	} 
	h1{
		font-size:120%;
		margin-bottom: 0;	
	}

	.invoice{
		margin-top:22%;
		width:100%;		
	}
	.invoice th{ padding-bottom:10px;}
	.invoice td {
		padding:10px 0;
		text-align:center;
		border:none;
		margin:0; border:1px solid #d3d3d3;
	}
	.invoice th:first-child,.invoice td:first-child{
		text-align: left;
		padding-left:20px;
		width:50%;
	}

	.invoice tr{		
		background:#dfdfdf;
		border:1px solid #black;
	}
	.invoice tr:first-child{
		background:none;
	}

	.total{
		float:right;
		top:20px;
		position:relative;
	}



	.total th{
		width:100px;
		text-align: right; padding-bottom:7px;
	}

	.total td{
		width:50px;
		text-align: right; padding-bottom:7px;
	}

	.paid {
		position:absolute;
		left:45%;
		top:5px;
		margin:2% 0;
	}

	.showIfPaid{
			display:none;
	}
	.logo{ margin:2% 0;}
	.myrow{ padding:0; margin:5% 0 0 0;}
	.row{ float:left; width:100%; padding-bottom:3px;}
	.row p{ margin:0;}
	.row p b{ float:left;}
	.row p span{ font-weight:bold; width:178px; text-align:right; float:left;}
	
	.totalHeader{ font-size:22px; margin-top:2%; line-height:50px;}
	.totlist{ font-size:19px; margin-top:2%; line-height:50px;}
 
</style>
</head>
<body>

	<img class='logo' src='img/logo.png'/>
	<img class='paid showIfPaid' src='img/paid.png'/>
	<div class='address'>
			<h1>Preoday Ltd.</h1>
			<p>2nd Floor Hygeia House,<br/>
				66 College Road,<br/>
				Harrow,<br/>
				Middlesex,<br/>
				HA1 1BE</p>
	</div>
	<div class='topWrapper'>
		<div>
			<p><b>Bill To</b><br/>
				<span id='billTo'></span>
			</p>	
		</div>
		
		<div class='row myrow'><p><b>Invoice #:</b><span id='invoiceId'></span></p></div>
		<div class='row'><p><b>Due Date:</b><span id='dueDate'></span></p></div>
		<div class='row lastrow showIfPaid'><p><b>Paid Date:</b><span id='paidDate'></span></p></div>
	</div>
	<table class='invoice' width="100%" border="0" cellspacing="0" cellpadding="0">
		<tr>
			<th>Description</th>
			<th>Unit Price</th>
			<th>Quantity</th>
			<th>Amount</th>
		</tr>
		
	</table>
	<table class='total' width="300" border="0" cellspacing="0" cellpadding="0">
				<tr>
					<th>Subtotal:</th>
					<td id='subTotal'></td>
				</tr>
				<tr>
					<th>Vat @ <span id='vatPercentage'></span>%:</th>
					<td id='vatTotal'></td>
				</tr>
				<tr>
					<th class='totalHeader'>Total:</th>
					<td class="totlist" id='total'></td>
				</tr>
	</table>
</body>
</html>
