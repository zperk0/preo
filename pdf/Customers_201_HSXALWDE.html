<html>
<head>
<script src="libs/jquery-1.9.1.min.js"></script>
<script src="libs/moment.min.js"></script>
<script src="libs/shared.js"></script>
<script>

$(function () {

    var data= {"title":"Customers","startDate":1398816000000,"endDate":1406678399999,"data":"{\"Name\":[\"Bob Tester\",\"Klaus Seyfert\",\"Scott Davidson\",\"Russel Smith\",\"Daniel Dwyer\",\"James Ou0027Reilly\",\"Emma White\",\"Michael Thompson Test\",\"Andrew White\",\"Andrew Neil\",\"Michael Thompson\",\"Oliver White\",\"John Kelly\",\"Wendy Harris\",\"Oliver White\",\"Brian Meggs\",\"Tom McCloskey\",\"Sven Simon\",\"Edward King\",\"Beverley Law\",\"James Varanese\",\"Mark Harris\",\"Brian Long\",\"Stephen Devine\",\"Daniel Muir\",\"Jessica Gooderham\",\"Tom Street\",\"alan donn\",\"Lawrence Latimer\",\"Una Joyce\",\"Matthew Nelson\",\"Lawrence Cohen\",\"Elaine Bresnan\",\"Nick Ramsden\",\"Elizabeth Attew\",\"Kenny  Wilkins\",\"Jess Casey\",\"Elly Walsh\",\"Jane  Carey\",\"Barry Galvin\",\"kane westwood\",\"Paddy Hogan\",\"Petet Barry\",\"Ben Jones\",\"Erik Cusack\",\"Barbara Chapman\",\"Eric Nelson\",\"Emily White\",\"Bianca Burton\",\"Mich Turner\",\"denis Larkin\",\"Clive Pilcher\",\"James Stevens\",\"Maurice Kelly\",\"Georgia Ewing\",\"Eugene Hibbert\",\"Simon Hedges\",\"Niall Crowley\",\"Iain Drummond\",\"Andrew Riley\",\"Leo Rosa\",\"Meaghan Rogers\",\"Mark MacGinty\",\"jurgita vaitiekuniene\",\"stephen brennan\",\"Barry Jeffers\",\"Robert Carrick\",\"Simon Says\"],\"Total Spent\":[1379.05,358.8,207.45,167.55,156.64,143.9,66.6,59.98,45.4,41.4,40.81,33.6,31.3,30.5,28.7,21.6,18,15.56,15.5,14.25,14.2,14.2,14,13.7,13.5,13.45,13.4,13,12,10.45,8.5,8,8,7.3,7.15,7,6.85,6.75,6.7,6.6,6.6,6.48,6,5.9,5.9,5.5,5.18,5.1,5,4.95,4.9,4.8,4.8,4.5,4.5,4.5,4.35,3.61,3.24,2.5,2.4,2,2,1.53,1.35,1,1,0],\"Email Address\":[\"bob@primal.com.au\",\"klaus@huettendorf.com\",\"scott.davidson@preoday.com\",\"russel_smith@hotmail.com\",\"danieldwyer08@gmail.com\",\"oreillyjames@hotmail.com\",\"emcwhite23@yahoo.co.uk\",\"michael.thompson@preoday.com\",\"andrew.white@preoday.com\",\"andrew@muskermcintyre.co.uk\",\"mt@ox.com\",\"oliver.white+hull@preoday.com\",\"seankelly69@icloud.com\",\"wendyjharris@hotmail.co.uk\",\"oliverjohnwhite@gmail.com\",\"brian.meggs@informa.com\",\"tom@mccloskeyandco.ie\",\"v-svsimo@microsoft.com\",\"edward.king@a-s-i.co.uk\",\"beverley@allcreativebranding.com\",\"jamesvaranese@gmail.com\",\"mark@harrisrestaurantconsultants.com\",\"brianlong@ntlworld.com\",\"sjpdevine2000@yahoo.co.uk\",\"dm@aurigapartnership.com\",\"jgooderham@hotmail.co.uk\",\"tomstreer@hotmail.co.uk\",\"donn111@live.co.uk\",\"lawrencelatimer@gmail.com\",\"v-unjoyc@microsoft.com\",\"r.matt.nelson@gmail.com\",\"laerence.cojen@hotmail.co.uk\",\"elainebresnan@gmail.com\",\"n.ramsden1@gmail.com\",\"elizabeth.attew@yahoo.co.uk\",\"knnwlkns2000@yahoo.co.uk\",\"info@ridinglondon.com\",\"elly@iamrecruitment.com\",\"janecarey@yahoo.co.uk\",\"b.galvin@virginmedia.com\",\"kane.westwood@googlemail.com\",\"paddy.hogan@ksg.ie\",\"peadbarry@gmail.com\",\"floydy50@hotmail.com\",\"ecko@campus.ie\",\"barbarachapman2001@yahoo.co.uk\",\"v-erne@microsoft.com\",\"emcwhite2@hotmail.co.uk\",\"bianca.burton@gmail.com\",\"mich@lvcc.co.uk\",\"denislarkin@live.ie\",\"clivepilcher@yahoo.co.uk\",\"james.stevens@harpercollins.co.uk\",\"maurice.kelly@rileys.co.uk\",\"ewings@kennetconstruction.co.uk\",\"eugene.hibbert@theatreroyal.org.uk\",\"simonhedges@live.co.uk\",\"niall.crowley@preoday.com\",\"v-iadrum@microsoft.com\",\"andrewdavidriley@gmail.com\",\"leo@cafe-koelsch.de\",\"meaghanrogers@gmail.com\",\"mmacginty1@gmail.com\",\"jurgitav@microsoft.com\",\"v-stebre@microsoft.com\",\"barryjeffers10@gmail.com\",\"robert_carrick_1@hotmail.com\",\"simonsays@todo.nu\"],\"Marketing\":[\" - \",\" - \",\" - \",\"Accepts\",\" - \",\"Accepts\",\" - \",\" - \",\" - \",\" - \",\"Accepts\",\"Accepts\",\"Accepts\",\" - \",\" - \",\"Accepts\",\" - \",\"Accepts\",\"Accepts\",\"Accepts\",\" - \",\" - \",\"Accepts\",\" - \",\"Accepts\",\"Accepts\",\" - \",\"Accepts\",\" - \",\"Accepts\",\" - \",\" - \",\"Accepts\",\"Accepts\",\"Accepts\",\"Accepts\",\" - \",\"Accepts\",\"Accepts\",\"Accepts\",\"Accepts\",\"Accepts\",\" - \",\"Accepts\",\" - \",\"Accepts\",\" - \",\"Accepts\",\"Accepts\",\" - \",\" - \",\"Accepts\",\"Accepts\",\"Accepts\",\"Accepts\",\" - \",\" - \",\" - \",\"Accepts\",\"Accepts\",\" - \",\"Accepts\",\" - \",\"Accepts\",\"Accepts\",\"Accepts\",\"Accepts\",\" - \"]}"};
    
		var parsedData = JSON.parse(data.data);
		var pageCount = 0;
		var maxRows = 20;
    $('.title').html(data.title);

    $('.dates').html(formatDate(data.startDate) + " - " + formatDate(data.endDate));

  	function formatPercentage(val){	
    		var strVal = String(val);
				if (val <0 )
					strVal = "-"+strVal;
				else
					strVal = "+"+strVal;
				return strVal+"%";
		}

		var headerRow = []
		var dataRows = [];
		$.each(parsedData,function(title,dataArray){
				var td = "<th>"+title+"</th>"
				headerRow.push(td);
				$.each(dataArray,function(i,value){
					if (dataRows[i] == undefined)
						dataRows[i] = [];
					var rowTd  = "<td>"+value+"</td>"
					dataRows[i].push(rowTd);
				})
		})

		function insertHeader(tableId){
			var tableHeader = $('#'+tableId+' thead tr');
			$.each(headerRow,function(k,v){
					tableHeader.append(v);
			})
		}

		function insertRow(tableId,row){
			$('#'+tableId+' tbody').append('<tr>'+row+'</tr>');
		}

		var tableId;
		$.each(dataRows,function(k,rowItems){
			if (k % maxRows === 0){
				if (k > 0){
					insertFooter('',tableId);
				}
				tableId = insertTable();
				insertHeader(tableId);
			}
			var ui_str = '';
			$.each(rowItems,function(i,v){
				ui_str +=v;
			});			
			insertRow(tableId,ui_str);						
		})
		insertFooter('never',tableId);
    	
    function insertTable(){
			pageCount++;
			var id = 'table_'+pageCount;
		  var ui_str = '<div class="content-table" id='+id+'>';
				ui_str += '	<table class="table table-striped table-list">';
				ui_str += '	  <thead>';
				ui_str += '	  	<tr>';
				ui_str += '	  	</tr>';
				ui_str += '	  </thead>';
				ui_str += '	  <tbody>';
				ui_str += '	  </tbody>';
				ui_str += '	</table>';
				ui_str += '</div>';
				$('#content').append(ui_str);
				console.log('appended')
			return id;
    }
    
    
    function formatDate(ts){
        var date = new Date(ts);
        return date.getDate()+"/"+date.getMonth()+"/"+date.getFullYear();
    }

    function insertFooter(cl,tableId){
    	var ui_str= "<div class='footer "+cl+" '>";
			ui_str+= "	<div class='logo'>Report generated by <br/><img src='img/logo.png'/></div>";
			ui_str+= "</div>";
			var pager_str ="<div class='pageCount'>"+pageCount+"</div>"
			$('#content').append(ui_str);
			$('#'+tableId).append(pager_str);
    }

  });
</script>
<style>
	@font-face{
		font-family:"Co Text W01 Bold";
		src:url("fonts/fonts-com/137c5228-fcea-49b5-87a2-652892f35567.eot?#iefix");
		src:url("fonts/fonts-com/137c5228-fcea-49b5-87a2-652892f35567.eot?#iefix") format("eot"),url("fonts/fonts-com/48ad114c-19ab-41fc-92c3-eab9077289d4.woff") format("woff"),url("fonts/fonts-com/82715156-ba20-42e6-8103-3038d1ef9fb9.ttf") format("truetype"),url("fonts/fonts-com/f328709c-b561-4944-95c5-0c5a9ab1a87c.svg#f328709c-b561-4944-95c5-0c5a9ab1a87c") format("svg");
		}
		@font-face{
		font-family:"Co Text W01 Light";
		src:url("fonts/fonts-com/601bffc8-cea9-4d92-ac3f-617b85516156.eot?#iefix");
		src:url("fonts/fonts-com/601bffc8-cea9-4d92-ac3f-617b85516156.eot?#iefix") format("eot"),url("fonts/fonts-com/fe5ae5d6-d1f1-487e-9e59-76f5f199c3ae.woff") format("woff"),url("fonts/fonts-com/12ea435b-6a3a-4d98-bcf3-418174b701b7.ttf") format("truetype"),url("fonts/fonts-com/42dd9b27-137a-4cc1-a771-ef3625e2779c.svg#42dd9b27-137a-4cc1-a771-ef3625e2779c") format("svg");
	}
	body{
			font-family:"Co Text W01 Light","sans-serif";;
	}
	.title{
		float:left;		
		width:40%;
		text-align:left;
	}
	.dates{
		float:right;
		width:40%;
		text-align:right;
	}
	.clearFix{
		clear:both;
	}
	.header{
		border-bottom: 1px solid #ccc;
		padding-bottom: 10px;
		margin-bottom: 10px;
		font-family:"Co Text W01 Light","sans-serif";
	}
	.innerHeader{
		font-size: 200%;
		color: #1476B7;
		display: block;
		font-weight:bold;
		margin-bottom: 40px;
		font-family:"Co Text W01 Bold","Co Text W01 Light","sans-serif";

	}
	.innerHeader sup{
			font-size:50%;
			display:inline-block;
			margin-left:5px;
			color:#8cbe56;			
	}
	.footer{
		margin-top:40px;
		page-break-after: always;
	}

	.logo{
		float:right;
	}
	.never{
		page-break-before: avoid !important;
		page-break-after: avoid !important;
	}

	.table-list thead th{
  cursor: pointer;
	}

	.content-table{
		position:relative;
		height:820px;
	}
	.pageCount{
		position:absolute;
		bottom:-100px;
		left:0;
	}

table {
	width:100%;
	margin:0 auto;
}

.table-striped{
  border-collapse: separate !important;
  border-radius: 5px;  
  overflow: hidden;
  border: 1px solid #b4b6b8; 

}

	table tr.alt, table tr.even, table tr:nth-of-type(even), table tbody:nth-of-type(even){
	  background-color:#fcfcfc;
	}

	.table-striped tr:first-child th{
	  border-top:none;
	}

	.table-striped td:last-child,.table-striped th:last-child{
	  border-right:none;
	}

	.table-striped td,.table-striped th{
	  font-family:"Co Text W01 Bold";
	  color: #6d6e71;
	  border-top: 1px solid #b4b6b8; 
	  border-right:1px solid #b4b6b8; 
	}

	.table-striped th input, .table-striped td input{
	  margin: 0px;
	}

	.table-striped thead tr th{
	  padding: 15px;
	  background-color: #F3F4F4 !important;
	  text-align:left;
	  font-weight: 400;
	}


	.table-striped tbody tr td{
	  padding: 10px 15px;
	}



</style>
</head>
<body>
<div class='header'>
		<div class='title'></div>
		<div class='dates'></div>
		<div class='clearFix'></div>
</div>

<div id='content'>
	
</div>
	
</body>
</html>
